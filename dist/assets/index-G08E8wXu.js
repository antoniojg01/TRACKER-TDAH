var e=Object.defineProperty,t=Object.defineProperties,r=Object.getOwnPropertyDescriptors,s=Object.getOwnPropertyNames,n=Object.getOwnPropertySymbols,o=Object.getPrototypeOf,a=Object.prototype.hasOwnProperty,i=Object.prototype.propertyIsEnumerable,l=Reflect.get,c=(t,r,s)=>r in t?e(t,r,{enumerable:!0,configurable:!0,writable:!0,value:s}):t[r]=s,d=(e,t)=>{for(var r in t||(t={}))a.call(t,r)&&c(e,r,t[r]);if(n)for(var r of n(t))i.call(t,r)&&c(e,r,t[r]);return e},u=(e,s)=>t(e,r(s)),h=(e,t,r)=>l(o(e),r,t),p=(e,t,r)=>new Promise((s,n)=>{var o=e=>{try{i(r.next(e))}catch(t){n(t)}},a=e=>{try{i(r.throw(e))}catch(t){n(t)}},i=e=>e.done?s(e.value):Promise.resolve(e.value).then(o,a);i((r=r.apply(e,t)).next())});import{r as m,a as g}from"./react-vendor-D7amQhf0.js";import{r as f}from"./ui-vendor-BLoYxE1z.js";import{r as x,_ as b,C as v,a as y,E as w,o as k,F as N,L as j,g as _,i as S,b as I,v as C,c as T,d as E,e as A,f as O,h as P,j as R,k as L,S as M,l as D,m as $,n as U,p as z,q as F,s as q,t as B,u as V,w as H,x as W,y as G,z as J,A as K,B as Z,D as X,G as Y,H as Q,I as ee,J as te,K as re,M as se,N as ne,O as oe,P as ae,Q as ie}from"./firebase-vendor-DD5o3efi.js";var le,ce,de=(le={"assets/index-G08E8wXu.js"(e){!function(){const e=document.createElement("link").relList;if(!(e&&e.supports&&e.supports("modulepreload"))){for(const e of document.querySelectorAll('link[rel="modulepreload"]'))t(e);new MutationObserver(e=>{for(const r of e)if("childList"===r.type)for(const e of r.addedNodes)"LINK"===e.tagName&&"modulepreload"===e.rel&&t(e)}).observe(document,{childList:!0,subtree:!0})}function t(e){if(e.ep)return;e.ep=!0;const t=function(e){const t={};return e.integrity&&(t.integrity=e.integrity),e.referrerPolicy&&(t.referrerPolicy=e.referrerPolicy),"use-credentials"===e.crossOrigin?t.credentials="include":"anonymous"===e.crossOrigin?t.credentials="omit":t.credentials="same-origin",t}(e);fetch(e.href,t)}}();var t,r,s,n={exports:{}},o={},a=(r||(r=1,n.exports=function(){if(t)return o;t=1;var e=m(),r=Symbol.for("react.element"),s=Symbol.for("react.fragment"),n=Object.prototype.hasOwnProperty,a=e.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,i={key:!0,ref:!0,__self:!0,__source:!0};function l(e,t,s){var o,l={},c=null,d=null;for(o in void 0!==s&&(c=""+s),void 0!==t.key&&(c=""+t.key),void 0!==t.ref&&(d=t.ref),t)n.call(t,o)&&!i.hasOwnProperty(o)&&(l[o]=t[o]);if(e&&e.defaultProps)for(o in t=e.defaultProps)void 0===l[o]&&(l[o]=t[o]);return{$$typeof:r,type:e,key:c,ref:d,props:l,_owner:a.current}}return o.Fragment=s,o.jsx=l,o.jsxs=l,o}()),n.exports),i={},l=function(){if(s)return i;s=1;var e=g();return i.createRoot=e.createRoot,i.hydrateRoot=e.hydrateRoot,i}();const c=[{level:1,name:"A Singularidade",xpRequired:0,storyEra:"O Big Bang"},{level:2,name:"Radiação Primordial",xpRequired:50,storyEra:"A Inflação Cósmica"},{level:3,name:"A Era das Trevas",xpRequired:150,storyEra:"Formação dos Primeiros Átomos"},{level:4,name:"Estrelas de Primeira Geração",xpRequired:300,storyEra:"O Reacendimento do Universo"},{level:5,name:"Cadinho de Elementos",xpRequired:500,storyEra:"Supernovas e Metalicidade"},{level:6,name:"Arquitetura Galáctica",xpRequired:800,storyEra:"Formação da Via Láctea"},{level:7,name:"Nascimento Solar",xpRequired:1200,storyEra:"O Sistema Solar Primitivo"},{level:8,name:"Mundo de Magma",xpRequired:1700,storyEra:"Hadeano: A Terra Recém-Nascida"},{level:9,name:"Sopa Orgânica",xpRequired:2300,storyEra:"O Surgimento da Vida (ABIOGÊNESE)"},{level:10,name:"Grande Oxidação",xpRequired:3e3,storyEra:"Cianobactérias e a Mudança Atmosférica"},{level:11,name:"Complexidade Celular",xpRequired:4e3,storyEra:"A Ascensão dos Eucariontes"},{level:12,name:"Explosão Cambriana",xpRequired:5500,storyEra:"A Diversificação da Vida Marinha"},{level:13,name:"Conquista da Terra",xpRequired:7500,storyEra:"Plantas e Anfíbios nos Continentes"},{level:14,name:"Era dos Gigantes",xpRequired:1e4,storyEra:"O Reinado dos Dinossauros"},{level:15,name:"Aurora Humana",xpRequired:13e3,storyEra:"Hominídeos e o Domínio do Fogo"},{level:16,name:"Civilização",xpRequired:17e3,storyEra:"Escrita, Agricultura e Impérios"},{level:17,name:"O Presente",xpRequired:22e3,storyEra:"Era Digital e Exploração Espacial"}],le={1:"No princípio era o vazio absoluto. Então, em uma fração infinitesimal de segundo, toda a matéria e energia do universo explodiram em existência. A temperatura era incompreensível, as leis da física se fundiam. Este é o momento zero - a Singularidade.",2:"Nos primeiros trilionésimos de segundo, o universo expandiu exponencialmente. Partículas fundamentais dançavam em um plasma incandescente. A radiação preenchia todo o cosmos nascente. Esta é a era da pura energia primordial.",3:"Por 380 mil anos, o universo foi opaco - um nevoeiro denso de hidrogênio ionizado. Quando finalmente esfriou, os primeiros átomos se formaram e a luz pode viajar livremente. A Era das Trevas começa, aguardando o nascimento das primeiras estrelas.",4:"Após milhões de anos no escuro, núcleos de gás colapsaram sob sua própria gravidade. As primeiras estrelas acenderam, massivas e azuis. Elas rasgaram as trevas, reionizando o universo. O cosmos finalmente tinha luz novamente.",5:"As estrelas primordiais viveram rápido e morreram jovens em supernovas espetaculares. Nessas fornalhas cósmicas, elementos pesados foram forjados - carbono, oxigênio, ferro. A química do universo se enriquecia. Você é feito de poeira estelar.",6:"A gravidade puxou estrelas em espirais majestosas. Nossa galáxia, a Via Láctea, tomou forma - um disco rotativo de 200 bilhões de sóis. No centro, um buraco negro supermassivo orquestra a dança cósmica. Arquitetura em escala inimaginável.",7:"Em um braço espiral da galáxia, uma nuvem de gás e poeira começou a colapsar. No centro, nosso Sol nasceu. Ao redor, planetesimais colidiram e cresceram. Em 100 milhões de anos, o Sistema Solar estava formado. Nosso lar cósmico nasceu.",8:"A Terra recém-formada era um inferno de magma líquido, bombardeada por asteroides. A superfície era uma sopa incandescente de rocha derretida. Lentamente, uma crosta frágil começou a solidificar. Este é o Hadeano - o período do inferno primordial.",9:"Nas poças quentes de um planeta jovem, algo extraordinário aconteceu. Moléculas orgânicas se organizaram. RNA primitivo se replicou. A primeira célula se formou. A vida emergiu da química. A abiogênese - o maior milagre do universo.",10:"Cianobactérias aprenderam a fotossintetizar, liberando oxigênio como resíduo. Por bilhões de anos, esse gás tóxico se acumulou. A atmosfera mudou radicalmente. Organismos que respiravam oxigênio puderam evoluir. O Grande Evento de Oxidação transformou a Terra.",11:"Células procariotas simples foram engolfadas por outras, formando simbioses. Mitocôndrias e cloroplastos nasceram. A célula eucarionte surgiu - complexa, compartimentalizada, capaz de especialização. A complexidade da vida deu um salto quântico.",12:"542 milhões de anos atrás, em apenas 25 milhões de anos, a vida marinha explodiu em diversidade. Trilobitas, moluscos, artrópodes - os planos corporais básicos de todos os animais modernos apareceram. A Explosão Cambriana foi a maior inovação evolutiva da história.",13:"Plantas pioneiras colonizaram a terra firme, criando solo. Artrópodes as seguiram. Então vieram os anfíbios, saindo das águas primordiais. Florestas de samambaias gigantes cobriram continentes. A vida havia conquistado um novo reino.",14:"Por 165 milhões de anos, dinossauros dominaram todos os ecossistemas terrestres. Do minúsculo Compsognathus ao colossal Argentinosaurus. Predadores ferozes e herbívoros pacíficos. Até que um asteroide de 10km terminou seu reinado há 66 milhões de anos.",15:"Das cinzas da extinção, mamíferos prosperaram. Primatas evoluíram nas árvores. Há 2 milhões de anos, Homo erectus dominou o fogo - luz, calor, proteção, cozimento. O fogo transformou a humanidade, permitindo cérebros maiores e sociedades complexas.",16:"Há 10 mil anos, humanos começaram a plantar sementes. Agricultura nasceu. Cidades surgiram. A escrita preservou conhecimento. Impérios se ergueram. Civilizações florescerem. A humanidade passou de caçadora-coletora a construtora de mundos.",17:"Você está aqui, agora, no presente. Tecnologia digital conecta bilhões. Foguetes exploram o cosmos. A humanidade olha para o universo com telescópios e manda sondas aos confins do sistema solar. Somos o universo consciente de si mesmo."},ce="@firebase/installations",de="0.6.9",ue=1e4,he=`w:${de}`,pe="FIS_v2",me=36e5,ge=new w("installations","Installations",{"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"not-registered":"Firebase Installation is not registered.","installation-not-found":"Firebase Installation not found.","request-failed":'{$requestName} request failed with error "{$serverCode} {$serverStatus}: {$serverMessage}"',"app-offline":"Could not process request. Application offline.","delete-pending-registration":"Can't delete installation while there is a pending registration request."});function fe(e){return e instanceof N&&e.code.includes("request-failed")}
/**
     * @license
     * Copyright 2019 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */function xe({projectId:e}){return`https://firebaseinstallations.googleapis.com/v1/projects/${e}/installations`}function be(e){return{token:e.token,requestStatus:2,expiresIn:(t=e.expiresIn,Number(t.replace("s","000"))),creationTime:Date.now()};var t}function ve(e,t){return p(this,null,function*(){const r=(yield t.json()).error;return ge.create("request-failed",{requestName:e,serverCode:r.code,serverMessage:r.message,serverStatus:r.status})})}function ye({apiKey:e}){return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":e})}function we(e,{refreshToken:t}){const r=ye(e);return r.append("Authorization",function(e){return`${pe} ${e}`}
/**
     * @license
     * Copyright 2019 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */(t)),r}function ke(e){return p(this,null,function*(){const t=yield e();return t.status>=500&&t.status<600?e():t})}
/**
     * @license
     * Copyright 2019 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */
function Ne(e){return new Promise(t=>{setTimeout(t,e)})}
/**
     * @license
     * Copyright 2019 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */
/**
     * @license
     * Copyright 2019 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */
const je=/^[cdef][\w-]{21}$/;function _e(){try{const e=new Uint8Array(17);(self.crypto||self.msCrypto).getRandomValues(e),e[0]=112+e[0]%16;const t=function(e){const t=(r=e,btoa(String.fromCharCode(...r)).replace(/\+/g,"-").replace(/\//g,"_"));var r;return t.substr(0,22)}
/**
     * @license
     * Copyright 2019 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */(e);return je.test(t)?t:""}catch(e){return""}}function Se(e){return`${e.appName}!${e.appId}`}
/**
     * @license
     * Copyright 2019 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */const Ie=new Map;function Ce(e,t){const r=Se(e);Te(r,t),function(e,t){const r=(!Ee&&"BroadcastChannel"in self&&(Ee=new BroadcastChannel("[Firebase] FID Change"),Ee.onmessage=e=>{Te(e.data.key,e.data.fid)}),Ee);r&&r.postMessage({key:e,fid:t}),0===Ie.size&&Ee&&(Ee.close(),Ee=null)}(r,t)}function Te(e,t){const r=Ie.get(e);if(r)for(const s of r)s(t)}let Ee=null;
/**
     * @license
     * Copyright 2019 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */
const Ae="firebase-installations-store";let Oe=null;function Pe(){return Oe||(Oe=k("firebase-installations-database",1,{upgrade:(e,t)=>{0===t&&e.createObjectStore(Ae)}})),Oe}function Re(e,t){return p(this,null,function*(){const r=Se(e),s=(yield Pe()).transaction(Ae,"readwrite"),n=s.objectStore(Ae),o=yield n.get(r);return yield n.put(t,r),yield s.done,o&&o.fid===t.fid||Ce(e,t.fid),t})}function Le(e){return p(this,null,function*(){const t=Se(e),r=(yield Pe()).transaction(Ae,"readwrite");yield r.objectStore(Ae).delete(t),yield r.done})}function Me(e,t){return p(this,null,function*(){const r=Se(e),s=(yield Pe()).transaction(Ae,"readwrite"),n=s.objectStore(Ae),o=yield n.get(r),a=t(o);return void 0===a?yield n.delete(r):yield n.put(a,r),yield s.done,!a||o&&o.fid===a.fid||Ce(e,a.fid),a})}
/**
     * @license
     * Copyright 2019 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */function De(e){return p(this,null,function*(){let t;const r=yield Me(e.appConfig,r=>{const s=function(e){const t=e||{fid:_e(),registrationStatus:0};return ze(t)}(r),n=function(e,t){if(0===t.registrationStatus){if(!navigator.onLine)return{installationEntry:t,registrationPromise:Promise.reject(ge.create("app-offline"))};const r={fid:t.fid,registrationStatus:1,registrationTime:Date.now()},s=function(e,t){return p(this,null,function*(){try{const r=yield function(e,t){return p(this,arguments,function*({appConfig:e,heartbeatServiceProvider:t},{fid:r}){const s=xe(e),n=ye(e),o=t.getImmediate({optional:!0});if(o){const e=yield o.getHeartbeatsHeader();e&&n.append("x-firebase-client",e)}const a={fid:r,authVersion:pe,appId:e.appId,sdkVersion:he},i={method:"POST",headers:n,body:JSON.stringify(a)},l=yield ke(()=>fetch(s,i));if(l.ok){const e=yield l.json();return{fid:e.fid||r,registrationStatus:2,refreshToken:e.refreshToken,authToken:be(e.authToken)}}throw yield ve("Create Installation",l)})}(e,t);return Re(e.appConfig,r)}catch(r){throw fe(r)&&409===r.customData.serverCode?yield Le(e.appConfig):yield Re(e.appConfig,{fid:t.fid,registrationStatus:0}),r}})}(e,r);return{installationEntry:r,registrationPromise:s}}return 1===t.registrationStatus?{installationEntry:t,registrationPromise:$e(e)}:{installationEntry:t}}(e,s);return t=n.registrationPromise,n.installationEntry});return""===r.fid?{installationEntry:yield t}:{installationEntry:r,registrationPromise:t}})}function $e(e){return p(this,null,function*(){let t=yield Ue(e.appConfig);for(;1===t.registrationStatus;)yield Ne(100),t=yield Ue(e.appConfig);if(0===t.registrationStatus){const{installationEntry:t,registrationPromise:r}=yield De(e);return r||t}return t})}function Ue(e){return Me(e,e=>{if(!e)throw ge.create("installation-not-found");return ze(e)})}function ze(e){return 1===(t=e).registrationStatus&&t.registrationTime+ue<Date.now()?{fid:e.fid,registrationStatus:0}:e;var t;
/**
     * @license
     * Copyright 2019 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */}function Fe(e,t){return p(this,arguments,function*({appConfig:e,heartbeatServiceProvider:t},r){const s=function(e,{fid:t}){return`${xe(e)}/${t}/authTokens:generate`}
/**
     * @license
     * Copyright 2019 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */(e,r),n=we(e,r),o=t.getImmediate({optional:!0});if(o){const e=yield o.getHeartbeatsHeader();e&&n.append("x-firebase-client",e)}const a={installation:{sdkVersion:he,appId:e.appId}},i={method:"POST",headers:n,body:JSON.stringify(a)},l=yield ke(()=>fetch(s,i));if(l.ok)return be(yield l.json());throw yield ve("Generate Auth Token",l)})}function qe(e,t=!1){return p(this,null,function*(){let r;const s=yield Me(e.appConfig,s=>{if(!Ve(s))throw ge.create("not-registered");const n=s.authToken;if(!t&&function(e){return 2===e.requestStatus&&!function(e){const t=Date.now();return t<e.creationTime||e.creationTime+e.expiresIn<t+me}(e)}(n))return s;if(1===n.requestStatus)return r=function(e,t){return p(this,null,function*(){let r=yield Be(e.appConfig);for(;1===r.authToken.requestStatus;)yield Ne(100),r=yield Be(e.appConfig);const s=r.authToken;return 0===s.requestStatus?qe(e,t):s})}(e,t),s;{if(!navigator.onLine)throw ge.create("app-offline");const t=function(e){const t={requestStatus:1,requestTime:Date.now()};return Object.assign(Object.assign({},e),{authToken:t})}(s);return r=function(e,t){return p(this,null,function*(){try{const r=yield Fe(e,t),s=Object.assign(Object.assign({},t),{authToken:r});return yield Re(e.appConfig,s),r}catch(r){if(!fe(r)||401!==r.customData.serverCode&&404!==r.customData.serverCode){const r=Object.assign(Object.assign({},t),{authToken:{requestStatus:0}});yield Re(e.appConfig,r)}else yield Le(e.appConfig);throw r}})}(e,t),t}});return r?yield r:s.authToken})}function Be(e){return Me(e,e=>{if(!Ve(e))throw ge.create("not-registered");const t=e.authToken;return 1===(r=t).requestStatus&&r.requestTime+ue<Date.now()?Object.assign(Object.assign({},e),{authToken:{requestStatus:0}}):e;var r;
/**
     * @license
     * Copyright 2019 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */})}function Ve(e){return void 0!==e&&2===e.registrationStatus}
/**
     * @license
     * Copyright 2019 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */
function He(e,t=!1){return p(this,null,function*(){const r=e;return yield function(e){return p(this,null,function*(){const{registrationPromise:t}=yield De(e);t&&(yield t)})}
/**
     * @license
     * Copyright 2019 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */(r),(yield qe(r,t)).token})}function We(e){return ge.create("missing-app-config-values",{valueName:e})}
/**
     * @license
     * Copyright 2020 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */const Ge="installations",Je=e=>{const t=e.getProvider("app").getImmediate(),r=y(t,Ge).getImmediate();return{getId:()=>function(e){return p(this,null,function*(){const t=e,{installationEntry:r,registrationPromise:s}=yield De(t);return s?s.catch(console.error):qe(t).catch(console.error),r.fid})}(r),getToken:e=>He(r,e)}};b(new v(Ge,e=>{const t=e.getProvider("app").getImmediate(),r=function(e){if(!e||!e.options)throw We("App Configuration");if(!e.name)throw We("App Name");const t=["projectId","apiKey","appId"];for(const r of t)if(!e.options[r])throw We(r);return{appName:e.name,projectId:e.options.projectId,apiKey:e.options.apiKey,appId:e.options.appId}}(t);return{app:t,appConfig:r,heartbeatServiceProvider:y(t,"heartbeat"),_delete:()=>Promise.resolve()}},"PUBLIC")),b(new v("installations-internal",Je,"PRIVATE")),x(ce,de),x(ce,de,"esm2017");
/**
     * @license
     * Copyright 2019 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */
const Ke="analytics",Ze="https://www.googletagmanager.com/gtag/js",Xe=new j("@firebase/analytics"),Ye=new w("analytics","Analytics",{"already-exists":"A Firebase Analytics instance with the appId {$id}  already exists. Only one Firebase Analytics instance can be created for each appId.","already-initialized":"initializeAnalytics() cannot be called again with different options than those it was initially called with. It can be called again with the same options to return the existing instance, or getAnalytics() can be used to get a reference to the already-initialized instance.","already-initialized-settings":"Firebase Analytics has already been initialized.settings() must be called before initializing any Analytics instanceor it will have no effect.","interop-component-reg-failed":"Firebase Analytics Interop Component failed to instantiate: {$reason}","invalid-analytics-context":"Firebase Analytics is not supported in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","indexeddb-unavailable":"IndexedDB unavailable or restricted in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","fetch-throttle":"The config fetch request timed out while in an exponential backoff state. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.","config-fetch-failed":"Dynamic config fetch failed: [{$httpStatus}] {$responseMessage}","no-api-key":'The "apiKey" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid API key.',"no-app-id":'The "appId" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid app ID.',"no-client-id":'The "client_id" field is empty.',"invalid-gtag-resource":"Trusted Types detected an invalid gtag resource: {$gtagURL}."});
/**
     * @license
     * Copyright 2019 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */
function Qe(e){if(!e.startsWith(Ze)){const t=Ye.create("invalid-gtag-resource",{gtagURL:e});return Xe.warn(t.message),""}return e}function et(e){return Promise.all(e.map(e=>e.catch(e=>e)))}function tt(e,t){const r=function(e,t){let r;return window.trustedTypes&&(r=window.trustedTypes.createPolicy(e,t)),r}("firebase-js-sdk-policy",{createScriptURL:Qe}),s=document.createElement("script"),n=`${Ze}?l=${e}&id=${t}`;s.src=r?null==r?void 0:r.createScriptURL(n):n,s.async=!0,document.head.appendChild(s)}function rt(e,t,r,s){return function(n,...o){return p(this,null,function*(){try{if("event"===n){const[s,n]=o;yield function(e,t,r,s,n){return p(this,null,function*(){try{let o=[];if(n&&n.send_to){let e=n.send_to;Array.isArray(e)||(e=[e]);const s=yield et(r);for(const r of e){const e=s.find(e=>e.measurementId===r),n=e&&t[e.appId];if(!n){o=[];break}o.push(n)}}0===o.length&&(o=Object.values(t)),yield Promise.all(o),e("event",s,n||{})}catch(o){Xe.error(o)}})}(e,t,r,s,n)}else if("config"===n){const[n,a]=o;yield function(e,t,r,s,n,o){return p(this,null,function*(){const a=s[n];try{if(a)yield t[a];else{const e=(yield et(r)).find(e=>e.measurementId===n);e&&(yield t[e.appId])}}catch(i){Xe.error(i)}e("config",n,o)})}(e,t,r,s,n,a)}else if("consent"===n){const[t,r]=o;e("consent",t,r)}else if("get"===n){const[t,r,s]=o;e("get",t,r,s)}else if("set"===n){const[t]=o;e("set",t)}else e(n,...o)}catch(a){Xe.error(a)}})}}const st=new class{constructor(e={},t=1e3){this.throttleMetadata=e,this.intervalMillis=t}getThrottleMetadata(e){return this.throttleMetadata[e]}setThrottleMetadata(e,t){this.throttleMetadata[e]=t}deleteThrottleMetadata(e){delete this.throttleMetadata[e]}};function nt(e){return new Headers({Accept:"application/json","x-goog-api-key":e})}function ot(e){return p(this,arguments,function*(e,t=st,r){const{appId:s,apiKey:n,measurementId:o}=e.options;if(!s)throw Ye.create("no-app-id");if(!n){if(o)return{measurementId:o,appId:s};throw Ye.create("no-api-key")}const a=t.getThrottleMetadata(s)||{backoffCount:0,throttleEndTimeMillis:Date.now()},i=new it;return setTimeout(()=>p(null,null,function*(){i.abort()}),6e4),at({appId:s,apiKey:n,measurementId:o},a,i,t)})}function at(e,t,r){return p(this,arguments,function*(e,{throttleEndTimeMillis:t,backoffCount:r},s,n=st){var o;const{appId:a,measurementId:i}=e;try{yield function(e,t){return new Promise((r,s)=>{const n=Math.max(t-Date.now(),0),o=setTimeout(r,n);e.addEventListener(()=>{clearTimeout(o),s(Ye.create("fetch-throttle",{throttleEndTimeMillis:t}))})})}(s,t)}catch(l){if(i)return Xe.warn(`Timed out fetching this Firebase app's measurement ID from the server. Falling back to the measurement ID ${i} provided in the "measurementId" field in the local Firebase config. [${null==l?void 0:l.message}]`),{appId:a,measurementId:i};throw l}try{const t=yield function(e){return p(this,null,function*(){var t;const{appId:r,apiKey:s}=e,n={method:"GET",headers:nt(s)},o="https://firebase.googleapis.com/v1alpha/projects/-/apps/{app-id}/webConfig".replace("{app-id}",r),a=yield fetch(o,n);if(200!==a.status&&304!==a.status){let e="";try{const r=yield a.json();(null===(t=r.error)||void 0===t?void 0:t.message)&&(e=r.error.message)}catch(i){}throw Ye.create("config-fetch-failed",{httpStatus:a.status,responseMessage:e})}return a.json()})}(e);return n.deleteThrottleMetadata(a),t}catch(l){const t=l;if(!function(e){if(!(e instanceof N&&e.customData))return!1;const t=Number(e.customData.httpStatus);return 429===t||500===t||503===t||504===t}(t)){if(n.deleteThrottleMetadata(a),i)return Xe.warn(`Failed to fetch this Firebase app's measurement ID from the server. Falling back to the measurement ID ${i} provided in the "measurementId" field in the local Firebase config. [${null==t?void 0:t.message}]`),{appId:a,measurementId:i};throw l}const c=503===Number(null===(o=null==t?void 0:t.customData)||void 0===o?void 0:o.httpStatus)?T(r,n.intervalMillis,30):T(r,n.intervalMillis),d={throttleEndTimeMillis:Date.now()+c,backoffCount:r+1};return n.setThrottleMetadata(a,d),Xe.debug(`Calling attemptFetch again in ${c} millis`),at(e,d,s,n)}})}class it{constructor(){this.listeners=[]}addEventListener(e){this.listeners.push(e)}abort(){this.listeners.forEach(e=>e())}}function lt(e,t,r,s,n,o,a){return p(this,null,function*(){var i;const l=ot(e);l.then(t=>{r[t.measurementId]=t.appId,e.options.measurementId&&t.measurementId!==e.options.measurementId&&Xe.warn(`The measurement ID in the local Firebase config (${e.options.measurementId}) does not match the measurement ID fetched from the server (${t.measurementId}). To ensure analytics events are always sent to the correct Analytics property, update the measurement ID field in the local config or remove it from the local config.`)}).catch(e=>Xe.error(e)),t.push(l);const c=
/**
     * @license
     * Copyright 2020 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */
function(){return p(this,null,function*(){if(!I())return Xe.warn(Ye.create("indexeddb-unavailable",{errorInfo:"IndexedDB is not available in this environment."}).message),!1;try{yield C()}catch(e){return Xe.warn(Ye.create("indexeddb-unavailable",{errorInfo:null==e?void 0:e.toString()}).message),!1}return!0})}().then(e=>e?s.getId():void 0),[d,u]=yield Promise.all([l,c]);(function(e){const t=window.document.getElementsByTagName("script");for(const r of Object.values(t))if(r.src&&r.src.includes(Ze)&&r.src.includes(e))return r;return null}
/**
     * @license
     * Copyright 2020 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */)(o)||tt(o,d.measurementId),n("js",new Date);const h=null!==(i=null==a?void 0:a.config)&&void 0!==i?i:{};return h.origin="firebase",h.update=!0,null!=u&&(h.firebase_id=u),n("config",d.measurementId,h),d.measurementId})}
/**
     * @license
     * Copyright 2019 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */class ct{constructor(e){this.app=e}_delete(){return delete dt[this.app.options.appId],Promise.resolve()}}let dt={},ut=[];const ht={};let pt,mt,gt="dataLayer",ft=!1;function xt(e,t,r){!function(){const e=[];if(S()&&e.push("This is a browser extension environment."),O()||e.push("Cookies are not available."),e.length>0){const t=e.map((e,t)=>`(${t+1}) ${e}`).join(" "),r=Ye.create("invalid-analytics-context",{errorInfo:t});Xe.warn(r.message)}}();const s=e.options.appId;if(!s)throw Ye.create("no-app-id");if(!e.options.apiKey){if(!e.options.measurementId)throw Ye.create("no-api-key");Xe.warn(`The "apiKey" field is empty in the local Firebase config. This is needed to fetch the latest measurement ID for this Firebase app. Falling back to the measurement ID ${e.options.measurementId} provided in the "measurementId" field in the local Firebase config.`)}if(null!=dt[s])throw Ye.create("already-exists",{id:s});if(!ft){!function(e){let t=[];Array.isArray(window[e])?t=window[e]:window[e]=t}(gt);const{wrappedGtag:e,gtagCore:t}=function(e,t,r,s,n){let o=function(...e){window[s].push(arguments)};return window[n]&&"function"==typeof window[n]&&(o=window[n]),window[n]=rt(o,e,t,r),{gtagCore:o,wrappedGtag:window[n]}}(dt,ut,ht,gt,"gtag");mt=e,pt=t,ft=!0}return dt[s]=lt(e,ut,ht,t,pt,gt,r),new ct(e)}function bt(e,t,r,s){e=_(e),function(e,t,r,s,n){return p(this,null,function*(){if(n&&n.global)e("event",r,s);else{const n=yield t,o=Object.assign(Object.assign({},s),{send_to:n});e("event",r,o)}})}(mt,dt[e.app.options.appId],t,r,s).catch(e=>Xe.error(e))}const vt="@firebase/analytics",yt="0.10.8";function wt(e,t){var r={};for(var s in e)Object.prototype.hasOwnProperty.call(e,s)&&t.indexOf(s)<0&&(r[s]=e[s]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var n=0;for(s=Object.getOwnPropertySymbols(e);n<s.length;n++)t.indexOf(s[n])<0&&Object.prototype.propertyIsEnumerable.call(e,s[n])&&(r[s[n]]=e[s[n]])}return r}function kt(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}b(new v(Ke,(e,{options:t})=>xt(e.getProvider("app").getImmediate(),e.getProvider("installations-internal").getImmediate(),t),"PUBLIC")),b(new v("analytics-internal",function(e){try{const t=e.getProvider(Ke).getImmediate();return{logEvent:(e,r,s)=>bt(t,e,r,s)}}catch(t){throw Ye.create("interop-component-reg-failed",{reason:t})}},"PRIVATE")),x(vt,yt),x(vt,yt,"esm2017"),"function"==typeof SuppressedError&&SuppressedError;const Nt=kt,jt=new w("auth","Firebase",{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}),_t=new j("@firebase/auth");function St(e,...t){_t.logLevel<=U.ERROR&&_t.error(`Auth (${M}): ${e}`,...t)}
/**
     * @license
     * Copyright 2020 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */function It(e,...t){throw At(e,...t)}function Ct(e,...t){return At(e,...t)}function Tt(e,t,r){const s=Object.assign(Object.assign({},Nt()),{[t]:r});return new w("auth","Firebase",s).create(t,{appName:e.name})}function Et(e){return Tt(e,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function At(e,...t){if("string"!=typeof e){const r=t[0],s=[...t.slice(1)];return s[0]&&(s[0].appName=e.name),e._errorFactory.create(r,...s)}return jt.create(e,...t)}function Ot(e,t,...r){if(!e)throw At(t,...r)}function Pt(e){const t="INTERNAL ASSERTION FAILED: "+e;throw St(t),new Error(t)}function Rt(e,t){e||Pt(t)}
/**
     * @license
     * Copyright 2020 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */function Lt(){var e;return"undefined"!=typeof self&&(null===(e=self.location)||void 0===e?void 0:e.href)||""}function Mt(){var e;return"undefined"!=typeof self&&(null===(e=self.location)||void 0===e?void 0:e.protocol)||null}
/**
     * @license
     * Copyright 2020 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */function Dt(){return"undefined"==typeof navigator||!navigator||!("onLine"in navigator)||"boolean"!=typeof navigator.onLine||"http:"!==Mt()&&"https:"!==Mt()&&!S()&&!("connection"in navigator)||navigator.onLine}
/**
     * @license
     * Copyright 2020 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */
class $t{constructor(e,t){this.shortDelay=e,this.longDelay=t,Rt(t>e,"Short delay should be less than long delay!"),this.isMobile=R()||L()}get(){return Dt()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}
/**
     * @license
     * Copyright 2020 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */function Ut(e,t){Rt(e.emulator,"Emulator should always be set here");const{url:r}=e.emulator;return t?`${r}${t.startsWith("/")?t.slice(1):t}`:r}
/**
     * @license
     * Copyright 2020 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */class zt{static initialize(e,t,r){this.fetchImpl=e,t&&(this.headersImpl=t),r&&(this.responseImpl=r)}static fetch(){return this.fetchImpl?this.fetchImpl:"undefined"!=typeof self&&"fetch"in self?self.fetch:"undefined"!=typeof globalThis&&globalThis.fetch?globalThis.fetch:"undefined"!=typeof fetch?fetch:void Pt("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){return this.headersImpl?this.headersImpl:"undefined"!=typeof self&&"Headers"in self?self.Headers:"undefined"!=typeof globalThis&&globalThis.Headers?globalThis.Headers:"undefined"!=typeof Headers?Headers:void Pt("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){return this.responseImpl?this.responseImpl:"undefined"!=typeof self&&"Response"in self?self.Response:"undefined"!=typeof globalThis&&globalThis.Response?globalThis.Response:"undefined"!=typeof Response?Response:void Pt("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}
/**
     * @license
     * Copyright 2020 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */const Ft={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"},qt=new $t(3e4,6e4);
/**
     * @license
     * Copyright 2020 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */function Bt(e,t){return e.tenantId&&!t.tenantId?Object.assign(Object.assign({},t),{tenantId:e.tenantId}):t}function Vt(e,t,r,s){return p(this,arguments,function*(e,t,r,s,n={}){return Ht(e,n,()=>p(null,null,function*(){let n={},o={};s&&("GET"===t?o=s:n={body:JSON.stringify(s)});const a=q(Object.assign({key:e.config.apiKey},o)).slice(1),i=yield e._getAdditionalHeaders();i["Content-Type"]="application/json",e.languageCode&&(i["X-Firebase-Locale"]=e.languageCode);const l=Object.assign({method:t,headers:i},n);return W()||(l.referrerPolicy="no-referrer"),zt.fetch()(Wt(e,e.config.apiHost,r,a),l)}))})}function Ht(e,t,r){return p(this,null,function*(){e._canInitEmulator=!1;const s=Object.assign(Object.assign({},Ft),t);try{const t=new Gt(e),n=yield Promise.race([r(),t.promise]);t.clearNetworkTimeout();const o=yield n.json();if("needConfirmation"in o)throw Jt(e,"account-exists-with-different-credential",o);if(n.ok&&!("errorMessage"in o))return o;{const t=n.ok?o.errorMessage:o.error.message,[r,a]=t.split(" : ");if("FEDERATED_USER_ID_ALREADY_LINKED"===r)throw Jt(e,"credential-already-in-use",o);if("EMAIL_EXISTS"===r)throw Jt(e,"email-already-in-use",o);if("USER_DISABLED"===r)throw Jt(e,"user-disabled",o);const i=s[r]||r.toLowerCase().replace(/[_\s]+/g,"-");if(a)throw Tt(e,i,a);It(e,i)}}catch(n){if(n instanceof N)throw n;It(e,"network-request-failed",{message:String(n)})}})}function Wt(e,t,r,s){const n=`${t}${r}?${s}`;return e.config.emulator?Ut(e.config,n):`${e.config.apiScheme}://${n}`}class Gt{constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((e,t)=>{this.timer=setTimeout(()=>t(Ct(this.auth,"network-request-failed")),qt.get())})}clearNetworkTimeout(){clearTimeout(this.timer)}}function Jt(e,t,r){const s={appName:e.name};r.email&&(s.email=r.email),r.phoneNumber&&(s.phoneNumber=r.phoneNumber);const n=Ct(e,t,s);return n.customData._tokenResponse=r,n}
/**
     * @license
     * Copyright 2020 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */function Kt(e,t){return p(this,null,function*(){return Vt(e,"POST","/v1/accounts:lookup",t)})}
/**
     * @license
     * Copyright 2020 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */function Zt(e){if(e)try{const t=new Date(Number(e));if(!isNaN(t.getTime()))return t.toUTCString()}catch(t){}}function Xt(e){return 1e3*Number(e)}function Yt(e){const[t,r,s]=e.split(".");if(void 0===t||void 0===r||void 0===s)return St("JWT malformed, contained fewer than 3 sections"),null;try{const e=F(r);return e?JSON.parse(e):(St("Failed to decode base64 JWT payload"),null)}catch(n){return St("Caught error parsing JWT payload as JSON",null==n?void 0:n.toString()),null}}function Qt(e){const t=Yt(e);return Ot(t,"internal-error"),Ot(void 0!==t.exp,"internal-error"),Ot(void 0!==t.iat,"internal-error"),Number(t.exp)-Number(t.iat)}
/**
     * @license
     * Copyright 2020 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */function er(e,t,r=!1){return p(this,null,function*(){if(r)return t;try{return yield t}catch(s){throw s instanceof N&&function({code:e}){return"auth/user-disabled"===e||"auth/user-token-expired"===e}
/**
     * @license
     * Copyright 2020 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */(s)&&e.auth.currentUser===e&&(yield e.auth.signOut()),s}})}class tr{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,null!==this.timerId&&clearTimeout(this.timerId))}getInterval(e){var t;if(e){const e=this.errorBackoff;return this.errorBackoff=Math.min(2*this.errorBackoff,96e4),e}{this.errorBackoff=3e4;const e=(null!==(t=this.user.stsTokenManager.expirationTime)&&void 0!==t?t:0)-Date.now()-3e5;return Math.max(0,e)}}schedule(e=!1){if(!this.isRunning)return;const t=this.getInterval(e);this.timerId=setTimeout(()=>p(this,null,function*(){yield this.iteration()}),t)}iteration(){return p(this,null,function*(){try{yield this.user.getIdToken(!0)}catch(e){return void("auth/network-request-failed"===(null==e?void 0:e.code)&&this.schedule(!0))}this.schedule()})}}
/**
     * @license
     * Copyright 2020 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */class rr{constructor(e,t){this.createdAt=e,this.lastLoginAt=t,this._initializeTime()}_initializeTime(){this.lastSignInTime=Zt(this.lastLoginAt),this.creationTime=Zt(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}
/**
     * @license
     * Copyright 2019 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */function sr(e){return p(this,null,function*(){var t;const r=e.auth,s=yield e.getIdToken(),n=yield er(e,Kt(r,{idToken:s}));Ot(null==n?void 0:n.users.length,r,"internal-error");const o=n.users[0];e._notifyReloadListener(o);const a=(null===(t=o.providerUserInfo)||void 0===t?void 0:t.length)?nr(o.providerUserInfo):[],i=(l=e.providerData,c=a,[...l.filter(e=>!c.some(t=>t.providerId===e.providerId)),...c]);var l,c;const d=e.isAnonymous,u=!(e.email&&o.passwordHash||(null==i?void 0:i.length)),h=!!d&&u,p={uid:o.localId,displayName:o.displayName||null,photoURL:o.photoUrl||null,email:o.email||null,emailVerified:o.emailVerified||!1,phoneNumber:o.phoneNumber||null,tenantId:o.tenantId||null,providerData:i,metadata:new rr(o.createdAt,o.lastLoginAt),isAnonymous:h};Object.assign(e,p)})}function nr(e){return e.map(e=>{var{providerId:t}=e,r=wt(e,["providerId"]);return{providerId:t,uid:r.rawId||"",displayName:r.displayName||null,email:r.email||null,phoneNumber:r.phoneNumber||null,photoURL:r.photoUrl||null}})}
/**
     * @license
     * Copyright 2020 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */
/**
     * @license
     * Copyright 2020 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */
class or{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){Ot(e.idToken,"internal-error"),Ot(void 0!==e.idToken,"internal-error"),Ot(void 0!==e.refreshToken,"internal-error");const t="expiresIn"in e&&void 0!==e.expiresIn?Number(e.expiresIn):Qt(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,t)}updateFromIdToken(e){Ot(0!==e.length,"internal-error");const t=Qt(e);this.updateTokensAndExpiration(e,null,t)}getToken(e,t=!1){return p(this,null,function*(){return t||!this.accessToken||this.isExpired?(Ot(this.refreshToken,e,"user-token-expired"),this.refreshToken?(yield this.refresh(e,this.refreshToken),this.accessToken):null):this.accessToken})}clearRefreshToken(){this.refreshToken=null}refresh(e,t){return p(this,null,function*(){const{accessToken:r,refreshToken:s,expiresIn:n}=yield function(e,t){return p(this,null,function*(){const r=yield Ht(e,{},()=>p(null,null,function*(){const r=q({grant_type:"refresh_token",refresh_token:t}).slice(1),{tokenApiHost:s,apiKey:n}=e.config,o=Wt(e,s,"/v1/token",`key=${n}`),a=yield e._getAdditionalHeaders();return a["Content-Type"]="application/x-www-form-urlencoded",zt.fetch()(o,{method:"POST",headers:a,body:r})}));return{accessToken:r.access_token,expiresIn:r.expires_in,refreshToken:r.refresh_token}})}(e,t);this.updateTokensAndExpiration(r,s,Number(n))})}updateTokensAndExpiration(e,t,r){this.refreshToken=t||null,this.accessToken=e||null,this.expirationTime=Date.now()+1e3*r}static fromJSON(e,t){const{refreshToken:r,accessToken:s,expirationTime:n}=t,o=new or;return r&&(Ot("string"==typeof r,"internal-error",{appName:e}),o.refreshToken=r),s&&(Ot("string"==typeof s,"internal-error",{appName:e}),o.accessToken=s),n&&(Ot("number"==typeof n,"internal-error",{appName:e}),o.expirationTime=n),o}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new or,this.toJSON())}_performRefresh(){return Pt("not implemented")}}
/**
     * @license
     * Copyright 2020 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */function ar(e,t){Ot("string"==typeof e||void 0===e,"internal-error",{appName:t})}class ir{constructor(e){var{uid:t,auth:r,stsTokenManager:s}=e,n=wt(e,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new tr(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=t,this.auth=r,this.stsTokenManager=s,this.accessToken=s.accessToken,this.displayName=n.displayName||null,this.email=n.email||null,this.emailVerified=n.emailVerified||!1,this.phoneNumber=n.phoneNumber||null,this.photoURL=n.photoURL||null,this.isAnonymous=n.isAnonymous||!1,this.tenantId=n.tenantId||null,this.providerData=n.providerData?[...n.providerData]:[],this.metadata=new rr(n.createdAt||void 0,n.lastLoginAt||void 0)}getIdToken(e){return p(this,null,function*(){const t=yield er(this,this.stsTokenManager.getToken(this.auth,e));return Ot(t,this.auth,"internal-error"),this.accessToken!==t&&(this.accessToken=t,yield this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),t})}getIdTokenResult(e){return function(e,t=!1){return p(this,null,function*(){const r=_(e),s=yield r.getIdToken(t),n=Yt(s);Ot(n&&n.exp&&n.auth_time&&n.iat,r.auth,"internal-error");const o="object"==typeof n.firebase?n.firebase:void 0,a=null==o?void 0:o.sign_in_provider;return{claims:n,token:s,authTime:Zt(Xt(n.auth_time)),issuedAtTime:Zt(Xt(n.iat)),expirationTime:Zt(Xt(n.exp)),signInProvider:a||null,signInSecondFactor:(null==o?void 0:o.sign_in_second_factor)||null}})}(this,e)}reload(){return function(e){return p(this,null,function*(){const t=_(e);yield sr(t),yield t.auth._persistUserIfCurrent(t),t.auth._notifyListenersIfCurrent(t)})}(this)}_assign(e){this!==e&&(Ot(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(e=>Object.assign({},e)),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const t=new ir(Object.assign(Object.assign({},this),{auth:e,stsTokenManager:this.stsTokenManager._clone()}));return t.metadata._copy(this.metadata),t}_onReload(e){Ot(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}_updateTokensIfNecessary(e,t=!1){return p(this,null,function*(){let r=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),r=!0),t&&(yield sr(this)),yield this.auth._persistUserIfCurrent(this),r&&this.auth._notifyListenersIfCurrent(this)})}delete(){return p(this,null,function*(){if(D(this.auth.app))return Promise.reject(Et(this.auth));const e=yield this.getIdToken();return yield er(this,function(e,t){return p(this,null,function*(){return Vt(e,"POST","/v1/accounts:delete",t)})}(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()})}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>Object.assign({},e)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,t){var r,s,n,o,a,i,l,c;const d=null!==(r=t.displayName)&&void 0!==r?r:void 0,u=null!==(s=t.email)&&void 0!==s?s:void 0,h=null!==(n=t.phoneNumber)&&void 0!==n?n:void 0,p=null!==(o=t.photoURL)&&void 0!==o?o:void 0,m=null!==(a=t.tenantId)&&void 0!==a?a:void 0,g=null!==(i=t._redirectEventId)&&void 0!==i?i:void 0,f=null!==(l=t.createdAt)&&void 0!==l?l:void 0,x=null!==(c=t.lastLoginAt)&&void 0!==c?c:void 0,{uid:b,emailVerified:v,isAnonymous:y,providerData:w,stsTokenManager:k}=t;Ot(b&&k,e,"internal-error");const N=or.fromJSON(this.name,k);Ot("string"==typeof b,e,"internal-error"),ar(d,e.name),ar(u,e.name),Ot("boolean"==typeof v,e,"internal-error"),Ot("boolean"==typeof y,e,"internal-error"),ar(h,e.name),ar(p,e.name),ar(m,e.name),ar(g,e.name),ar(f,e.name),ar(x,e.name);const j=new ir({uid:b,auth:e,email:u,emailVerified:v,displayName:d,isAnonymous:y,photoURL:p,phoneNumber:h,tenantId:m,stsTokenManager:N,createdAt:f,lastLoginAt:x});return w&&Array.isArray(w)&&(j.providerData=w.map(e=>Object.assign({},e))),g&&(j._redirectEventId=g),j}static _fromIdTokenResponse(e,t,r=!1){return p(this,null,function*(){const s=new or;s.updateFromServerResponse(t);const n=new ir({uid:t.localId,auth:e,stsTokenManager:s,isAnonymous:r});return yield sr(n),n})}static _fromGetAccountInfoResponse(e,t,r){return p(this,null,function*(){const s=t.users[0];Ot(void 0!==s.localId,"internal-error");const n=void 0!==s.providerUserInfo?nr(s.providerUserInfo):[],o=!(s.email&&s.passwordHash||(null==n?void 0:n.length)),a=new or;a.updateFromIdToken(r);const i=new ir({uid:s.localId,auth:e,stsTokenManager:a,isAnonymous:o}),l={uid:s.localId,displayName:s.displayName||null,photoURL:s.photoUrl||null,email:s.email||null,emailVerified:s.emailVerified||!1,phoneNumber:s.phoneNumber||null,tenantId:s.tenantId||null,providerData:n,metadata:new rr(s.createdAt,s.lastLoginAt),isAnonymous:!(s.email&&s.passwordHash||(null==n?void 0:n.length))};return Object.assign(i,l),i})}}
/**
     * @license
     * Copyright 2020 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */const lr=new Map;function cr(e){Rt(e instanceof Function,"Expected a class definition");let t=lr.get(e);return t?(Rt(t instanceof e,"Instance stored in cache mismatched with class"),t):(t=new e,lr.set(e,t),t)}
/**
     * @license
     * Copyright 2019 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */class dr{constructor(){this.type="NONE",this.storage={}}_isAvailable(){return p(this,null,function*(){return!0})}_set(e,t){return p(this,null,function*(){this.storage[e]=t})}_get(e){return p(this,null,function*(){const t=this.storage[e];return void 0===t?null:t})}_remove(e){return p(this,null,function*(){delete this.storage[e]})}_addListener(e,t){}_removeListener(e,t){}}dr.type="NONE";const ur=dr;
/**
     * @license
     * Copyright 2019 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */function hr(e,t,r){return`firebase:${e}:${t}:${r}`}class pr{constructor(e,t,r){this.persistence=e,this.auth=t,this.userKey=r;const{config:s,name:n}=this.auth;this.fullUserKey=hr(this.userKey,s.apiKey,n),this.fullPersistenceKey=hr("persistence",s.apiKey,n),this.boundEventHandler=t._onStorageEvent.bind(t),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}getCurrentUser(){return p(this,null,function*(){const e=yield this.persistence._get(this.fullUserKey);return e?ir._fromJSON(this.auth,e):null})}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}setPersistence(e){return p(this,null,function*(){if(this.persistence===e)return;const t=yield this.getCurrentUser();return yield this.removeCurrentUser(),this.persistence=e,t?this.setCurrentUser(t):void 0})}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static create(e,t,r="authUser"){return p(this,null,function*(){if(!t.length)return new pr(cr(ur),e,r);const s=(yield Promise.all(t.map(e=>p(null,null,function*(){if(yield e._isAvailable())return e})))).filter(e=>e);let n=s[0]||cr(ur);const o=hr(r,e.config.apiKey,e.name);let a=null;for(const r of t)try{const t=yield r._get(o);if(t){const s=ir._fromJSON(e,t);r!==n&&(a=s),n=r;break}}catch(l){}const i=s.filter(e=>e._shouldAllowMigration);return n._shouldAllowMigration&&i.length?(n=i[0],a&&(yield n._set(o,a.toJSON())),yield Promise.all(t.map(e=>p(null,null,function*(){if(e!==n)try{yield e._remove(o)}catch(l){}}))),new pr(n,e,r)):new pr(n,e,r)})}}
/**
     * @license
     * Copyright 2020 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */function mr(e){const t=e.toLowerCase();if(t.includes("opera/")||t.includes("opr/")||t.includes("opios/"))return"Opera";if(br(t))return"IEMobile";if(t.includes("msie")||t.includes("trident/"))return"IE";if(t.includes("edge/"))return"Edge";if(gr(t))return"Firefox";if(t.includes("silk/"))return"Silk";if(yr(t))return"Blackberry";if(wr(t))return"Webos";if(fr(t))return"Safari";if((t.includes("chrome/")||xr(t))&&!t.includes("edge/"))return"Chrome";if(vr(t))return"Android";{const t=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,r=e.match(t);if(2===(null==r?void 0:r.length))return r[1]}return"Other"}function gr(e=z()){return/firefox\//i.test(e)}function fr(e=z()){const t=e.toLowerCase();return t.includes("safari/")&&!t.includes("chrome/")&&!t.includes("crios/")&&!t.includes("android")}function xr(e=z()){return/crios\//i.test(e)}function br(e=z()){return/iemobile/i.test(e)}function vr(e=z()){return/android/i.test(e)}function yr(e=z()){return/blackberry/i.test(e)}function wr(e=z()){return/webos/i.test(e)}function kr(e=z()){return/iphone|ipad|ipod/i.test(e)||/macintosh/i.test(e)&&/mobile/i.test(e)}function Nr(e=z()){return kr(e)||vr(e)||wr(e)||yr(e)||/windows phone/i.test(e)||br(e)}
/**
     * @license
     * Copyright 2020 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */function jr(e,t=[]){let r;switch(e){case"Browser":r=mr(z());break;case"Worker":r=`${mr(z())}-${e}`;break;default:r=e}const s=t.length?t.join(","):"FirebaseCore-web";return`${r}/JsCore/${M}/${s}`}
/**
     * @license
     * Copyright 2022 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */class _r{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,t){const r=t=>new Promise((r,s)=>{try{r(e(t))}catch(n){s(n)}});r.onAbort=t,this.queue.push(r);const s=this.queue.length-1;return()=>{this.queue[s]=()=>Promise.resolve()}}runMiddleware(e){return p(this,null,function*(){if(this.auth.currentUser===e)return;const t=[];try{for(const r of this.queue)yield r(e),r.onAbort&&t.push(r.onAbort)}catch(r){t.reverse();for(const e of t)try{e()}catch(s){}throw this.auth._errorFactory.create("login-blocked",{originalMessage:null==r?void 0:r.message})}})}}
/**
     * @license
     * Copyright 2023 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */class Sr{constructor(e){var t,r,s,n;const o=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=null!==(t=o.minPasswordLength)&&void 0!==t?t:6,o.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=o.maxPasswordLength),void 0!==o.containsLowercaseCharacter&&(this.customStrengthOptions.containsLowercaseLetter=o.containsLowercaseCharacter),void 0!==o.containsUppercaseCharacter&&(this.customStrengthOptions.containsUppercaseLetter=o.containsUppercaseCharacter),void 0!==o.containsNumericCharacter&&(this.customStrengthOptions.containsNumericCharacter=o.containsNumericCharacter),void 0!==o.containsNonAlphanumericCharacter&&(this.customStrengthOptions.containsNonAlphanumericCharacter=o.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,"ENFORCEMENT_STATE_UNSPECIFIED"===this.enforcementState&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=null!==(s=null===(r=e.allowedNonAlphanumericCharacters)||void 0===r?void 0:r.join(""))&&void 0!==s?s:"",this.forceUpgradeOnSignin=null!==(n=e.forceUpgradeOnSignin)&&void 0!==n&&n,this.schemaVersion=e.schemaVersion}validatePassword(e){var t,r,s,n,o,a;const i={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,i),this.validatePasswordCharacterOptions(e,i),i.isValid&&(i.isValid=null===(t=i.meetsMinPasswordLength)||void 0===t||t),i.isValid&&(i.isValid=null===(r=i.meetsMaxPasswordLength)||void 0===r||r),i.isValid&&(i.isValid=null===(s=i.containsLowercaseLetter)||void 0===s||s),i.isValid&&(i.isValid=null===(n=i.containsUppercaseLetter)||void 0===n||n),i.isValid&&(i.isValid=null===(o=i.containsNumericCharacter)||void 0===o||o),i.isValid&&(i.isValid=null===(a=i.containsNonAlphanumericCharacter)||void 0===a||a),i}validatePasswordLengthOptions(e,t){const r=this.customStrengthOptions.minPasswordLength,s=this.customStrengthOptions.maxPasswordLength;r&&(t.meetsMinPasswordLength=e.length>=r),s&&(t.meetsMaxPasswordLength=e.length<=s)}validatePasswordCharacterOptions(e,t){let r;this.updatePasswordCharacterOptionsStatuses(t,!1,!1,!1,!1);for(let s=0;s<e.length;s++)r=e.charAt(s),this.updatePasswordCharacterOptionsStatuses(t,r>="a"&&r<="z",r>="A"&&r<="Z",r>="0"&&r<="9",this.allowedNonAlphanumericCharacters.includes(r))}updatePasswordCharacterOptionsStatuses(e,t,r,s,n){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=t)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=r)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=s)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=n))}}
/**
     * @license
     * Copyright 2020 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */class Ir{constructor(e,t,r,s){this.app=e,this.heartbeatServiceProvider=t,this.appCheckServiceProvider=r,this.config=s,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new Tr(this),this.idTokenSubscription=new Tr(this),this.beforeStateQueue=new _r(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=jt,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=s.sdkClientVersion}_initializeWithPersistence(e,t){return t&&(this._popupRedirectResolver=cr(t)),this._initializationPromise=this.queue(()=>p(this,null,function*(){var r,s;if(!this._deleted&&(this.persistenceManager=yield pr.create(this,e),!this._deleted)){if(null===(r=this._popupRedirectResolver)||void 0===r?void 0:r._shouldInitProactively)try{yield this._popupRedirectResolver._initialize(this)}catch(n){}yield this.initializeCurrentUser(t),this.lastNotifiedUid=(null===(s=this.currentUser)||void 0===s?void 0:s.uid)||null,this._deleted||(this._isInitialized=!0)}})),this._initializationPromise}_onStorageEvent(){return p(this,null,function*(){if(this._deleted)return;const e=yield this.assertedPersistence.getCurrentUser();return this.currentUser||e?this.currentUser&&e&&this.currentUser.uid===e.uid?(this._currentUser._assign(e),void(yield this.currentUser.getIdToken())):void(yield this._updateCurrentUser(e,!0)):void 0})}initializeCurrentUserFromIdToken(e){return p(this,null,function*(){try{const t=yield Kt(this,{idToken:e}),r=yield ir._fromGetAccountInfoResponse(this,t,e);yield this.directlySetCurrentUser(r)}catch(t){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",t),yield this.directlySetCurrentUser(null)}})}initializeCurrentUser(e){return p(this,null,function*(){var t;if(D(this.app)){const e=this.app.settings.authIdToken;return e?new Promise(t=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(e).then(t,t))}):this.directlySetCurrentUser(null)}const r=yield this.assertedPersistence.getCurrentUser();let s=r,n=!1;if(e&&this.config.authDomain){yield this.getOrInitRedirectPersistenceManager();const r=null===(t=this.redirectUser)||void 0===t?void 0:t._redirectEventId,o=null==s?void 0:s._redirectEventId,a=yield this.tryRedirectSignIn(e);r&&r!==o||!(null==a?void 0:a.user)||(s=a.user,n=!0)}if(!s)return this.directlySetCurrentUser(null);if(!s._redirectEventId){if(n)try{yield this.beforeStateQueue.runMiddleware(s)}catch(o){s=r,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(o))}return s?this.reloadAndSetCurrentUserOrClear(s):this.directlySetCurrentUser(null)}return Ot(this._popupRedirectResolver,this,"argument-error"),yield this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===s._redirectEventId?this.directlySetCurrentUser(s):this.reloadAndSetCurrentUserOrClear(s)})}tryRedirectSignIn(e){return p(this,null,function*(){let t=null;try{t=yield this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch(r){yield this._setRedirectUser(null)}return t})}reloadAndSetCurrentUserOrClear(e){return p(this,null,function*(){try{yield sr(e)}catch(t){if("auth/network-request-failed"!==(null==t?void 0:t.code))return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)})}useDeviceLanguage(){this.languageCode=function(){if("undefined"==typeof navigator)return null;const e=navigator;return e.languages&&e.languages[0]||e.language||null}()}_delete(){return p(this,null,function*(){this._deleted=!0})}updateCurrentUser(e){return p(this,null,function*(){if(D(this.app))return Promise.reject(Et(this));const t=e?_(e):null;return t&&Ot(t.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(t&&t._clone(this))})}_updateCurrentUser(e,t=!1){return p(this,null,function*(){if(!this._deleted)return e&&Ot(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),t||(yield this.beforeStateQueue.runMiddleware(e)),this.queue(()=>p(this,null,function*(){yield this.directlySetCurrentUser(e),this.notifyAuthListeners()}))})}signOut(){return p(this,null,function*(){return D(this.app)?Promise.reject(Et(this)):(yield this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&(yield this._setRedirectUser(null)),this._updateCurrentUser(null,!0))})}setPersistence(e){return D(this.app)?Promise.reject(Et(this)):this.queue(()=>p(this,null,function*(){yield this.assertedPersistence.setPersistence(cr(e))}))}_getRecaptchaConfig(){return null==this.tenantId?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}validatePassword(e){return p(this,null,function*(){this._getPasswordPolicyInternal()||(yield this._updatePasswordPolicy());const t=this._getPasswordPolicyInternal();return t.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):t.validatePassword(e)})}_getPasswordPolicyInternal(){return null===this.tenantId?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}_updatePasswordPolicy(){return p(this,null,function*(){const e=yield function(e){return p(this,arguments,function*(e,t={}){return Vt(e,"GET","/v2/passwordPolicy",Bt(e,t))})}
/**
     * @license
     * Copyright 2023 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */(this),t=new Sr(e);null===this.tenantId?this._projectPasswordPolicy=t:this._tenantPasswordPolicies[this.tenantId]=t})}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(e){this._errorFactory=new w("auth","Firebase",e())}onAuthStateChanged(e,t,r){return this.registerStateListener(this.authStateSubscription,e,t,r)}beforeAuthStateChanged(e,t){return this.beforeStateQueue.pushCallback(e,t)}onIdTokenChanged(e,t,r){return this.registerStateListener(this.idTokenSubscription,e,t,r)}authStateReady(){return new Promise((e,t)=>{if(this.currentUser)e();else{const r=this.onAuthStateChanged(()=>{r(),e()},t)}})}revokeAccessToken(e){return p(this,null,function*(){if(this.currentUser){const t=yield this.currentUser.getIdToken(),r={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:t};null!=this.tenantId&&(r.tenantId=this.tenantId),yield function(e,t){return p(this,null,function*(){return Vt(e,"POST","/v2/accounts:revokeToken",Bt(e,t))})}(this,r)}})}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:null===(e=this._currentUser)||void 0===e?void 0:e.toJSON()}}_setRedirectUser(e,t){return p(this,null,function*(){const r=yield this.getOrInitRedirectPersistenceManager(t);return null===e?r.removeCurrentUser():r.setCurrentUser(e)})}getOrInitRedirectPersistenceManager(e){return p(this,null,function*(){if(!this.redirectPersistenceManager){const t=e&&cr(e)||this._popupRedirectResolver;Ot(t,this,"argument-error"),this.redirectPersistenceManager=yield pr.create(this,[cr(t._redirectPersistence)],"redirectUser"),this.redirectUser=yield this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager})}_redirectUserForId(e){return p(this,null,function*(){var t,r;return this._isInitialized&&(yield this.queue(()=>p(this,null,function*(){}))),(null===(t=this._currentUser)||void 0===t?void 0:t._redirectEventId)===e?this._currentUser:(null===(r=this.redirectUser)||void 0===r?void 0:r._redirectEventId)===e?this.redirectUser:null})}_persistUserIfCurrent(e){return p(this,null,function*(){if(e===this.currentUser)return this.queue(()=>p(this,null,function*(){return this.directlySetCurrentUser(e)}))})}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var e,t;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const r=null!==(t=null===(e=this.currentUser)||void 0===e?void 0:e.uid)&&void 0!==t?t:null;this.lastNotifiedUid!==r&&(this.lastNotifiedUid=r,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,t,r,s){if(this._deleted)return()=>{};const n="function"==typeof t?t:t.next.bind(t);let o=!1;const a=this._isInitialized?Promise.resolve():this._initializationPromise;if(Ot(a,this,"internal-error"),a.then(()=>{o||n(this.currentUser)}),"function"==typeof t){const n=e.addObserver(t,r,s);return()=>{o=!0,n()}}{const r=e.addObserver(t);return()=>{o=!0,r()}}}directlySetCurrentUser(e){return p(this,null,function*(){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?yield this.assertedPersistence.setCurrentUser(e):yield this.assertedPersistence.removeCurrentUser()})}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return Ot(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){e&&!this.frameworks.includes(e)&&(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=jr(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}_getAdditionalHeaders(){return p(this,null,function*(){var e;const t={"X-Client-Version":this.clientVersion};this.app.options.appId&&(t["X-Firebase-gmpid"]=this.app.options.appId);const r=yield null===(e=this.heartbeatServiceProvider.getImmediate({optional:!0}))||void 0===e?void 0:e.getHeartbeatsHeader();r&&(t["X-Firebase-Client"]=r);const s=yield this._getAppCheckToken();return s&&(t["X-Firebase-AppCheck"]=s),t})}_getAppCheckToken(){return p(this,null,function*(){var e;const t=yield null===(e=this.appCheckServiceProvider.getImmediate({optional:!0}))||void 0===e?void 0:e.getToken();return(null==t?void 0:t.error)&&function(e,...t){_t.logLevel<=U.WARN&&_t.warn(`Auth (${M}): ${e}`,...t)}(`Error while retrieving App Check token: ${t.error}`),null==t?void 0:t.token})}}function Cr(e){return _(e)}class Tr{constructor(e){this.auth=e,this.observer=null,this.addObserver=$(e=>this.observer=e)}get next(){return Ot(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}
/**
     * @license
     * Copyright 2020 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */let Er={loadJS(){return p(this,null,function*(){throw new Error("Unable to load external scripts")})},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function Ar(e,t,r){const s=Cr(e);Ot(s._canInitEmulator,s,"emulator-config-failed"),Ot(/^https?:\/\//.test(t),s,"invalid-emulator-scheme");const n=Or(t),{host:o,port:a}=function(e){const t=Or(e),r=/(\/\/)?([^?#/]+)/.exec(e.substr(t.length));if(!r)return{host:"",port:null};const s=r[2].split("@").pop()||"",n=/^(\[[^\]]+\])(:|$)/.exec(s);if(n){const e=n[1];return{host:e,port:Pr(s.substr(e.length+1))}}{const[e,t]=s.split(":");return{host:e,port:Pr(t)}}}(t),i=null===a?"":`:${a}`;s.config.emulator={url:`${n}//${o}${i}/`},s.settings.appVerificationDisabledForTesting=!0,s.emulatorConfig=Object.freeze({host:o,port:a,protocol:n.replace(":",""),options:Object.freeze({disableWarnings:!1})}),function(){function e(){const e=document.createElement("p"),t=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",t.position="fixed",t.width="100%",t.backgroundColor="#ffffff",t.border=".1em solid #000000",t.color="#b50000",t.bottom="0px",t.left="0px",t.margin="0px",t.zIndex="10000",t.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}"undefined"!=typeof console&&"function"==typeof console.info&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),"undefined"!=typeof window&&"undefined"!=typeof document&&("loading"===document.readyState?window.addEventListener("DOMContentLoaded",e):e())}
/**
     * @license
     * Copyright 2020 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */()}function Or(e){const t=e.indexOf(":");return t<0?"":e.substr(0,t+1)}function Pr(e){if(!e)return null;const t=Number(e);return isNaN(t)?null:t}class Rr{constructor(e,t){this.providerId=e,this.signInMethod=t}toJSON(){return Pt("not implemented")}_getIdTokenResponse(e){return Pt("not implemented")}_linkToIdToken(e,t){return Pt("not implemented")}_getReauthenticationResolver(e){return Pt("not implemented")}}
/**
     * @license
     * Copyright 2020 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */function Lr(e,t){return p(this,null,function*(){return function(e,t,r,s){return p(this,arguments,function*(e,t,r,s,n={}){const o=yield Vt(e,t,r,s,n);return"mfaPendingCredential"in o&&It(e,"multi-factor-auth-required",{_serverResponse:o}),o})}(e,"POST","/v1/accounts:signInWithIdp",Bt(e,t))})}
/**
     * @license
     * Copyright 2020 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */class Mr extends Rr{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const t=new Mr(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(t.idToken=e.idToken),e.accessToken&&(t.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(t.nonce=e.nonce),e.pendingToken&&(t.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(t.accessToken=e.oauthToken,t.secret=e.oauthTokenSecret):It("argument-error"),t}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const t="string"==typeof e?JSON.parse(e):e,{providerId:r,signInMethod:s}=t,n=wt(t,["providerId","signInMethod"]);if(!r||!s)return null;const o=new Mr(r,s);return o.idToken=n.idToken||void 0,o.accessToken=n.accessToken||void 0,o.secret=n.secret,o.nonce=n.nonce,o.pendingToken=n.pendingToken||null,o}_getIdTokenResponse(e){return Lr(e,this.buildRequest())}_linkToIdToken(e,t){const r=this.buildRequest();return r.idToken=t,Lr(e,r)}_getReauthenticationResolver(e){const t=this.buildRequest();return t.autoCreate=!1,Lr(e,t)}buildRequest(){const e={requestUri:"http://localhost",returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const t={};this.idToken&&(t.id_token=this.idToken),this.accessToken&&(t.access_token=this.accessToken),this.secret&&(t.oauth_token_secret=this.secret),t.providerId=this.providerId,this.nonce&&!this.pendingToken&&(t.nonce=this.nonce),e.postBody=q(t)}return e}}
/**
     * @license
     * Copyright 2020 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */class Dr{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}
/**
     * @license
     * Copyright 2019 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */class $r extends Dr{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}
/**
     * @license
     * Copyright 2020 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */class Ur extends $r{constructor(){super("facebook.com")}static credential(e){return Mr._fromParams({providerId:Ur.PROVIDER_ID,signInMethod:Ur.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return Ur.credentialFromTaggedObject(e)}static credentialFromError(e){return Ur.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e))return null;if(!e.oauthAccessToken)return null;try{return Ur.credential(e.oauthAccessToken)}catch(t){return null}}}Ur.FACEBOOK_SIGN_IN_METHOD="facebook.com",Ur.PROVIDER_ID="facebook.com";
/**
     * @license
     * Copyright 2020 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */
class zr extends $r{constructor(){super("google.com"),this.addScope("profile")}static credential(e,t){return Mr._fromParams({providerId:zr.PROVIDER_ID,signInMethod:zr.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:t})}static credentialFromResult(e){return zr.credentialFromTaggedObject(e)}static credentialFromError(e){return zr.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:t,oauthAccessToken:r}=e;if(!t&&!r)return null;try{return zr.credential(t,r)}catch(s){return null}}}zr.GOOGLE_SIGN_IN_METHOD="google.com",zr.PROVIDER_ID="google.com";
/**
     * @license
     * Copyright 2020 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */
class Fr extends $r{constructor(){super("github.com")}static credential(e){return Mr._fromParams({providerId:Fr.PROVIDER_ID,signInMethod:Fr.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return Fr.credentialFromTaggedObject(e)}static credentialFromError(e){return Fr.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e))return null;if(!e.oauthAccessToken)return null;try{return Fr.credential(e.oauthAccessToken)}catch(t){return null}}}Fr.GITHUB_SIGN_IN_METHOD="github.com",Fr.PROVIDER_ID="github.com";
/**
     * @license
     * Copyright 2020 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */
class qr extends $r{constructor(){super("twitter.com")}static credential(e,t){return Mr._fromParams({providerId:qr.PROVIDER_ID,signInMethod:qr.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:t})}static credentialFromResult(e){return qr.credentialFromTaggedObject(e)}static credentialFromError(e){return qr.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:t,oauthTokenSecret:r}=e;if(!t||!r)return null;try{return qr.credential(t,r)}catch(s){return null}}}qr.TWITTER_SIGN_IN_METHOD="twitter.com",qr.PROVIDER_ID="twitter.com";
/**
     * @license
     * Copyright 2020 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */
class Br{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static _fromIdTokenResponse(e,t,r,s=!1){return p(this,null,function*(){const n=yield ir._fromIdTokenResponse(e,r,s),o=Vr(r);return new Br({user:n,providerId:o,_tokenResponse:r,operationType:t})})}static _forOperation(e,t,r){return p(this,null,function*(){yield e._updateTokensIfNecessary(r,!0);const s=Vr(r);return new Br({user:e,providerId:s,_tokenResponse:r,operationType:t})})}}function Vr(e){return e.providerId?e.providerId:"phoneNumber"in e?"phone":null}
/**
     * @license
     * Copyright 2020 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */class Hr extends N{constructor(e,t,r,s){var n;super(t.code,t.message),this.operationType=r,this.user=s,Object.setPrototypeOf(this,Hr.prototype),this.customData={appName:e.name,tenantId:null!==(n=e.tenantId)&&void 0!==n?n:void 0,_serverResponse:t.customData._serverResponse,operationType:r}}static _fromErrorAndOperation(e,t,r,s){return new Hr(e,t,r,s)}}function Wr(e,t,r,s){return("reauthenticate"===t?r._getReauthenticationResolver(e):r._getIdTokenResponse(e)).catch(r=>{if("auth/multi-factor-auth-required"===r.code)throw Hr._fromErrorAndOperation(e,r,t,s);throw r})}const Gr="__sak";
/**
     * @license
     * Copyright 2019 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */class Jr{constructor(e,t){this.storageRetriever=e,this.type=t}_isAvailable(){try{return this.storage?(this.storage.setItem(Gr,"1"),this.storage.removeItem(Gr),Promise.resolve(!0)):Promise.resolve(!1)}catch(e){return Promise.resolve(!1)}}_set(e,t){return this.storage.setItem(e,JSON.stringify(t)),Promise.resolve()}_get(e){const t=this.storage.getItem(e);return Promise.resolve(t?JSON.parse(t):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}
/**
     * @license
     * Copyright 2020 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */class Kr extends Jr{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,t)=>this.onStorageEvent(e,t),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=Nr(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const t of Object.keys(this.listeners)){const r=this.storage.getItem(t),s=this.localCache[t];r!==s&&e(t,s,r)}}onStorageEvent(e,t=!1){if(!e.key)return void this.forAllChangedKeys((e,t,r)=>{this.notifyListeners(e,r)});const r=e.key;t?this.detachListener():this.stopPolling();const s=()=>{const e=this.storage.getItem(r);(t||this.localCache[r]!==e)&&this.notifyListeners(r,e)},n=this.storage.getItem(r);V()&&10===document.documentMode&&n!==e.newValue&&e.newValue!==e.oldValue?setTimeout(s,10):s()}notifyListeners(e,t){this.localCache[e]=t;const r=this.listeners[e];if(r)for(const s of Array.from(r))s(t?JSON.parse(t):t)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,t,r)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:t,newValue:r}),!0)})},1e3)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,t){0===Object.keys(this.listeners).length&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),0===this.listeners[e].size&&delete this.listeners[e]),0===Object.keys(this.listeners).length&&(this.detachListener(),this.stopPolling())}_set(e,t){return p(this,null,function*(){yield h(Kr.prototype,this,"_set").call(this,e,t),this.localCache[e]=JSON.stringify(t)})}_get(e){return p(this,null,function*(){const t=yield h(Kr.prototype,this,"_get").call(this,e);return this.localCache[e]=JSON.stringify(t),t})}_remove(e){return p(this,null,function*(){yield h(Kr.prototype,this,"_remove").call(this,e),delete this.localCache[e]})}}Kr.type="LOCAL";const Zr=Kr;
/**
     * @license
     * Copyright 2020 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */class Xr extends Jr{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,t){}_removeListener(e,t){}}Xr.type="SESSION";const Yr=Xr;
/**
     * @license
     * Copyright 2019 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */
/**
     * @license
     * Copyright 2019 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */
class Qr{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const t=this.receivers.find(t=>t.isListeningto(e));if(t)return t;const r=new Qr(e);return this.receivers.push(r),r}isListeningto(e){return this.eventTarget===e}handleEvent(e){return p(this,null,function*(){const t=e,{eventId:r,eventType:s,data:n}=t.data,o=this.handlersMap[s];if(!(null==o?void 0:o.size))return;t.ports[0].postMessage({status:"ack",eventId:r,eventType:s});const a=Array.from(o).map(e=>p(this,null,function*(){return e(t.origin,n)})),i=yield function(e){return Promise.all(e.map(e=>p(null,null,function*(){try{return{fulfilled:!0,value:yield e}}catch(t){return{fulfilled:!1,reason:t}}})))}(a);t.ports[0].postMessage({status:"done",eventId:r,eventType:s,response:i})})}_subscribe(e,t){0===Object.keys(this.handlersMap).length&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(t)}_unsubscribe(e,t){this.handlersMap[e]&&t&&this.handlersMap[e].delete(t),t&&0!==this.handlersMap[e].size||delete this.handlersMap[e],0===Object.keys(this.handlersMap).length&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}
/**
     * @license
     * Copyright 2020 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */
function es(e="",t=10){let r="";for(let s=0;s<t;s++)r+=Math.floor(10*Math.random());return e+r}
/**
     * @license
     * Copyright 2019 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */Qr.receivers=[];class ts{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}_send(e,t,r=50){return p(this,null,function*(){const s="undefined"!=typeof MessageChannel?new MessageChannel:null;if(!s)throw new Error("connection_unavailable");let n,o;return new Promise((a,i)=>{const l=es("",20);s.port1.start();const c=setTimeout(()=>{i(new Error("unsupported_event"))},r);o={messageChannel:s,onMessage(e){const t=e;if(t.data.eventId===l)switch(t.data.status){case"ack":clearTimeout(c),n=setTimeout(()=>{i(new Error("timeout"))},3e3);break;case"done":clearTimeout(n),a(t.data.response);break;default:clearTimeout(c),clearTimeout(n),i(new Error("invalid_response"))}}},this.handlers.add(o),s.port1.addEventListener("message",o.onMessage),this.target.postMessage({eventType:e,eventId:l,data:t},[s.port2])}).finally(()=>{o&&this.removeMessageHandler(o)})})}}
/**
     * @license
     * Copyright 2020 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */function rs(){return window}
/**
     * @license
     * Copyright 2020 Google LLC.
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */
function ss(){return void 0!==rs().WorkerGlobalScope&&"function"==typeof rs().importScripts}
/**
     * @license
     * Copyright 2019 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */
const ns="firebaseLocalStorageDb",os="firebaseLocalStorage",as="fbase_key";class is{constructor(e){this.request=e}toPromise(){return new Promise((e,t)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{t(this.request.error)})})}}function ls(e,t){return e.transaction([os],t?"readwrite":"readonly").objectStore(os)}function cs(){const e=indexedDB.open(ns,1);return new Promise((t,r)=>{e.addEventListener("error",()=>{r(e.error)}),e.addEventListener("upgradeneeded",()=>{const t=e.result;try{t.createObjectStore(os,{keyPath:as})}catch(s){r(s)}}),e.addEventListener("success",()=>p(null,null,function*(){const r=e.result;r.objectStoreNames.contains(os)?t(r):(r.close(),yield function(){const e=indexedDB.deleteDatabase(ns);return new is(e).toPromise()}(),t(yield cs()))}))})}function ds(e,t,r){return p(this,null,function*(){const s=ls(e,!0).put({[as]:t,value:r});return new is(s).toPromise()})}function us(e,t){const r=ls(e,!0).delete(t);return new is(r).toPromise()}class hs{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}_openDb(){return p(this,null,function*(){return this.db||(this.db=yield cs()),this.db})}_withRetries(e){return p(this,null,function*(){let t=0;for(;;)try{const t=yield this._openDb();return yield e(t)}catch(r){if(t++>3)throw r;this.db&&(this.db.close(),this.db=void 0)}})}initializeServiceWorkerMessaging(){return p(this,null,function*(){return ss()?this.initializeReceiver():this.initializeSender()})}initializeReceiver(){return p(this,null,function*(){this.receiver=Qr._getInstance(ss()?self:null),this.receiver._subscribe("keyChanged",(e,t)=>p(this,null,function*(){return{keyProcessed:(yield this._poll()).includes(t.key)}})),this.receiver._subscribe("ping",(e,t)=>p(this,null,function*(){return["keyChanged"]}))})}initializeSender(){return p(this,null,function*(){var e,t;if(this.activeServiceWorker=yield function(){return p(this,null,function*(){if(!(null===navigator||void 0===navigator?void 0:navigator.serviceWorker))return null;try{return(yield navigator.serviceWorker.ready).active}catch(e){return null}})}(),!this.activeServiceWorker)return;this.sender=new ts(this.activeServiceWorker);const r=yield this.sender._send("ping",{},800);r&&(null===(e=r[0])||void 0===e?void 0:e.fulfilled)&&(null===(t=r[0])||void 0===t?void 0:t.value.includes("keyChanged"))&&(this.serviceWorkerReceiverAvailable=!0)})}notifyServiceWorker(e){return p(this,null,function*(){var t;if(this.sender&&this.activeServiceWorker&&((null===(t=null===navigator||void 0===navigator?void 0:navigator.serviceWorker)||void 0===t?void 0:t.controller)||null)===this.activeServiceWorker)try{yield this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch(t){}})}_isAvailable(){return p(this,null,function*(){try{if(!indexedDB)return!1;const e=yield cs();return yield ds(e,Gr,"1"),yield us(e,Gr),!0}catch(e){}return!1})}_withPendingWrite(e){return p(this,null,function*(){this.pendingWrites++;try{yield e()}finally{this.pendingWrites--}})}_set(e,t){return p(this,null,function*(){return this._withPendingWrite(()=>p(this,null,function*(){return yield this._withRetries(r=>ds(r,e,t)),this.localCache[e]=t,this.notifyServiceWorker(e)}))})}_get(e){return p(this,null,function*(){const t=yield this._withRetries(t=>function(e,t){return p(this,null,function*(){const r=ls(e,!1).get(t),s=yield new is(r).toPromise();return void 0===s?null:s.value})}(t,e));return this.localCache[e]=t,t})}_remove(e){return p(this,null,function*(){return this._withPendingWrite(()=>p(this,null,function*(){return yield this._withRetries(t=>us(t,e)),delete this.localCache[e],this.notifyServiceWorker(e)}))})}_poll(){return p(this,null,function*(){const e=yield this._withRetries(e=>{const t=ls(e,!1).getAll();return new is(t).toPromise()});if(!e)return[];if(0!==this.pendingWrites)return[];const t=[],r=new Set;if(0!==e.length)for(const{fbase_key:s,value:n}of e)r.add(s),JSON.stringify(this.localCache[s])!==JSON.stringify(n)&&(this.notifyListeners(s,n),t.push(s));for(const s of Object.keys(this.localCache))this.localCache[s]&&!r.has(s)&&(this.notifyListeners(s,null),t.push(s));return t})}notifyListeners(e,t){this.localCache[e]=t;const r=this.listeners[e];if(r)for(const s of Array.from(r))s(t)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>p(this,null,function*(){return this._poll()}),800)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,t){0===Object.keys(this.listeners).length&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),0===this.listeners[e].size&&delete this.listeners[e]),0===Object.keys(this.listeners).length&&this.stopPolling()}}hs.type="LOCAL";const ps=hs;new $t(3e4,6e4);
/**
     * @license
     * Copyright 2019 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */
class ms extends Rr{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return Lr(e,this._buildIdpRequest())}_linkToIdToken(e,t){return Lr(e,this._buildIdpRequest(t))}_getReauthenticationResolver(e){return Lr(e,this._buildIdpRequest())}_buildIdpRequest(e){const t={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(t.idToken=e),t}}function gs(e){
/**
     * @license
     * Copyright 2020 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */
return function(e,t,r=!1){return p(this,null,function*(){if(D(e.app))return Promise.reject(Et(e));const s="signIn",n=yield Wr(e,s,t),o=yield Br._fromIdTokenResponse(e,s,n);return r||(yield e._updateCurrentUser(o.user)),o})}(e.auth,new ms(e),e.bypassAuthState)}function fs(e){const{auth:t,user:r}=e;return Ot(r,t,"internal-error"),
/**
     * @license
     * Copyright 2019 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */
function(e,t,r=!1){return p(this,null,function*(){const{auth:s}=e;if(D(s.app))return Promise.reject(Et(s));const n="reauthenticate";try{const o=yield er(e,Wr(s,n,t,e),r);Ot(o.idToken,s,"internal-error");const a=Yt(o.idToken);Ot(a,s,"internal-error");const{sub:i}=a;return Ot(e.uid===i,s,"user-mismatch"),Br._forOperation(e,n,o)}catch(o){throw"auth/user-not-found"===(null==o?void 0:o.code)&&It(s,"user-mismatch"),o}})}(r,new ms(e),e.bypassAuthState)}function xs(e){return p(this,null,function*(){const{auth:t,user:r}=e;return Ot(r,t,"internal-error"),function(e,t,r=!1){return p(this,null,function*(){const s=yield er(e,t._linkToIdToken(e.auth,yield e.getIdToken()),r);return Br._forOperation(e,"link",s)})}(r,new ms(e),e.bypassAuthState)})}
/**
     * @license
     * Copyright 2020 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */class bs{constructor(e,t,r,s,n=!1){this.auth=e,this.resolver=r,this.user=s,this.bypassAuthState=n,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(t)?t:[t]}execute(){return new Promise((e,t)=>p(this,null,function*(){this.pendingPromise={resolve:e,reject:t};try{this.eventManager=yield this.resolver._initialize(this.auth),yield this.onExecution(),this.eventManager.registerConsumer(this)}catch(r){this.reject(r)}}))}onAuthEvent(e){return p(this,null,function*(){const{urlResponse:t,sessionId:r,postBody:s,tenantId:n,error:o,type:a}=e;if(o)return void this.reject(o);const i={auth:this.auth,requestUri:t,sessionId:r,tenantId:n||void 0,postBody:s||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(yield this.getIdpTask(a)(i))}catch(l){this.reject(l)}})}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return gs;case"linkViaPopup":case"linkViaRedirect":return xs;case"reauthViaPopup":case"reauthViaRedirect":return fs;default:It(this.auth,"internal-error")}}resolve(e){Rt(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){Rt(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}
/**
     * @license
     * Copyright 2020 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */const vs=new $t(2e3,1e4);class ys extends bs{constructor(e,t,r,s,n){super(e,t,s,n),this.provider=r,this.authWindow=null,this.pollId=null,ys.currentPopupAction&&ys.currentPopupAction.cancel(),ys.currentPopupAction=this}executeNotNull(){return p(this,null,function*(){const e=yield this.execute();return Ot(e,this.auth,"internal-error"),e})}onExecution(){return p(this,null,function*(){Rt(1===this.filter.length,"Popup operations only handle one event");const e=es();this.authWindow=yield this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(e=>{this.reject(e)}),this.resolver._isIframeWebStorageSupported(this.auth,e=>{e||this.reject(Ct(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()})}get eventId(){var e;return(null===(e=this.authWindow)||void 0===e?void 0:e.associatedEvent)||null}cancel(){this.reject(Ct(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,ys.currentPopupAction=null}pollUserCancellation(){const e=()=>{var t,r;(null===(r=null===(t=this.authWindow)||void 0===t?void 0:t.window)||void 0===r?void 0:r.closed)?this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(Ct(this.auth,"popup-closed-by-user"))},8e3):this.pollId=window.setTimeout(e,vs.get())};e()}}ys.currentPopupAction=null;
/**
     * @license
     * Copyright 2020 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */
const ws="pendingRedirect",ks=new Map;class Ns extends bs{constructor(e,t,r=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],t,void 0,r),this.eventId=null}execute(){return p(this,null,function*(){let e=ks.get(this.auth._key());if(!e){try{const t=(yield function(e,t){return p(this,null,function*(){const r=function(e){return hr(ws,e.config.apiKey,e.name)}(t),s=function(e){return cr(e._redirectPersistence)}(e);if(!(yield s._isAvailable()))return!1;const n="true"===(yield s._get(r));return yield s._remove(r),n})}(this.resolver,this.auth))?yield h(Ns.prototype,this,"execute").call(this):null;e=()=>Promise.resolve(t)}catch(t){e=()=>Promise.reject(t)}ks.set(this.auth._key(),e)}return this.bypassAuthState||ks.set(this.auth._key(),()=>Promise.resolve(null)),e()})}onAuthEvent(e){return p(this,null,function*(){if("signInViaRedirect"===e.type)return h(Ns.prototype,this,"onAuthEvent").call(this,e);if("unknown"!==e.type){if(e.eventId){const t=yield this.auth._redirectUserForId(e.eventId);if(t)return this.user=t,h(Ns.prototype,this,"onAuthEvent").call(this,e);this.resolve(null)}}else this.resolve(null)})}onExecution(){return p(this,null,function*(){})}cleanUp(){}}function js(e,t){ks.set(e._key(),t)}function _s(e,t,r=!1){return p(this,null,function*(){if(D(e.app))return Promise.reject(Et(e));const s=Cr(e),n=
/**
     * @license
     * Copyright 2021 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */
function(e,t){return t?cr(t):(Ot(e._popupRedirectResolver,e,"argument-error"),e._popupRedirectResolver)}(s,t),o=new Ns(s,n,r),a=yield o.execute();return a&&!r&&(delete a.user._redirectEventId,yield s._persistUserIfCurrent(a.user),yield s._setRedirectUser(null,t)),a})}
/**
     * @license
     * Copyright 2020 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */class Ss{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let t=!1;return this.consumers.forEach(r=>{this.isEventForConsumer(e,r)&&(t=!0,this.sendToConsumer(e,r),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!function(e){switch(e.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return Cs(e);default:return!1}}
/**
     * @license
     * Copyright 2020 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */(e)||(this.hasHandledPotentialRedirect=!0,t||(this.queuedRedirectEvent=e,t=!0)),t}sendToConsumer(e,t){var r;if(e.error&&!Cs(e)){const s=(null===(r=e.error.code)||void 0===r?void 0:r.split("auth/")[1])||"internal-error";t.onError(Ct(this.auth,s))}else t.onAuthEvent(e)}isEventForConsumer(e,t){const r=null===t.eventId||!!e.eventId&&e.eventId===t.eventId;return t.filter.includes(e.type)&&r}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=6e5&&this.cachedEventUids.clear(),this.cachedEventUids.has(Is(e))}saveEventToCache(e){this.cachedEventUids.add(Is(e)),this.lastProcessedEventTime=Date.now()}}function Is(e){return[e.type,e.eventId,e.sessionId,e.tenantId].filter(e=>e).join("-")}function Cs({type:e,error:t}){return"unknown"===e&&"auth/no-auth-event"===(null==t?void 0:t.code)}
/**
     * @license
     * Copyright 2020 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */
const Ts=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,Es=/^https?/;function As(e){return p(this,null,function*(){if(e.config.emulator)return;const{authorizedDomains:t}=yield function(e){return p(this,arguments,function*(e,t={}){return Vt(e,"GET","/v1/projects",t)})}(e);for(const e of t)try{if(Os(e))return}catch(r){}It(e,"unauthorized-domain")})}function Os(e){const t=Lt(),{protocol:r,hostname:s}=new URL(t);if(e.startsWith("chrome-extension://")){const n=new URL(e);return""===n.hostname&&""===s?"chrome-extension:"===r&&e.replace("chrome-extension://","")===t.replace("chrome-extension://",""):"chrome-extension:"===r&&n.hostname===s}if(!Es.test(r))return!1;if(Ts.test(e))return s===e;const n=e.replace(/\./g,"\\.");return new RegExp("^(.+\\."+n+"|"+n+")$","i").test(s)}
/**
     * @license
     * Copyright 2020 Google LLC.
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */const Ps=new $t(3e4,6e4);function Rs(){const e=rs().___jsl;if(null==e?void 0:e.H)for(const t of Object.keys(e.H))if(e.H[t].r=e.H[t].r||[],e.H[t].L=e.H[t].L||[],e.H[t].r=[...e.H[t].L],e.CP)for(let r=0;r<e.CP.length;r++)e.CP[r]=null}function Ls(e){return new Promise((t,r)=>{var s,n,o,a;function i(){Rs(),gapi.load("gapi.iframes",{callback:()=>{t(gapi.iframes.getContext())},ontimeout:()=>{Rs(),r(Ct(e,"network-request-failed"))},timeout:Ps.get()})}if(null===(n=null===(s=rs().gapi)||void 0===s?void 0:s.iframes)||void 0===n?void 0:n.Iframe)t(gapi.iframes.getContext());else{if(!(null===(o=rs().gapi)||void 0===o?void 0:o.load)){const t=`__iframefcb${Math.floor(1e6*Math.random())}`;return rs()[t]=()=>{gapi.load?i():r(Ct(e,"network-request-failed"))},(a=`${Er.gapiScript}?onload=${t}`,Er.loadJS(a)).catch(e=>r(e))}i()}}).catch(e=>{throw Ms=null,e})}let Ms=null;
/**
     * @license
     * Copyright 2020 Google LLC.
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */
const Ds=new $t(5e3,15e3),$s={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},Us=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function zs(e){const t=e.config;Ot(t.authDomain,e,"auth-domain-config-required");const r=t.emulator?Ut(t,"emulator/auth/iframe"):`https://${e.config.authDomain}/__/auth/iframe`,s={apiKey:t.apiKey,appName:e.name,v:M},n=Us.get(e.config.apiHost);n&&(s.eid=n);const o=e._getFrameworks();return o.length&&(s.fw=o.join(",")),`${r}?${q(s).slice(1)}`}function Fs(e){return p(this,null,function*(){const t=yield function(e){return Ms=Ms||Ls(e),Ms}(e),r=rs().gapi;return Ot(r,e,"internal-error"),t.open({where:document.body,url:zs(e),messageHandlersFilter:r.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:$s,dontclear:!0},t=>new Promise((r,s)=>p(null,null,function*(){yield t.restyle({setHideOnLeave:!1});const n=Ct(e,"network-request-failed"),o=rs().setTimeout(()=>{s(n)},Ds.get());function a(){rs().clearTimeout(o),r(t)}t.ping(a).then(a,()=>{s(n)})})))})}
/**
     * @license
     * Copyright 2020 Google LLC.
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */const qs={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"};class Bs{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch(e){}}}function Vs(e,t,r,s=500,n=600){const o=Math.max((window.screen.availHeight-n)/2,0).toString(),a=Math.max((window.screen.availWidth-s)/2,0).toString();let i="";const l=Object.assign(Object.assign({},qs),{width:s.toString(),height:n.toString(),top:o,left:a}),c=z().toLowerCase();r&&(i=xr(c)?"_blank":r),gr(c)&&(t=t||"http://localhost",l.scrollbars="yes");const d=Object.entries(l).reduce((e,[t,r])=>`${e}${t}=${r},`,"");if(function(e=z()){var t;return kr(e)&&!!(null===(t=window.navigator)||void 0===t?void 0:t.standalone)}(c)&&"_self"!==i)return function(e,t){const r=document.createElement("a");r.href=e,r.target=t;const s=document.createEvent("MouseEvent");s.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),r.dispatchEvent(s)}
/**
     * @license
     * Copyright 2021 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */(t||"",i),new Bs(null);const u=window.open(t||"",i,d);Ot(u,e,"popup-blocked");try{u.focus()}catch(h){}return new Bs(u)}const Hs="__/auth/handler",Ws="emulator/auth/handler",Gs=encodeURIComponent("fac");function Js(e,t,r,s,n,o){return p(this,null,function*(){Ot(e.config.authDomain,e,"auth-domain-config-required"),Ot(e.config.apiKey,e,"invalid-api-key");const o={apiKey:e.config.apiKey,appName:e.name,authType:r,redirectUrl:s,v:M,eventId:n};if(t instanceof Dr){t.setDefaultLanguage(e.languageCode),o.providerId=t.providerId||"",H(t.getCustomParameters())||(o.customParameters=JSON.stringify(t.getCustomParameters()));for(const[e,t]of Object.entries({}))o[e]=t}if(t instanceof $r){const e=t.getScopes().filter(e=>""!==e);e.length>0&&(o.scopes=e.join(","))}e.tenantId&&(o.tid=e.tenantId);const a=o;for(const e of Object.keys(a))void 0===a[e]&&delete a[e];const i=yield e._getAppCheckToken(),l=i?`#${Gs}=${encodeURIComponent(i)}`:"";return`${function({config:e}){return e.emulator?Ut(e,Ws):`https://${e.authDomain}/${Hs}`}
/**
     * @license
     * Copyright 2020 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */(e)}?${q(a).slice(1)}${l}`})}const Ks="webStorageSupport",Zs=class{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=Yr,this._completeRedirectFn=_s,this._overrideRedirectResult=js}_openPopup(e,t,r,s){return p(this,null,function*(){var n;Rt(null===(n=this.eventManagers[e._key()])||void 0===n?void 0:n.manager,"_initialize() not called before _openPopup()");const o=yield Js(e,t,r,Lt(),s);return Vs(e,o,es())})}_openRedirect(e,t,r,s){return p(this,null,function*(){return yield this._originValidation(e),function(e){rs().location.href=e}(yield Js(e,t,r,Lt(),s)),new Promise(()=>{})})}_initialize(e){const t=e._key();if(this.eventManagers[t]){const{manager:e,promise:r}=this.eventManagers[t];return e?Promise.resolve(e):(Rt(r,"If manager is not set, promise should be"),r)}const r=this.initAndGetManager(e);return this.eventManagers[t]={promise:r},r.catch(()=>{delete this.eventManagers[t]}),r}initAndGetManager(e){return p(this,null,function*(){const t=yield Fs(e),r=new Ss(e);return t.register("authEvent",t=>(Ot(null==t?void 0:t.authEvent,e,"invalid-auth-event"),{status:r.onEvent(t.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:r},this.iframes[e._key()]=t,r})}_isIframeWebStorageSupported(e,t){this.iframes[e._key()].send(Ks,{type:Ks},r=>{var s;const n=null===(s=null==r?void 0:r[0])||void 0===s?void 0:s[Ks];void 0!==n&&t(!!n),It(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const t=e._key();return this.originValidationPromises[t]||(this.originValidationPromises[t]=As(e)),this.originValidationPromises[t]}get _shouldInitProactively(){return Nr()||fr()||kr()}};var Xs="@firebase/auth",Ys="1.7.9";
/**
     * @license
     * Copyright 2020 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */
class Qs{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),(null===(e=this.auth.currentUser)||void 0===e?void 0:e.uid)||null}getToken(e){return p(this,null,function*(){return this.assertAuthConfigured(),yield this.auth._initializationPromise,this.auth.currentUser?{accessToken:yield this.auth.currentUser.getIdToken(e)}:null})}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const t=this.auth.onIdTokenChanged(t=>{e((null==t?void 0:t.stsTokenManager.accessToken)||null)});this.internalListeners.set(e,t),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const t=this.internalListeners.get(e);t&&(this.internalListeners.delete(e),t(),this.updateProactiveRefresh())}assertAuthConfigured(){Ot(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}
/**
     * @license
     * Copyright 2020 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */
/**
     * @license
     * Copyright 2021 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */
const en=P("authIdTokenMaxAge")||300;let tn=null;var rn;Er={loadJS:e=>new Promise((t,r)=>{const s=document.createElement("script");var n,o;s.setAttribute("src",e),s.onload=t,s.onerror=e=>{const t=Ct("internal-error");t.customData=e,r(t)},s.type="text/javascript",s.charset="UTF-8",(null!==(o=null===(n=document.getElementsByTagName("head"))||void 0===n?void 0:n[0])&&void 0!==o?o:document).appendChild(s)}),gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="},rn="Browser",b(new v("auth",(e,{options:t})=>{const r=e.getProvider("app").getImmediate(),s=e.getProvider("heartbeat"),n=e.getProvider("app-check-internal"),{apiKey:o,authDomain:a}=r.options;Ot(o&&!o.includes(":"),"invalid-api-key",{appName:r.name});const i={apiKey:o,authDomain:a,clientPlatform:rn,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:jr(rn)},l=new Ir(r,s,n,i);return function(e,t){const r=(null==t?void 0:t.persistence)||[],s=(Array.isArray(r)?r:[r]).map(cr);(null==t?void 0:t.errorMap)&&e._updateErrorMap(t.errorMap),e._initializeWithPersistence(s,null==t?void 0:t.popupRedirectResolver)}(l,t),l},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,t,r)=>{e.getProvider("auth-internal").initialize()})),b(new v("auth-internal",e=>{const t=Cr(e.getProvider("auth").getImmediate());return new Qs(t)},"PRIVATE").setInstantiationMode("EXPLICIT")),x(Xs,Ys,function(e){switch(e){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}(rn)),x(Xs,Ys,"esm2017");
/**
     * @license
     * Copyright 2017 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */
const sn="firebasestorage.googleapis.com",nn="storageBucket";
/**
     * @license
     * Copyright 2017 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */
class on extends N{constructor(e,t,r=0){super(un(e),`Firebase Storage: ${t} (${un(e)})`),this.status_=r,this.customData={serverResponse:null},this._baseMessage=this.message,Object.setPrototypeOf(this,on.prototype)}get status(){return this.status_}set status(e){this.status_=e}_codeEquals(e){return un(e)===this.code}get serverResponse(){return this.customData.serverResponse}set serverResponse(e){this.customData.serverResponse=e,this.customData.serverResponse?this.message=`${this._baseMessage}\n${this.customData.serverResponse}`:this.message=this._baseMessage}}var an,ln,cn,dn;function un(e){return"storage/"+e}function hn(){return new on(an.UNKNOWN,"An unknown error occurred, please check the error payload for server response.")}function pn(e){return new on(an.INVALID_ARGUMENT,e)}function mn(){return new on(an.APP_DELETED,"The Firebase app was deleted.")}function gn(e,t){return new on(an.INVALID_FORMAT,"String does not match format '"+e+"': "+t)}function fn(e){throw new on(an.INTERNAL_ERROR,"Internal error: "+e)}
/**
     * @license
     * Copyright 2017 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */(ln=an||(an={})).UNKNOWN="unknown",ln.OBJECT_NOT_FOUND="object-not-found",ln.BUCKET_NOT_FOUND="bucket-not-found",ln.PROJECT_NOT_FOUND="project-not-found",ln.QUOTA_EXCEEDED="quota-exceeded",ln.UNAUTHENTICATED="unauthenticated",ln.UNAUTHORIZED="unauthorized",ln.UNAUTHORIZED_APP="unauthorized-app",ln.RETRY_LIMIT_EXCEEDED="retry-limit-exceeded",ln.INVALID_CHECKSUM="invalid-checksum",ln.CANCELED="canceled",ln.INVALID_EVENT_NAME="invalid-event-name",ln.INVALID_URL="invalid-url",ln.INVALID_DEFAULT_BUCKET="invalid-default-bucket",ln.NO_DEFAULT_BUCKET="no-default-bucket",ln.CANNOT_SLICE_BLOB="cannot-slice-blob",ln.SERVER_FILE_WRONG_SIZE="server-file-wrong-size",ln.NO_DOWNLOAD_URL="no-download-url",ln.INVALID_ARGUMENT="invalid-argument",ln.INVALID_ARGUMENT_COUNT="invalid-argument-count",ln.APP_DELETED="app-deleted",ln.INVALID_ROOT_OPERATION="invalid-root-operation",ln.INVALID_FORMAT="invalid-format",ln.INTERNAL_ERROR="internal-error",ln.UNSUPPORTED_ENVIRONMENT="unsupported-environment";class xn{constructor(e,t){this.bucket=e,this.path_=t}get path(){return this.path_}get isRoot(){return 0===this.path.length}fullServerUrl(){const e=encodeURIComponent;return"/b/"+e(this.bucket)+"/o/"+e(this.path)}bucketOnlyServerUrl(){return"/b/"+encodeURIComponent(this.bucket)+"/o"}static makeFromBucketSpec(e,t){let r;try{r=xn.makeFromUrl(e,t)}catch(n){return new xn(e,"")}if(""===r.path)return r;throw s=e,new on(an.INVALID_DEFAULT_BUCKET,"Invalid default bucket '"+s+"'.");var s}static makeFromUrl(e,t){let r=null;const s="([A-Za-z0-9.\\-_]+)",n=new RegExp("^gs://"+s+"(/(.*))?$","i");function o(e){e.path_=decodeURIComponent(e.path)}const a=t.replace(/[.]/g,"\\."),i=[{regex:n,indices:{bucket:1,path:3},postModify:function(e){"/"===e.path.charAt(e.path.length-1)&&(e.path_=e.path_.slice(0,-1))}},{regex:new RegExp(`^https?://${a}/v[A-Za-z0-9_]+/b/${s}/o(/([^?#]*).*)?$`,"i"),indices:{bucket:1,path:3},postModify:o},{regex:new RegExp(`^https?://${t===sn?"(?:storage.googleapis.com|storage.cloud.google.com)":t}/${s}/([^?#]*)`,"i"),indices:{bucket:1,path:2},postModify:o}];for(let l=0;l<i.length;l++){const t=i[l],s=t.regex.exec(e);if(s){const e=s[t.indices.bucket];let n=s[t.indices.path];n||(n=""),r=new xn(e,n),t.postModify(r);break}}if(null==r)throw function(e){return new on(an.INVALID_URL,"Invalid URL '"+e+"'.")}(e);return r}}class bn{constructor(e){this.promise_=Promise.reject(e)}getPromise(){return this.promise_}cancel(e=!1){}}
/**
     * @license
     * Copyright 2017 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */function vn(e){return"string"==typeof e||e instanceof String}function yn(e){return wn()&&e instanceof Blob}function wn(){return"undefined"!=typeof Blob}function kn(e,t,r,s){if(s<t)throw pn(`Invalid value for '${e}'. Expected ${t} or greater.`);if(s>r)throw pn(`Invalid value for '${e}'. Expected ${r} or less.`)}
/**
     * @license
     * Copyright 2017 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */function Nn(e,t,r){let s=t;return null==r&&(s=`https://${t}`),`${r}://${s}/v0${e}`}function jn(e){const t=encodeURIComponent;let r="?";for(const s in e)e.hasOwnProperty(s)&&(r=r+(t(s)+"=")+t(e[s])+"&");return r=r.slice(0,-1),r}(dn=cn||(cn={}))[dn.NO_ERROR=0]="NO_ERROR",dn[dn.NETWORK_ERROR=1]="NETWORK_ERROR",dn[dn.ABORT=2]="ABORT";
/**
     * @license
     * Copyright 2017 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */
class _n{constructor(e,t,r,s,n,o,a,i,l,c,d,u=!0){this.url_=e,this.method_=t,this.headers_=r,this.body_=s,this.successCodes_=n,this.additionalRetryCodes_=o,this.callback_=a,this.errorCallback_=i,this.timeout_=l,this.progressCallback_=c,this.connectionFactory_=d,this.retry=u,this.pendingConnection_=null,this.backoffId_=null,this.canceled_=!1,this.appDelete_=!1,this.promise_=new Promise((e,t)=>{this.resolve_=e,this.reject_=t,this.start_()})}start_(){const e=(e,t)=>{if(t)return void e(!1,new Sn(!1,null,!0));const r=this.connectionFactory_();this.pendingConnection_=r;const s=e=>{const t=e.loaded,r=e.lengthComputable?e.total:-1;null!==this.progressCallback_&&this.progressCallback_(t,r)};null!==this.progressCallback_&&r.addUploadProgressListener(s),r.send(this.url_,this.method_,this.body_,this.headers_).then(()=>{null!==this.progressCallback_&&r.removeUploadProgressListener(s),this.pendingConnection_=null;const t=r.getErrorCode()===cn.NO_ERROR,n=r.getStatus();if(!t||
/**
     * @license
     * Copyright 2022 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */
function(e,t){const r=e>=500&&e<600,s=-1!==[408,429].indexOf(e),n=-1!==t.indexOf(e);return r||s||n}(n,this.additionalRetryCodes_)&&this.retry){const t=r.getErrorCode()===cn.ABORT;return void e(!1,new Sn(!1,null,t))}const o=-1!==this.successCodes_.indexOf(n);e(!0,new Sn(o,r))})},t=(e,t)=>{const r=this.resolve_,s=this.reject_,n=t.connection;if(t.wasSuccessCode)try{const e=this.callback_(n,n.getResponse());!
/**
     * @license
     * Copyright 2017 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */
function(e){return void 0!==e}(e)?r():r(e)}catch(o){s(o)}else if(null!==n){const e=hn();e.serverResponse=n.getErrorText(),this.errorCallback_?s(this.errorCallback_(n,e)):s(e)}else t.canceled?s(this.appDelete_?mn():new on(an.CANCELED,"User canceled the upload/download.")):s(new on(an.RETRY_LIMIT_EXCEEDED,"Max retry time for operation exceeded, please try again."))};this.canceled_?t(0,new Sn(!1,null,!0)):this.backoffId_=function(e,t,r){let s=1,n=null,o=null,a=!1,i=0;function l(){return 2===i}let c=!1;function d(...e){c||(c=!0,t.apply(null,e))}function u(t){n=setTimeout(()=>{n=null,e(p,l())},t)}function h(){o&&clearTimeout(o)}function p(e,...t){if(c)return void h();if(e)return h(),void d.call(null,e,...t);if(l()||a)return h(),void d.call(null,e,...t);let r;s<64&&(s*=2),1===i?(i=2,r=0):r=1e3*(s+Math.random()),u(r)}let m=!1;function g(e){m||(m=!0,h(),c||(null!==n?(e||(i=2),clearTimeout(n),u(0)):e||(i=1)))}return u(0),o=setTimeout(()=>{a=!0,g(!0)},r),g}(e,t,this.timeout_)}getPromise(){return this.promise_}cancel(e){this.canceled_=!0,this.appDelete_=e||!1,null!==this.backoffId_&&(0,this.backoffId_)(!1),null!==this.pendingConnection_&&this.pendingConnection_.abort()}}class Sn{constructor(e,t,r){this.wasSuccessCode=e,this.connection=t,this.canceled=!!r}}function In(...e){const t="undefined"!=typeof BlobBuilder?BlobBuilder:"undefined"!=typeof WebKitBlobBuilder?WebKitBlobBuilder:void 0;if(void 0!==t){const r=new t;for(let t=0;t<e.length;t++)r.append(e[t]);return r.getBlob()}if(wn())return new Blob(e);throw new on(an.UNSUPPORTED_ENVIRONMENT,"This browser doesn't seem to support creating Blobs")}
/**
     * @license
     * Copyright 2021 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */
function Cn(e){if("undefined"==typeof atob)throw t="base-64",new on(an.UNSUPPORTED_ENVIRONMENT,`${t} is missing. Make sure to install the required polyfills. See https://firebase.google.com/docs/web/environments-js-sdk#polyfills for more information.`);var t;return atob(e)}
/**
     * @license
     * Copyright 2017 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */const Tn="raw",En="base64",An="base64url",On="data_url";class Pn{constructor(e,t){this.data=e,this.contentType=t||null}}function Rn(e,t){switch(e){case Tn:return new Pn(Ln(t));case En:case An:return new Pn(Mn(e,t));case On:return new Pn(function(e){const t=new Dn(e);return t.base64?Mn(En,t.rest):function(e){let t;try{t=decodeURIComponent(e)}catch(r){throw gn(On,"Malformed data URL.")}return Ln(t)}(t.rest)}(t),new Dn(t).contentType)}throw hn()}function Ln(e){const t=[];for(let r=0;r<e.length;r++){let s=e.charCodeAt(r);s<=127?t.push(s):s<=2047?t.push(192|s>>6,128|63&s):55296==(64512&s)?r<e.length-1&&56320==(64512&e.charCodeAt(r+1))?(s=65536|(1023&s)<<10|1023&e.charCodeAt(++r),t.push(240|s>>18,128|s>>12&63,128|s>>6&63,128|63&s)):t.push(239,191,189):56320==(64512&s)?t.push(239,191,189):t.push(224|s>>12,128|s>>6&63,128|63&s)}return new Uint8Array(t)}function Mn(e,t){switch(e){case En:{const r=-1!==t.indexOf("-"),s=-1!==t.indexOf("_");if(r||s)throw gn(e,"Invalid character '"+(r?"-":"_")+"' found: is it base64url encoded?");break}case An:{const r=-1!==t.indexOf("+"),s=-1!==t.indexOf("/");if(r||s)throw gn(e,"Invalid character '"+(r?"+":"/")+"' found: is it base64 encoded?");t=t.replace(/-/g,"+").replace(/_/g,"/");break}}let r;try{r=Cn(t)}catch(n){if(n.message.includes("polyfill"))throw n;throw gn(e,"Invalid character found")}const s=new Uint8Array(r.length);for(let o=0;o<r.length;o++)s[o]=r.charCodeAt(o);return s}class Dn{constructor(e){this.base64=!1,this.contentType=null;const t=e.match(/^data:([^,]+)?,/);if(null===t)throw gn(On,"Must be formatted 'data:[<mediatype>][;base64],<data>");const r=t[1]||null;var s,n;
/**
     * @license
     * Copyright 2017 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */null!=r&&(this.base64=(n=";base64",(s=r).length>=n.length&&s.substring(s.length-n.length)===n),this.contentType=this.base64?r.substring(0,r.length-7):r),this.rest=e.substring(e.indexOf(",")+1)}}class $n{constructor(e,t){let r=0,s="";yn(e)?(this.data_=e,r=e.size,s=e.type):e instanceof ArrayBuffer?(t?this.data_=new Uint8Array(e):(this.data_=new Uint8Array(e.byteLength),this.data_.set(new Uint8Array(e))),r=this.data_.length):e instanceof Uint8Array&&(t?this.data_=e:(this.data_=new Uint8Array(e.length),this.data_.set(e)),r=e.length),this.size_=r,this.type_=s}size(){return this.size_}type(){return this.type_}slice(e,t){if(yn(this.data_)){const o=this.data_,a=(s=e,n=t,(r=o).webkitSlice?r.webkitSlice(s,n):r.mozSlice?r.mozSlice(s,n):r.slice?r.slice(s,n):null);return null===a?null:new $n(a)}{const r=new Uint8Array(this.data_.buffer,e,t-e);return new $n(r,!0)}var r,s,n}static getBlob(...e){if(wn()){const t=e.map(e=>e instanceof $n?e.data_:e);return new $n(In.apply(null,t))}{const t=e.map(e=>vn(e)?Rn(Tn,e).data:e.data_);let r=0;t.forEach(e=>{r+=e.byteLength});const s=new Uint8Array(r);let n=0;return t.forEach(e=>{for(let t=0;t<e.length;t++)s[n++]=e[t]}),new $n(s,!0)}}uploadData(){return this.data_}}
/**
     * @license
     * Copyright 2017 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */function Un(e){let t;try{t=JSON.parse(e)}catch(r){return null}return function(e){return"object"==typeof e&&!Array.isArray(e)}(t)?t:null}
/**
     * @license
     * Copyright 2017 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */function zn(e){const t=e.lastIndexOf("/",e.length-2);return-1===t?e:e.slice(t+1)}
/**
     * @license
     * Copyright 2017 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */function Fn(e,t){return t}class qn{constructor(e,t,r,s){this.server=e,this.local=t||e,this.writable=!!r,this.xform=s||Fn}}let Bn=null;function Vn(){if(Bn)return Bn;const e=[];e.push(new qn("bucket")),e.push(new qn("generation")),e.push(new qn("metageneration")),e.push(new qn("name","fullPath",!0));const t=new qn("name");t.xform=function(e,t){return function(e){return!vn(e)||e.length<2?e:zn(e)}(t)},e.push(t);const r=new qn("size");return r.xform=function(e,t){return void 0!==t?Number(t):t},e.push(r),e.push(new qn("timeCreated")),e.push(new qn("updated")),e.push(new qn("md5Hash",null,!0)),e.push(new qn("cacheControl",null,!0)),e.push(new qn("contentDisposition",null,!0)),e.push(new qn("contentEncoding",null,!0)),e.push(new qn("contentLanguage",null,!0)),e.push(new qn("contentType",null,!0)),e.push(new qn("metadata","customMetadata",!0)),Bn=e,Bn}function Hn(e,t,r){const s={type:"file"},n=r.length;for(let o=0;o<n;o++){const e=r[o];s[e.local]=e.xform(s,t[e.server])}return function(e,t){Object.defineProperty(e,"ref",{get:function(){const r=e.bucket,s=e.fullPath,n=new xn(r,s);return t._makeStorageReference(n)}})}(s,e),s}function Wn(e,t,r){const s=Un(t);return null===s?null:Hn(e,s,r)}
/**
     * @license
     * Copyright 2019 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */
const Gn="prefixes",Jn="items";function Kn(e,t,r){const s=Un(r);return null===s?null:function(e,t,r){const s={prefixes:[],items:[],nextPageToken:r.nextPageToken};if(r[Gn])for(const n of r[Gn]){const r=n.replace(/\/$/,""),o=e._makeStorageReference(new xn(t,r));s.prefixes.push(o)}if(r[Jn])for(const n of r[Jn]){const r=e._makeStorageReference(new xn(t,n.name));s.items.push(r)}return s}(e,t,s)}class Zn{constructor(e,t,r,s){this.url=e,this.method=t,this.handler=r,this.timeout=s,this.urlParams={},this.headers={},this.body=null,this.errorHandler=null,this.progressCallback=null,this.successCodes=[200],this.additionalRetryCodes=[]}}
/**
     * @license
     * Copyright 2017 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */function Xn(e){if(!e)throw hn()}function Yn(e,t){return function(r,s){const n=Wn(e,s,t);return Xn(null!==n),function(e,t,r,s){const n=Un(t);if(null===n)return null;if(!vn(n.downloadTokens))return null;const o=n.downloadTokens;if(0===o.length)return null;const a=encodeURIComponent;return o.split(",").map(t=>{const n=e.bucket,o=e.fullPath;return Nn("/b/"+a(n)+"/o/"+a(o),r,s)+jn({alt:"media",token:t})})[0]}(n,s,e.host,e._protocol)}}function Qn(e){return function(t,r){let s;var n,o;return 401===t.getStatus()?s=t.getErrorText().includes("Firebase App Check token is invalid")?new on(an.UNAUTHORIZED_APP,"This app does not have permission to access Firebase Storage on this project."):new on(an.UNAUTHENTICATED,"User is not authenticated, please authenticate using Firebase Authentication and try again."):402===t.getStatus()?(o=e.bucket,s=new on(an.QUOTA_EXCEEDED,"Quota for bucket '"+o+"' exceeded, please view quota on https://firebase.google.com/pricing/.")):403===t.getStatus()?(n=e.path,s=new on(an.UNAUTHORIZED,"User does not have permission to access '"+n+"'.")):s=r,s.status=t.getStatus(),s.serverResponse=r.serverResponse,s}}function eo(e){const t=Qn(e);return function(r,s){let n=t(r,s);var o;return 404===r.getStatus()&&(o=e.path,n=new on(an.OBJECT_NOT_FOUND,"Object '"+o+"' does not exist.")),n.serverResponse=s.serverResponse,n}}function to(e,t,r,s,n){const o={};t.isRoot?o.prefix="":o.prefix=t.path+"/",r.length>0&&(o.delimiter=r),s&&(o.pageToken=s),n&&(o.maxResults=n);const a=Nn(t.bucketOnlyServerUrl(),e.host,e._protocol),i=e.maxOperationRetryTime,l=new Zn(a,"GET",function(e,t){return function(r,s){const n=Kn(e,t,s);return Xn(null!==n),n}}(e,t.bucket),i);return l.urlParams=o,l.errorHandler=Qn(t),l}function ro(e,t,r,s,n){const o=t.bucketOnlyServerUrl(),a={"X-Goog-Upload-Protocol":"multipart"},i=function(){let e="";for(let t=0;t<2;t++)e+=Math.random().toString().slice(2);return e}();a["Content-Type"]="multipart/related; boundary="+i;const l=function(e,t,r){const s=Object.assign({},r);return s.fullPath=e.path,s.size=t.size(),s.contentType||(s.contentType=function(e,t){return e&&e.contentType||t&&t.type()||"application/octet-stream"}(null,t)),s}(t,s,n),c=function(e,t){const r={},s=t.length;for(let n=0;n<s;n++){const s=t[n];s.writable&&(r[s.server]=e[s.local])}return JSON.stringify(r)}(l,r),d="--"+i+"\r\nContent-Type: application/json; charset=utf-8\r\n\r\n"+c+"\r\n--"+i+"\r\nContent-Type: "+l.contentType+"\r\n\r\n",u="\r\n--"+i+"--",h=$n.getBlob(d,s,u);if(null===h)throw new on(an.CANNOT_SLICE_BLOB,"Cannot slice blob for upload. Please retry the upload.");const p={name:l.fullPath},m=Nn(o,e.host,e._protocol),g=e.maxUploadRetryTime,f=new Zn(m,"POST",function(e,t){return function(r,s){const n=Wn(e,s,t);return Xn(null!==n),n}}(e,r),g);return f.urlParams=p,f.headers=a,f.body=h.uploadData(),f.errorHandler=Qn(t),f}class so{constructor(){this.sent_=!1,this.xhr_=new XMLHttpRequest,this.initXhr(),this.errorCode_=cn.NO_ERROR,this.sendPromise_=new Promise(e=>{this.xhr_.addEventListener("abort",()=>{this.errorCode_=cn.ABORT,e()}),this.xhr_.addEventListener("error",()=>{this.errorCode_=cn.NETWORK_ERROR,e()}),this.xhr_.addEventListener("load",()=>{e()})})}send(e,t,r,s){if(this.sent_)throw fn("cannot .send() more than once");if(this.sent_=!0,this.xhr_.open(t,e,!0),void 0!==s)for(const n in s)s.hasOwnProperty(n)&&this.xhr_.setRequestHeader(n,s[n].toString());return void 0!==r?this.xhr_.send(r):this.xhr_.send(),this.sendPromise_}getErrorCode(){if(!this.sent_)throw fn("cannot .getErrorCode() before sending");return this.errorCode_}getStatus(){if(!this.sent_)throw fn("cannot .getStatus() before sending");try{return this.xhr_.status}catch(e){return-1}}getResponse(){if(!this.sent_)throw fn("cannot .getResponse() before sending");return this.xhr_.response}getErrorText(){if(!this.sent_)throw fn("cannot .getErrorText() before sending");return this.xhr_.statusText}abort(){this.xhr_.abort()}getResponseHeader(e){return this.xhr_.getResponseHeader(e)}addUploadProgressListener(e){null!=this.xhr_.upload&&this.xhr_.upload.addEventListener("progress",e)}removeUploadProgressListener(e){null!=this.xhr_.upload&&this.xhr_.upload.removeEventListener("progress",e)}}class no extends so{initXhr(){this.xhr_.responseType="text"}}function oo(){return new no}
/**
     * @license
     * Copyright 2019 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */class ao{constructor(e,t){this._service=e,this._location=t instanceof xn?t:xn.makeFromUrl(t,e.host)}toString(){return"gs://"+this._location.bucket+"/"+this._location.path}_newRef(e,t){return new ao(e,t)}get root(){const e=new xn(this._location.bucket,"");return this._newRef(this._service,e)}get bucket(){return this._location.bucket}get fullPath(){return this._location.path}get name(){return zn(this._location.path)}get storage(){return this._service}get parent(){const e=function(e){if(0===e.length)return null;const t=e.lastIndexOf("/");return-1===t?"":e.slice(0,t)}(this._location.path);if(null===e)return null;const t=new xn(this._location.bucket,e);return new ao(this._service,t)}_throwIfRoot(e){if(""===this._location.path)throw function(e){return new on(an.INVALID_ROOT_OPERATION,"The operation '"+e+"' cannot be performed on a root reference, create a non-root reference using child, such as .child('file.png').")}(e)}}function io(e){const t={prefixes:[],items:[]};return lo(e,t).then(()=>t)}function lo(e,t,r){return p(this,null,function*(){const s={pageToken:r},n=yield function(e,t){null!=t&&"number"==typeof t.maxResults&&kn("options.maxResults",1,1e3,t.maxResults);const r=t||{},s=to(e.storage,e._location,"/",r.pageToken,r.maxResults);return e.storage.makeRequestWithTokens(s,oo)}(e,s);t.prefixes.push(...n.prefixes),t.items.push(...n.items),null!=n.nextPageToken&&(yield lo(e,t,n.nextPageToken))})}function co(e){e._throwIfRoot("getDownloadURL");const t=function(e,t,r){const s=Nn(t.fullServerUrl(),e.host,e._protocol),n=e.maxOperationRetryTime,o=new Zn(s,"GET",Yn(e,r),n);return o.errorHandler=eo(t),o}(e.storage,e._location,Vn());return e.storage.makeRequestWithTokens(t,oo).then(e=>{if(null===e)throw new on(an.NO_DOWNLOAD_URL,"The given file does not have any download URLs.");return e})}function uo(e,t){if(e instanceof mo){const r=e;if(null==r._bucket)throw new on(an.NO_DEFAULT_BUCKET,"No default bucket found. Did you set the '"+nn+"' property when initializing the app?");const s=new ao(r,r._bucket);return null!=t?uo(s,t):s}return void 0!==t?function(e,t){const r=function(e,t){const r=t.split("/").filter(e=>e.length>0).join("/");return 0===e.length?r:e+"/"+r}(e._location.path,t),s=new xn(e._location.bucket,r);return new ao(e.storage,s)}
/**
     * @license
     * Copyright 2017 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */(e,t):e}function ho(e,t){if(t&&/^[A-Za-z]+:\/\//.test(t)){if(e instanceof mo)return new ao(e,t);throw pn("To use ref(service, url), the first argument must be a Storage instance.")}return uo(e,t)}function po(e,t){const r=null==t?void 0:t[nn];return null==r?null:xn.makeFromBucketSpec(r,e)}class mo{constructor(e,t,r,s,n){this.app=e,this._authProvider=t,this._appCheckProvider=r,this._url=s,this._firebaseVersion=n,this._bucket=null,this._host=sn,this._protocol="https",this._appId=null,this._deleted=!1,this._maxOperationRetryTime=12e4,this._maxUploadRetryTime=6e5,this._requests=new Set,this._bucket=null!=s?xn.makeFromBucketSpec(s,this._host):po(this._host,this.app.options)}get host(){return this._host}set host(e){this._host=e,null!=this._url?this._bucket=xn.makeFromBucketSpec(this._url,e):this._bucket=po(e,this.app.options)}get maxUploadRetryTime(){return this._maxUploadRetryTime}set maxUploadRetryTime(e){kn("time",0,Number.POSITIVE_INFINITY,e),this._maxUploadRetryTime=e}get maxOperationRetryTime(){return this._maxOperationRetryTime}set maxOperationRetryTime(e){kn("time",0,Number.POSITIVE_INFINITY,e),this._maxOperationRetryTime=e}_getAuthToken(){return p(this,null,function*(){if(this._overrideAuthToken)return this._overrideAuthToken;const e=this._authProvider.getImmediate({optional:!0});if(e){const t=yield e.getToken();if(null!==t)return t.accessToken}return null})}_getAppCheckToken(){return p(this,null,function*(){const e=this._appCheckProvider.getImmediate({optional:!0});return e?(yield e.getToken()).token:null})}_delete(){return this._deleted||(this._deleted=!0,this._requests.forEach(e=>e.cancel()),this._requests.clear()),Promise.resolve()}_makeStorageReference(e){return new ao(this,e)}_makeRequest(e,t,r,s,n=!0){if(this._deleted)return new bn(mn());{const o=function(e,t,r,s,n,o,a=!0){const i=jn(e.urlParams),l=e.url+i,c=Object.assign({},e.headers);return function(e,t){t&&(e["X-Firebase-GMPID"]=t)}(c,t),function(e,t){null!==t&&t.length>0&&(e.Authorization="Firebase "+t)}(c,r),function(e,t){e["X-Firebase-Storage-Version"]="webjs/"+(null!=t?t:"AppManager")}(c,o),function(e,t){null!==t&&(e["X-Firebase-AppCheck"]=t)}(c,s),new _n(l,e.method,c,e.body,e.successCodes,e.additionalRetryCodes,e.handler,e.errorHandler,e.timeout,e.progressCallback,n,a)}
/**
     * @license
     * Copyright 2017 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */(e,this._appId,r,s,t,this._firebaseVersion,n);return this._requests.add(o),o.getPromise().then(()=>this._requests.delete(o),()=>this._requests.delete(o)),o}}makeRequestWithTokens(e,t){return p(this,null,function*(){const[r,s]=yield Promise.all([this._getAuthToken(),this._getAppCheckToken()]);return this._makeRequest(e,t,r,s).getPromise()})}}const go="@firebase/storage",fo="0.13.2",xo="storage";function bo(e,t,r){return function(e,t,r){e._throwIfRoot("uploadBytes");const s=ro(e.storage,e._location,Vn(),new $n(t,!0),r);return e.storage.makeRequestWithTokens(s,oo).then(t=>({metadata:t,ref:e}))}(e=_(e),t,r)}function vo(e){return co(e=_(e))}function yo(e,t){return ho(e=_(e),t)}function wo(e,{instanceIdentifier:t}){const r=e.getProvider("app").getImmediate(),s=e.getProvider("auth-internal"),n=e.getProvider("app-check-internal");return new mo(r,s,n,t,M)}b(new v(xo,wo,"PUBLIC").setMultipleInstances(!0)),x(go,fo,""),x(go,fo,"esm2017");const ko={apiKey:"AIzaSyDnQlzkoxsZ5bZhlWASgAnBXtHP3-Occcg",authDomain:"controle-de-assinaturas.firebaseapp.com",projectId:"controle-de-assinaturas",storageBucket:"controle-de-assinaturas.firebasestorage.app",messagingSenderId:"421292619235",appId:"1:421292619235:web:7a2ee16000cb309cc91cd6",measurementId:"G-FHV9M51Y19"},No=K(ko);!function(e=E()){e=_(e);const t=y(e,Ke);t.isInitialized()?t.getImmediate():function(e,t={}){const r=y(e,Ke);if(r.isInitialized()){const e=r.getImmediate();if(A(t,r.getOptions()))return e;throw Ye.create("already-initialized")}r.initialize({options:t})}(e)}(No);const jo=Z(No,{localCache:X({tabManager:Y()})});!function(e=E()){const t=y(e,"auth");if(t.isInitialized())return t.getImmediate();const r=
/**
     * @license
     * Copyright 2020 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */
function(e,t){const r=y(e,"auth");if(r.isInitialized()){const e=r.getImmediate(),s=r.getOptions();if(A(s,null!=t?t:{}))return e;It(e,"already-initialized")}return r.initialize({options:t})}(e,{popupRedirectResolver:Zs,persistence:[ps,Zr,Yr]}),s=P("authTokenSyncURL");if(s&&"boolean"==typeof isSecureContext&&isSecureContext){const e=new URL(s,location.origin);if(location.origin===e.origin){const t=(n=e.toString(),e=>p(null,null,function*(){const t=e&&(yield e.getIdTokenResult()),r=t&&((new Date).getTime()-Date.parse(t.issuedAtTime))/1e3;if(r&&r>en)return;const s=null==t?void 0:t.token;tn!==s&&(tn=s,yield fetch(n,{method:s?"POST":"DELETE",headers:s?{Authorization:`Bearer ${s}`}:{}}))}));!function(e,t,r){_(e).beforeAuthStateChanged(t,r)}(r,t,()=>t(r.currentUser)),function(e,t,r,s){_(e).onIdTokenChanged(t,r,s)}(r,e=>t(e))}}var n;const o=B("auth");o&&Ar(r,`http://${o}`)}(No);const _o=function(e=E(),t){e=_(e);const r=y(e,xo).getImmediate({identifier:t}),s=G("storage");return s&&function(e,t,r,s={}){!function(e,t,r,s={}){e.host=`${t}:${r}`,e._protocol="http";const{mockUserToken:n}=s;n&&(e._overrideAuthToken="string"==typeof n?n:J(n,e.app.options.projectId))}(e,t,r,s)}(r,...s),r}(No);console.log("🔥 Firebase inicializado com sucesso!"),console.log("✅ Persistência offline ativada com suporte a múltiplas abas!"),console.log("📦 Project ID:",ko.projectId);const So="tasks",Io="stats",Co="books",To="stories",Eo="links",Ao="products",Oo="purchases",Po="default_user";let Ro=!0,Lo=!1;const Mo=e=>p(null,null,function*(){if(!Ro&&Lo)throw new Error("FIREBASE_UNAVAILABLE");try{const t=yield re(e);return Lo||(Ro=!0,Lo=!0),t}catch(t){"unavailable"!==t.code&&"permission-denied"!==t.code||(Ro=!1,Lo=!0);try{return yield se(e)}catch(r){throw new Error("FIREBASE_UNAVAILABLE")}}}),Do=e=>p(null,null,function*(){try{console.log("🔥 Firebase: Salvando tasks...",e.length);const t=Q(jo,So,Po);yield ee(t,{tasks:e,updatedAt:te()}),console.log("✅ Firebase: Tasks salvas com sucesso!")}catch(t){console.error("❌ Firebase: Erro ao salvar tasks:",t),localStorage.setItem("cronos_tasks",JSON.stringify(e))}}),$o=()=>p(null,null,function*(){if(!Ro&&Lo){const e=localStorage.getItem("cronos_tasks");return e?JSON.parse(e):[]}try{const e=Q(jo,So,Po),t=yield Mo(e);return t.exists()&&t.data().tasks||[]}catch(e){if("FIREBASE_UNAVAILABLE"===e.message){const e=localStorage.getItem("cronos_tasks");return e?JSON.parse(e):[]}const t=localStorage.getItem("cronos_tasks");return t?JSON.parse(t):[]}}),Uo=e=>p(null,null,function*(){try{console.log("🔥 Firebase: Salvando stats...");const t=Q(jo,Io,Po);yield ee(t,u(d({},e),{updatedAt:te()})),console.log("✅ Firebase: Stats salvos com sucesso!")}catch(t){console.error("❌ Firebase: Erro ao salvar stats:",t),localStorage.setItem("cronos_stats",JSON.stringify(e))}}),zo=e=>p(null,null,function*(){try{console.log("🔥 Firebase: Salvando books...",e.length);const t=Q(jo,Co,Po);yield ee(t,{books:e,updatedAt:te()}),console.log("✅ Firebase: Books salvos com sucesso!")}catch(t){console.error("❌ Firebase: Erro ao salvar books:",t),localStorage.setItem("cronos_books",JSON.stringify(e))}}),Fo=e=>p(null,null,function*(){try{console.log("🔥 Firebase: Salvando stories...",e.length);const t=Q(jo,To,Po);yield ee(t,{stories:e,updatedAt:te()}),console.log("✅ Firebase: Stories salvos com sucesso!")}catch(t){console.error("❌ Firebase: Erro ao salvar stories:",t),localStorage.setItem("cronos_stories",JSON.stringify(e))}}),qo=e=>p(null,null,function*(){try{console.log("🔥 Firebase: Salvando links...",e.length);const t=Q(jo,Eo,Po);yield ee(t,{links:e,updatedAt:te()}),console.log("✅ Firebase: Links salvos com sucesso!")}catch(t){console.error("❌ Firebase: Erro ao salvar links:",t),localStorage.setItem("cronos_links",JSON.stringify(e))}}),Bo=e=>p(null,null,function*(){try{console.log("🔥 Firebase: Salvando products...",e.length);const t=Q(jo,Ao,Po);yield ee(t,{products:e,updatedAt:te()}),console.log("✅ Firebase: Products salvos com sucesso!")}catch(t){console.error("❌ Firebase: Erro ao salvar products:",t),localStorage.setItem("cronos_products",JSON.stringify(e))}}),Vo=e=>p(null,null,function*(){try{console.log("🔥 Firebase: Salvando purchases...",e.length);const t=Q(jo,Oo,Po);yield ee(t,{purchases:e,updatedAt:te()}),console.log("✅ Firebase: Purchases salvos com sucesso!")}catch(t){console.error("❌ Firebase: Erro ao salvar purchases:",t),localStorage.setItem("cronos_purchases",JSON.stringify(e))}}),Ho=()=>p(null,null,function*(){try{console.log("🔥 Firebase: Testando conexão...");const e=Q(jo,"test","connection");return yield ee(e,{timestamp:te()}),console.log("✅ Firebase: Conexão OK!"),!0}catch(e){return console.error("❌ Firebase: Offline ou erro de conexão:",e),!1}}),Wo="1Irg8XqgU-DhMcSA3i_ZteLPKedrYgMBu";let Go=!1,Jo=!1,Ko=null;function Zo(){return!!localStorage.getItem("google_drive_token")}function Xo(){return p(this,null,function*(){if(!Ko)throw new Error("Not authorized. Please sign in first.");try{const e=yield fetch(`https://www.googleapis.com/drive/v3/files?q='${Wo}'+in+parents+and+name+contains+'cronos_backup'+and+trashed=false&fields=files(id,name,modifiedTime,size)&orderBy=modifiedTime desc`,{headers:{Authorization:`Bearer ${Ko}`}});if(!e.ok)throw new Error(`Failed to list files: ${e.statusText}`);return(yield e.json()).files||[]}catch(e){throw console.error("❌ Failed to list backup files:",e),e}})}function Yo(e){return p(this,null,function*(){if(!Ko)throw new Error("Not authorized. Please sign in first.");try{const t=yield fetch(`https://www.googleapis.com/drive/v3/files/${e}?alt=media`,{headers:{Authorization:`Bearer ${Ko}`}});if(!t.ok)throw new Error(`Download failed: ${t.statusText}`);const r=yield t.json();if(!r.version||!r.data)throw new Error("Invalid backup file format");return console.log("✅ Backup downloaded from Google Drive"),console.log(`📦 Version: ${r.version}`),console.log(`📅 Export date: ${r.exportDate}`),console.log(`📦 Tasks: ${r.data.tasks.length} | Level: ${r.data.stats.level} | Books: ${r.data.books.length}`),r}catch(t){return console.error("❌ Failed to download backup:",t),null}})}function Qo({tasks:e,stats:t,books:r,links:s,onRestoreBackup:n}){const[o,i]=f.useState(!1),[l,c]=f.useState(!1),[d,u]=f.useState(!1),[h,m]=f.useState([]),[g,x]=f.useState(!1),[b,v]=f.useState(""),[y,w]=f.useState(!1);return f.useEffect(()=>{c(Zo()),new Promise((e,t)=>{if(Go&&Jo)return void e();const r=document.createElement("script");r.src="https://apis.google.com/js/api.js",r.async=!0,r.defer=!0,r.onload=()=>{window.gapi.load("client",()=>p(null,null,function*(){yield window.gapi.client.init({apiKey:"",discoveryDocs:["https://www.googleapis.com/discovery/v1/apis/drive/v3/rest"]}),Go=!0,console.log("✅ Google Drive API loaded"),Jo&&e()}))},r.onerror=t,document.body.appendChild(r);const s=document.createElement("script");s.src="https://accounts.google.com/gsi/client",s.async=!0,s.defer=!0,s.onload=()=>(console.warn("⚠️ Google Drive CLIENT_ID not configured"),Jo=!0,void(Go&&e())),s.onerror=t,document.body.appendChild(s)}).then(()=>{i(!0),console.log("✅ Google Drive initialized")}).catch(e=>{console.error("❌ Failed to initialize Google Drive:",e),w(!0)})},[]),y?a.jsxs("div",{className:"bg-red-500/10 border border-red-500/20 rounded-2xl p-6",children:[a.jsx("h3",{className:"text-sm font-bold text-red-400 mb-3",children:"⚙️ Configuração Necessária"}),a.jsx("p",{className:"text-xs text-red-300/80 mb-4",children:"Para usar Google Drive, você precisa configurar as credenciais da API."}),a.jsxs("ol",{className:"text-xs text-red-300/80 space-y-2 mb-4 list-decimal list-inside",children:[a.jsxs("li",{children:["Acesse: ",a.jsx("a",{href:"https://console.cloud.google.com/",target:"_blank",className:"underline",children:"Google Cloud Console"})]}),a.jsx("li",{children:"Crie um projeto e ative a Google Drive API"}),a.jsx("li",{children:"Crie credenciais OAuth 2.0"}),a.jsxs("li",{children:["Configure em: ",a.jsx("code",{className:"bg-red-500/20 px-2 py-1 rounded",children:"/src/services/googleDriveService.ts"})]})]}),a.jsx("p",{className:"text-xs text-red-300/60",children:"Por enquanto, use os botões Export/Import manual."})]}):o?a.jsxs("div",{className:"space-y-4",children:[l?a.jsxs("div",{className:"space-y-3",children:[a.jsxs("div",{className:"bg-green-500/10 border border-green-500/20 rounded-2xl p-4 flex items-center justify-between",children:[a.jsxs("div",{className:"flex items-center gap-3",children:[a.jsx("div",{className:"w-10 h-10 rounded-xl bg-green-500/20 flex items-center justify-center text-xl",children:"✅"}),a.jsxs("div",{children:[a.jsx("h3",{className:"text-xs font-bold text-green-400",children:"Conectado ao Google Drive"}),a.jsx("p",{className:"text-[10px] text-green-300/60",children:"Pasta: CRONOS Backups"})]})]}),a.jsx("button",{onClick:()=>{!function(){var e,t;if(Ko=null,localStorage.removeItem("google_drive_token"),null==(t=null==(e=window.google)?void 0:e.accounts)?void 0:t.oauth2){const e=localStorage.getItem("google_drive_token");e&&window.google.accounts.oauth2.revoke(e)}console.log("✅ Signed out from Google Drive")}(),c(!1),m([]),x(!1)},className:"text-[8px] font-bold text-red-400 hover:text-red-300 transition-colors px-3 py-2 rounded-lg border border-red-400/20 hover:bg-red-400/5",children:"Desconectar"})]}),a.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[a.jsxs("button",{onClick:()=>p(null,null,function*(){u(!0),v("");try{yield function(e,t,r,s){return p(this,null,function*(){if(!Ko)throw new Error("Not authorized. Please sign in first.");const n=localStorage.getItem("cronos_user_id")||"unknown",o={version:"1.0.0",timestamp:Date.now(),exportDate:(new Date).toISOString(),userId:n,data:{tasks:e,stats:t,books:r,links:s}},a=`cronos_backup_${(new Date).toISOString().split("T")[0]}_${Date.now()}.json`,i=JSON.stringify(o,null,2),l=new Blob([i],{type:"application/json"}),c={name:a,mimeType:"application/json",parents:[Wo]},d=new FormData;d.append("metadata",new Blob([JSON.stringify(c)],{type:"application/json"})),d.append("file",l);try{const n=yield fetch("https://www.googleapis.com/upload/drive/v3/files?uploadType=multipart&fields=id,name,webViewLink",{method:"POST",headers:{Authorization:`Bearer ${Ko}`},body:d});if(!n.ok){const e=yield n.text();throw new Error(`Upload failed: ${e}`)}const o=yield n.json();return console.log("✅ Backup uploaded to Google Drive:",o.name),console.log(`📦 Tasks: ${e.length} | Stats: Level ${t.level} | Books: ${r.length} | Links: ${s.length}`),o.id}catch(b){throw console.error("❌ Failed to upload backup:",b),b}})}(e,t,r,s),alert("✅ Backup salvo no Google Drive com sucesso!")}catch(n){v(n.message||"Failed to upload backup"),alert("❌ Erro ao salvar no Google Drive: "+n.message)}finally{u(!1)}}),disabled:d,className:"bg-blue-500/10 hover:bg-blue-500/20 border border-blue-500/20 text-blue-400 font-bold py-3 px-4 rounded-xl transition-all active:scale-95 disabled:opacity-50 text-xs flex flex-col items-center gap-1",children:[a.jsx("span",{className:"text-lg",children:"☁️"}),d?"Salvando...":"Salvar no Drive"]}),a.jsxs("button",{onClick:()=>p(null,null,function*(){u(!0),v("");try{const e=yield function(){return p(this,null,function*(){if(!Zo())throw new Error("Not authorized. Please sign in first.");try{const e=yield Xo();if(0===e.length)return console.log("📂 No backups found in Google Drive"),null;const t=e[0];return console.log(`📥 Loading latest backup: ${t.name}`),yield Yo(t.id)}catch(b){return console.error("❌ Failed to load latest backup:",b),null}})}();if(!e)return void alert("📂 Nenhum backup encontrado no Google Drive");confirm(`📦 Restaurar backup mais recente?\n\n📅 Data: ${new Date(e.timestamp).toLocaleString("pt-BR")}\n📋 Tarefas: ${e.data.tasks.length}\n⭐ Level: ${e.data.stats.level}\n📚 Livros: ${e.data.books.length}\n\nIsso vai SUBSTITUIR todos os dados atuais!`)&&(n(e.data.tasks,e.data.stats,e.data.books,e.data.links),alert("✅ Dados restaurados com sucesso!"))}catch(e){v(e.message||"Failed to load latest backup"),alert("❌ Erro ao carregar backup: "+e.message)}finally{u(!1)}}),disabled:d,className:"bg-purple-500/10 hover:bg-purple-500/20 border border-purple-500/20 text-purple-400 font-bold py-3 px-4 rounded-xl transition-all active:scale-95 disabled:opacity-50 text-xs flex flex-col items-center gap-1",children:[a.jsx("span",{className:"text-lg",children:"📥"}),d?"Carregando...":"Carregar Último"]})]}),a.jsx("button",{onClick:()=>p(null,null,function*(){u(!0),v("");try{const e=yield Xo();m(e),x(!0)}catch(e){v(e.message||"Failed to list backups"),alert("❌ Erro ao listar backups: "+e.message)}finally{u(!1)}}),disabled:d,className:"w-full bg-slate-800/50 hover:bg-slate-800/70 border border-slate-700 text-slate-300 font-bold py-3 px-4 rounded-xl transition-all active:scale-95 disabled:opacity-50 text-xs",children:d?"🔄 Carregando...":"📋 Ver Todos os Backups"})]}):a.jsxs("div",{className:"bg-gradient-to-br from-blue-500/10 to-purple-500/10 border border-blue-500/20 rounded-2xl p-6",children:[a.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[a.jsx("div",{className:"w-12 h-12 rounded-xl bg-blue-500/20 flex items-center justify-center text-2xl",children:"🔗"}),a.jsxs("div",{children:[a.jsx("h3",{className:"text-sm font-bold text-white",children:"Google Drive Sync"}),a.jsx("p",{className:"text-xs text-slate-400",children:"Salve automaticamente no Drive"})]})]}),a.jsx("button",{onClick:()=>p(null,null,function*(){u(!0),v("");try{yield new Promise((e,t)=>{t(new Error("Google Identity Services not loaded"))}),c(!0),console.log("✅ Signed in to Google Drive")}catch(e){v(e.message||"Failed to sign in"),console.error("❌ Sign in error:",e)}finally{u(!1)}}),disabled:d,className:"w-full bg-blue-500 hover:bg-blue-600 text-white font-bold py-3 px-6 rounded-xl transition-all active:scale-95 disabled:opacity-50 disabled:cursor-not-allowed flex items-center justify-center gap-2",children:d?"🔄 Conectando...":"🔗 Conectar Google Drive"})]}),g&&a.jsx("div",{className:"fixed inset-0 bg-black/80 backdrop-blur-sm z-50 flex items-center justify-center p-4",children:a.jsxs("div",{className:"bg-slate-900 border border-slate-700 rounded-2xl max-w-2xl w-full max-h-[80vh] overflow-hidden flex flex-col",children:[a.jsx("div",{className:"p-6 border-b border-slate-700",children:a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsx("h3",{className:"text-lg font-bold text-white",children:"📂 Backups no Google Drive"}),a.jsx("button",{onClick:()=>x(!1),className:"text-slate-400 hover:text-white transition-colors text-2xl leading-none",children:"×"})]})}),a.jsx("div",{className:"flex-1 overflow-y-auto p-6",children:0===h.length?a.jsx("div",{className:"text-center py-12",children:a.jsx("p",{className:"text-slate-400 text-sm",children:"📂 Nenhum backup encontrado"})}):a.jsx("div",{className:"space-y-3",children:h.map(e=>{return a.jsx("div",{className:"bg-slate-800/50 border border-slate-700 rounded-xl p-4 hover:bg-slate-800/70 transition-colors",children:a.jsxs("div",{className:"flex items-start justify-between gap-4",children:[a.jsxs("div",{className:"flex-1 min-w-0",children:[a.jsx("h4",{className:"text-sm font-bold text-white truncate mb-1",children:e.name}),a.jsxs("div",{className:"flex items-center gap-4 text-xs text-slate-400",children:[a.jsxs("span",{children:["📅 ",(r=e.modifiedTime,new Date(r).toLocaleString("pt-BR",{day:"2-digit",month:"2-digit",year:"numeric",hour:"2-digit",minute:"2-digit"}))]}),a.jsxs("span",{children:["💾 ",(t=e.size,t<1024?t+" B":t<1048576?(t/1024).toFixed(1)+" KB":(t/1048576).toFixed(1)+" MB")]})]})]}),a.jsx("button",{onClick:()=>{return t=e.id,r=e.name,p(null,null,function*(){u(!0),v("");try{const e=yield Yo(t);if(!e)return void alert("❌ Falha ao baixar backup");confirm(`📦 Restaurar backup "${r}"?\n\n📅 Data: ${new Date(e.timestamp).toLocaleString("pt-BR")}\n📋 Tarefas: ${e.data.tasks.length}\n⭐ Level: ${e.data.stats.level}\n📚 Livros: ${e.data.books.length}\n\nIsso vai SUBSTITUIR todos os dados atuais!`)&&(n(e.data.tasks,e.data.stats,e.data.books,e.data.links),alert("✅ Dados restaurados com sucesso!"),x(!1))}catch(e){v(e.message||"Failed to download backup"),alert("❌ Erro ao baixar backup: "+e.message)}finally{u(!1)}});var t,r},disabled:d,className:"bg-green-500/10 hover:bg-green-500/20 border border-green-500/20 text-green-400 font-bold py-2 px-4 rounded-lg transition-all active:scale-95 disabled:opacity-50 text-xs whitespace-nowrap",children:"📥 Restaurar"})]})},e.id);var t,r})})})]})}),b&&a.jsx("div",{className:"bg-red-500/10 border border-red-500/20 rounded-xl p-4",children:a.jsxs("p",{className:"text-xs text-red-400",children:["❌ ",b]})})]}):a.jsx("div",{className:"bg-blue-500/10 border border-blue-500/20 rounded-2xl p-6",children:a.jsx("p",{className:"text-xs text-blue-300/80",children:"🔄 Carregando Google Drive API..."})})}let ea=null;const ta=({task:e,stackIndex:t,onClose:r,onUpdateTask:s,onComplete:n,onToggleStep:o,onReward:i})=>{var l,c,d;const[u,h]=f.useState("POMODORO"),[p,m]=f.useState(!1),[g,x]=f.useState(!1),[b,v]=f.useState(25),[y,w]=f.useState(5),[k,N]=f.useState(15),[j,_]=f.useState(!1),[S,I]=f.useState(!1),[C,T]=f.useState(!1),[E,A]=f.useState(!1),[O,P]=f.useState(null),[R,L]=f.useState(1500),[M,D]=f.useState(0),[$,U]=f.useState(0),z=f.useRef(null),F=f.useRef(0),q=f.useRef(1500),B=(e,t,r=.2)=>{try{ea||(ea=new(window.AudioContext||window.webkitAudioContext));const s=ea;"suspended"===s.state&&s.resume();const n=s.createOscillator(),o=s.createGain();n.type="sine",n.frequency.setValueAtTime(e,s.currentTime),o.gain.setValueAtTime(0,s.currentTime),o.gain.linearRampToValueAtTime(r,s.currentTime+.05),o.gain.exponentialRampToValueAtTime(.01,s.currentTime+t),n.connect(o),o.connect(s.destination),n.start(),n.stop(s.currentTime+t)}catch(s){}},V=e=>{const t=Math.floor(e/3600),r=Math.floor(e%3600/60),s=e%60;return t>0?`${t}:${r.toString().padStart(2,"0")}:${s.toString().padStart(2,"0")}`:`${r.toString().padStart(2,"0")}:${s.toString().padStart(2,"0")}`};f.useEffect(()=>{const t="CRONOS | Arquivo Universal";return document.title=j?`(${V(R)}) ${p?"⏸️":"🔥"} ${e.title}`:t,()=>{document.title=t}},[R,j,p,e.title]),f.useEffect(()=>{if(!j){let e=0;"POMODORO"===u?e=60*(p?y:b):"TIMER"===u?e=60*k:"STOPWATCH"===u&&(e=0),L(e),q.current=e,F.current=0,D(0),U(0),I(!1)}},[u,p,b,y,k]),f.useEffect(()=>{let t=null;return j?(z.current=Date.now(),t=setInterval(()=>{const t=Math.floor((Date.now()-(z.current||Date.now()))/1e3),r=F.current+t;if(D(r),!p){const e=Math.floor(r/600);e>$&&(U(e),i&&i(3),B(1320,.15,.1),setTimeout(()=>B(1760,.2,.1),100),T(!0),setTimeout(()=>T(!1),3e3))}if("STOPWATCH"===u)L(r);else{const t=Math.max(0,q.current-r);L(t),t<=0&&(B(880,.3),setTimeout(()=>B(440,.3),400),I(!0),s=p?"Pausa Concluída!":"Sincronia Concluída!",n=p?"Hora de retornar à órbita.":`Protocolo finalizado: ${e.title}`,"Notification"in window&&"granted"===Notification.permission&&new Notification(s,{body:n,icon:"/favicon.ico"}),_(!1),"POMODORO"===u&&m(!p))}var s,n;const o={taskId:e.id,mode:u,isActive:!0,isBreak:p,totalAccumulatedSeconds:r,displayTime:"STOPWATCH"===u?r:Math.max(0,q.current-r),workDuration:b,breakDuration:y,timerDuration:k,lastAwardedMilestone:$,timestamp:Date.now()};localStorage.setItem(`cronos_timer_${e.id}`,JSON.stringify(o))},500)):z.current&&(F.current+=Math.floor((Date.now()-z.current)/1e3),z.current=null),()=>clearInterval(t)},[j,u,p,e.title,$,i,e.id,b,y,k]),f.useEffect(()=>{const t=localStorage.getItem(`cronos_timer_${e.id}`);if(t)try{const r=JSON.parse(t);Date.now()-r.timestamp<6e5?(console.log("🔄 Restaurando estado do timer salvo:",r),h(r.mode),m(r.isBreak),D(r.totalAccumulatedSeconds),L(r.displayTime),v(r.workDuration),w(r.breakDuration),N(r.timerDuration),U(r.lastAwardedMilestone),F.current=r.totalAccumulatedSeconds):localStorage.removeItem(`cronos_timer_${e.id}`)}catch(r){console.error("Erro ao restaurar timer:",r)}},[e.id]),f.useEffect(()=>()=>{(S||O)&&localStorage.removeItem(`cronos_timer_${e.id}`)},[S,O,e.id]);const H=()=>"STOPWATCH"===u?1:0===q.current?0:R/q.current,W=(null==(l=e.steps)?void 0:l.length)||0,G=(null==(c=e.steps)?void 0:c.filter(e=>e.completed).length)||0,J=0===W?0:G/W,K=p?"emerald":"LEISURE"===e.category?"amber":"indigo",Z={amber:{text:"text-amber-500",bg:"bg-amber-500",border:"border-amber-500",glow:"shadow-amber-500/20"},indigo:{text:"text-indigo-400",bg:"bg-indigo-500",border:"border-indigo-500",glow:"shadow-indigo-500/20"},emerald:{text:"text-emerald-400",bg:"bg-emerald-500",border:"border-emerald-500",glow:"shadow-emerald-500/20"}},X=e=>{A(!0),P(e),B(523.25,.2,.2),setTimeout(()=>B(659.25,.2,.2),100),setTimeout(()=>B(783.99,.4,.3),200),setTimeout(()=>B(1046.5,.5,.2),350),setTimeout(()=>{n(e,M),A(!1)},1100)};return g?a.jsxs("div",{onClick:()=>x(!1),style:{bottom:`calc(5rem + ${75*Math.min(t,4)}px)`,right:"1rem",zIndex:110+t},className:"fixed cursor-pointer bg-[#0a0f1e]/95 border border-white/10 px-5 py-3 rounded-2xl shadow-2xl backdrop-blur-3xl flex items-center gap-4 transition-all animate-in slide-in-from-right-10",children:[a.jsxs("div",{className:"relative w-8 h-8 flex items-center justify-center",children:[a.jsxs("svg",{className:"absolute inset-0 w-full h-full -rotate-90",viewBox:"0 0 100 100",children:[a.jsx("circle",{cx:"50",cy:"50",r:"45",stroke:"rgba(255,255,255,0.05)",strokeWidth:"10",fill:"transparent"}),a.jsx("circle",{cx:"50",cy:"50",r:"45",stroke:S?"#ef4444":p?"#10b981":"LEISURE"===e.category?"#f59e0b":"#6366f1",strokeWidth:"10",fill:"transparent",strokeDasharray:"282.7",strokeDashoffset:282.7-282.7*H(),strokeLinecap:"round"})]}),a.jsx("div",{className:"w-1.5 h-1.5 rounded-full "+(j?"bg-white animate-pulse":"bg-slate-700")})]}),a.jsxs("div",{className:"flex flex-col",children:[a.jsx("span",{className:`text-[6px] font-bold ${Z[K].text} uppercase tracking-widest truncate w-20`,children:p?"PAUSA ATIVA":e.title}),a.jsx("span",{className:"text-lg font-space font-bold text-white tabular-nums",children:V(R)})]})]}):a.jsxs("div",{className:"fixed inset-0 bg-slate-950/98 backdrop-blur-3xl flex items-center justify-center z-[120] p-2 md:p-4 animate-in fade-in pt-safe pb-safe",children:[a.jsx("style",{children:"\n        @keyframes rewardParticle { 0% { transform: rotate(var(--rot)) translateY(0) scale(1); opacity: 1; } 100% { transform: rotate(var(--rot)) translateY(calc(-1 * var(--dist))) scale(0); opacity: 0; } }\n        .pulse-emerald { animation: pulse-emerald 2s cubic-bezier(0.4, 0, 0.6, 1) infinite; }\n        @keyframes pulse-emerald { 0%, 100% { opacity: 1; text-shadow: 0 0 10px rgba(16, 185, 129, 0.5); } 50% { opacity: 0.7; text-shadow: 0 0 2px rgba(16, 185, 129, 0.2); } }\n      "}),E&&a.jsx("div",{className:"absolute inset-0 pointer-events-none flex items-center justify-center overflow-hidden z-[200]",children:a.jsx("div",{className:"absolute font-space font-bold text-white text-2xl md:text-4xl uppercase tracking-[0.4em] animate-in zoom-in",children:"COMPLETED"===O?"SINCRONIA TOTAL":"CICLO CONCLUÍDO"})}),a.jsxs("div",{className:"bg-[#0a0f1e] border border-white/10 rounded-[2.5rem] md:rounded-[4rem] w-full max-w-[850px] overflow-hidden shadow-2xl flex flex-col max-h-[98vh] relative transition-all duration-500 "+(E?"scale-105 opacity-0":""),children:[a.jsxs("div",{className:"px-6 md:px-12 py-6 md:py-10 flex justify-between items-center border-b border-white/5",children:[a.jsxs("div",{className:"space-y-0.5 min-w-0",children:[a.jsx("span",{className:`text-[8px] uppercase tracking-[0.3em] ${Z[K].text} font-black block`,children:"POMODORO"===u?p?"MÓDULO DE RECOMPOSIÇÃO":"MÓDULO DE CONCENTRAÇÃO":"PROTOCOLO ATIVO"}),a.jsx("h3",{className:"text-lg md:text-2xl font-space font-bold uppercase truncate pr-4 text-white",children:p?"PAUSA ÓRBITAL":e.title})]}),a.jsxs("div",{className:"flex gap-2",children:[a.jsx("button",{onClick:()=>x(!0),className:"p-3 bg-white/5 rounded-xl text-slate-400",children:a.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:a.jsx("path",{strokeWidth:"2",d:"M19 13l-7 7-7-7"})})}),a.jsx("button",{onClick:r,className:"p-3 bg-red-500/10 rounded-xl text-red-500 text-xl font-light",children:"×"})]})]}),a.jsxs("div",{className:"flex-1 overflow-y-auto px-4 md:px-10 py-6 md:py-10 custom-scrollbar grid grid-cols-1 lg:grid-cols-2 gap-8 md:gap-10",children:[a.jsxs("div",{className:"space-y-6 md:space-y-8 flex flex-col items-center",children:[a.jsx("div",{className:"flex justify-center gap-1.5 w-full",children:["POMODORO","TIMER","STOPWATCH"].map(e=>a.jsx("button",{onClick:()=>!j&&h(e),className:"flex-1 py-2.5 rounded-xl text-[8px] font-bold uppercase border transition-all "+(u===e?`${Z[K].bg} border-transparent text-white shadow-lg ${Z[K].glow}`:"border-white/5 text-slate-600"),children:e},e))}),!j&&"STOPWATCH"!==u&&a.jsxs("div",{className:"flex gap-4",children:[a.jsxs("div",{className:"flex items-center gap-3 bg-white/5 rounded-xl px-4 py-2 border border-white/5",children:[a.jsx("button",{onClick:()=>"POMODORO"===u?p?w(e=>Math.max(1,e-1)):v(e=>Math.max(1,e-5)):N(e=>Math.max(1,e-5)),className:"text-slate-500 text-lg",children:"-"}),a.jsx("span",{className:"text-xs font-mono font-bold text-white w-6 text-center",children:"POMODORO"===u?p?y:b:k}),a.jsx("button",{onClick:()=>"POMODORO"===u?p?w(e=>e+1):v(e=>e+5):N(e=>e+5),className:"text-slate-500 text-lg",children:"+"})]}),"POMODORO"===u&&a.jsx("button",{onClick:()=>m(!p),className:"px-4 py-2 rounded-xl text-[7px] font-black uppercase border transition-all "+(p?"bg-emerald-500/20 border-emerald-500/40 text-emerald-400":"bg-white/5 border-white/5 text-slate-500"),children:p?"Retornar ao Trabalho":"Ir para Pausa"})]}),a.jsxs("div",{className:"relative flex items-center justify-center w-[200px] h-[200px] md:w-[280px] md:h-[280px]",children:[a.jsxs("svg",{className:"absolute inset-0 w-full h-full -rotate-90",viewBox:"0 0 320 320",children:[a.jsx("circle",{cx:"160",cy:"160",r:"135",stroke:"rgba(255,255,255,0.03)",strokeWidth:"12",fill:"transparent"}),a.jsx("circle",{cx:"160",cy:"160",r:"135",stroke:S?"#ef4444":p?"#10b981":"LEISURE"===e.category?"#f59e0b":"#6366f1",strokeWidth:"12",fill:"transparent",strokeDasharray:"848.2",strokeDashoffset:848.2-848.2*H(),strokeLinecap:"round",className:"transition-all duration-300 ease-linear"})]}),a.jsxs("div",{className:"absolute inset-0 flex flex-col items-center justify-center space-y-2",children:[a.jsx("span",{className:"text-[10px] font-black tracking-[0.4em] uppercase "+(p?"text-emerald-400 pulse-emerald":"text-slate-600"),children:p?"EM PAUSA":"SINC. ATIVA"}),a.jsx("span",{className:"text-5xl md:text-7xl font-space font-bold tabular-nums text-white "+(S?"animate-pulse text-red-400":""),children:V(R)})]})]}),a.jsxs("div",{className:"grid grid-cols-2 gap-3 w-full",children:[a.jsx("button",{onClick:()=>{j||(ea&&"suspended"===ea.state&&ea.resume(),"Notification"in window&&"default"===Notification.permission&&Notification.requestPermission()),_(!j)},className:"h-14 md:h-16 rounded-2xl font-bold uppercase text-[9px] tracking-widest transition-all "+(j?"bg-slate-900 text-red-400 border border-red-500/20":"bg-white text-slate-950"),children:j?"PAUSAR":"INICIAR"}),a.jsx("button",{onClick:()=>{_(!1),L("POMODORO"===u?60*(p?y:b):"TIMER"===u?60*k:0)},className:"h-14 md:h-16 rounded-2xl bg-white/5 text-slate-500 font-bold uppercase text-[9px] tracking-widest",children:"REINICIAR"})]})]}),a.jsxs("div",{className:`space-y-6 flex flex-col bg-white/[0.01] border ${p?"border-emerald-500/10":"border-white/5"} rounded-[2rem] p-6 md:p-8 transition-colors`,children:[a.jsxs("div",{className:"space-y-2",children:[a.jsxs("div",{className:"flex justify-between items-end",children:[a.jsx("span",{className:`text-[9px] font-bold ${Z[K].text} uppercase tracking-widest`,children:"Progresso de Módulos"}),a.jsxs("span",{className:"text-[9px] font-mono text-slate-500",children:[G,"/",W]})]}),a.jsx("div",{className:"w-full h-1.5 bg-white/5 rounded-full overflow-hidden",children:a.jsx("div",{className:`h-full ${Z[K].bg} transition-all duration-700`,style:{width:100*J+"%"}})})]}),a.jsx("div",{className:"flex-1 space-y-2.5 overflow-y-auto max-h-[250px] md:max-h-none custom-scrollbar pr-1",children:null==(d=e.steps)?void 0:d.map(e=>a.jsxs("div",{onClick:()=>o(e.id),className:"flex items-center gap-3 p-3.5 rounded-xl border transition-all "+(e.completed?"bg-indigo-500/5 border-white/5 opacity-50":"bg-white/5 border-white/5"),children:[a.jsx("div",{className:"w-4 h-4 rounded-full border flex items-center justify-center "+(e.completed?"bg-indigo-500 border-indigo-400":"border-white/20"),children:e.completed&&a.jsx("span",{className:"text-[8px]",children:"✓"})}),a.jsx("span",{className:"text-xs "+(e.completed?"text-slate-600 line-through":"text-slate-200"),children:e.title})]},e.id))}),a.jsxs("div",{className:"space-y-4 pt-4 border-t border-white/5",children:[!p&&a.jsxs(a.Fragment,{children:[a.jsx("button",{onClick:()=>X("CYCLE_FINISHED"),className:"w-full h-12 bg-white/5 border border-white/10 rounded-xl flex items-center justify-center gap-3 hover:bg-white/10 transition-all active:scale-95",children:a.jsx("span",{className:"font-space font-bold text-[9px] text-white uppercase tracking-widest",children:"Registrar Ciclo Parcial"})}),a.jsx("button",{onClick:()=>X("COMPLETED"),className:"w-full h-14 bg-emerald-600 rounded-xl flex items-center justify-center gap-3 shadow-lg shadow-emerald-900/20 active:scale-95 transition-all",children:a.jsx("span",{className:"font-space font-bold text-[9px] text-white uppercase tracking-widest",children:"Sincronia Total"})})]}),p&&a.jsx("div",{className:"py-4 text-center",children:a.jsx("p",{className:"text-[10px] font-space text-slate-500 uppercase tracking-widest italic animate-pulse",children:"Aproveite este intervalo para reequilibrar seus sistemas."})})]})]})]})]})]})},ra=({level:e,nebulaTheme:t})=>{const r=f.useRef(null);return f.useEffect(()=>{const s=r.current;if(!s)return;const n=s.getContext("2d");if(!n)return;let o,a=[];const i=(e,t,r,s,n)=>{const o=Math.min(s,n)/14;return{x:s/2+(e-t)*Math.cos(Math.PI/6)*o,y:n/2+((e+t)*Math.sin(Math.PI/6)-r)*o}};class l{constructor(e){this.seed=Math.random(),this.energyLevel=1+.15*e;const t=(r=e)<=4?[{main:"#081421",sec:"#00f2ff",glow:"#a5f3fc"},{main:"#110c3b",sec:"#7d5fff",glow:"#dcd3ff"},{main:"#0a1a12",sec:"#00ff9d",glow:"#ccffeb"}]:r<=8?[{main:"#330000",sec:"#ff3e3e",glow:"#ffe4e4"},{main:"#2b1a00",sec:"#ffaa00",glow:"#fff4cc"},{main:"#0a0033",sec:"#4444ff",glow:"#ccccff"},{main:"#2b002b",sec:"#ff00ff",glow:"#ffccff"}]:r<=12?[{main:"#002b1a",sec:"#00ffcc",glow:"#e6fff9"},{main:"#001a33",sec:"#33ccff",glow:"#e6f7ff"},{main:"#33001a",sec:"#ff3399",glow:"#ffe6f2"},{main:"#1a0033",sec:"#9933ff",glow:"#f2e6ff"}]:r<=15?[{main:"#000000",sec:"#ff0066",glow:"#ffffff"},{main:"#000000",sec:"#00ffff",glow:"#ffffff"},{main:"#000000",sec:"#ffff00",glow:"#ffffff"},{main:"#000000",sec:"#00ff00",glow:"#ffffff"}]:[{main:"#000000",sec:"#ffffff",glow:"#ffffff"},{main:"#000000",sec:"#ff3300",glow:"#ffffff"},{main:"#000000",sec:"#0066ff",glow:"#ffffff"},{main:"#000000",sec:"#cc00ff",glow:"#ffffff"}];var r;const s=t[Math.floor(Math.random()*t.length)];this.color=s.main,this.secondaryColor=s.sec,this.glowColor=s.glow;const n=1+8*Math.random();this.orbitRadius=n,this.orbitAngle=Math.random()*Math.PI*2;const o=(6e-4+.003*Math.random())*(.5+.5*this.energyLevel);this.orbitSpeed=o/(1.2*Math.sqrt(n)),Math.random()>.5&&(this.orbitSpeed*=-1),this.x=Math.cos(this.orbitAngle)*this.orbitRadius,this.y=Math.sin(this.orbitAngle)*this.orbitRadius,this.z=-40-20*Math.random(),this.targetZ=(Math.random()-.5)*(4+.4*e),this.size=(.3+.9*Math.random())*(1+.012*e),this.floatOffset=Math.random()*Math.PI*2,this.type=e<5?Math.random()>.1?"STAR":"BLOCK":e<10?Math.random()>.4?"STAR":Math.random()>.5?"PLANET":"BLOCK":Math.random()>.6?"PLANET":Math.random()>.3?"BLOCK":"STAR"}update(){this.orbitAngle+=this.orbitSpeed,this.x=Math.cos(this.orbitAngle)*this.orbitRadius,this.y=Math.sin(this.orbitAngle)*this.orbitRadius,this.z+=.05*(this.targetZ-this.z),this.floatOffset+=.6*this.energyLevel*.02}draw(t,r,s){const n=this.z+Math.sin(this.floatOffset)*(.5*this.energyLevel),o=i(this.x,this.y,n,r,s),a=this.size*(Math.min(r,s)/24);if(t.save(),t.translate(o.x,o.y),e>12){const e=.2*Math.sin(.005*Date.now()+10*this.seed)+.8;t.scale(e,e)}"STAR"===this.type?this.drawStar(t,a):"BLOCK"===this.type?this.drawBlock(t,a):this.drawPlanet(t,a),t.restore()}drawStar(e,t){const r=.4*Math.sin(.04*Date.now()*this.energyLevel+3e3*this.seed)+.6,s=t*r;e.shadowBlur=(30+10*this.energyLevel)*r,e.shadowColor=this.glowColor,e.beginPath(),e.moveTo(0,3*-s),e.lineTo(1.2*s,0),e.lineTo(0,3*s),e.lineTo(1.2*-s,0),e.closePath(),e.fillStyle=this.color,e.fill(),e.shadowBlur=0,e.fillStyle="#ffffff",e.beginPath(),e.arc(0,0,.7*s,0,2*Math.PI),e.fill()}drawBlock(e,t){const r=.577*t;e.beginPath(),e.moveTo(0,-r),e.lineTo(t,0),e.lineTo(0,r),e.lineTo(-t,0),e.closePath();const s=e.createLinearGradient(0,-r,0,r);s.addColorStop(0,this.glowColor),s.addColorStop(1,this.secondaryColor),e.fillStyle=s,e.fill(),e.beginPath(),e.moveTo(t,0),e.lineTo(t,t),e.lineTo(0,r+t),e.lineTo(0,r),e.closePath();const n=e.createLinearGradient(t,0,0,r+t);n.addColorStop(0,this.color),n.addColorStop(1,"#000000"),e.fillStyle=n,e.fill(),e.beginPath(),e.moveTo(-t,0),e.lineTo(-t,t),e.lineTo(0,r+t),e.lineTo(0,r),e.closePath(),e.fillStyle="rgba(0,0,0,0.85)",e.fill(),e.strokeStyle=this.glowColor+"CC",e.lineWidth=1+.1*this.energyLevel,e.stroke()}drawPlanet(t,r){const s=.12*Math.sin(.003*Date.now()+100*this.seed)+.88,n=.1*this.energyLevel,o=r*(2.4+n)*s,a=t.createRadialGradient(0,0,.6*r,0,0,o);a.addColorStop(0,this.glowColor+"99"),a.addColorStop(.4,this.secondaryColor+"44"),a.addColorStop(1,"transparent"),t.fillStyle=a,t.beginPath(),t.arc(0,0,o,0,2*Math.PI),t.fill();const i=t.createRadialGradient(-r/2.2,-r/2.2,.05*r,0,0,r);i.addColorStop(0,"#ffffff"),i.addColorStop(.15,this.glowColor),i.addColorStop(.45,this.secondaryColor),i.addColorStop(.85,this.color),i.addColorStop(1,"#000000"),t.beginPath(),t.arc(0,0,r,0,2*Math.PI),t.fillStyle=i,t.fill(),t.save(),t.beginPath(),t.arc(0,0,r,0,2*Math.PI);const l=Math.floor(187*s).toString(16).padStart(2,"0");t.strokeStyle=this.glowColor+l,t.lineWidth=2.5*(1+.6*n),t.stroke(),t.restore(),t.save(),t.clip();const c=3+Math.floor(.5*this.energyLevel);for(let e=0;e<c;e++){const s=500*this.seed+15*e+3e-4*Date.now(),n=Math.sin(s)*r*.8,o=Math.cos(1.3*s)*r*.6;t.beginPath(),t.ellipse(n,o,1.4*r,.4*r,this.seed*Math.PI+e,0,2*Math.PI),t.fillStyle=e%2==0?"rgba(255,255,255,0.45)":this.glowColor+"33",t.fill()}if(t.restore(),this.seed>.5-.01*e){const e=.06*Math.cos(.002*Date.now()+70*this.seed)+1;t.beginPath(),t.ellipse(0,0,3.6*r*e,1.4*r*e,Math.PI/6,0,2*Math.PI),t.strokeStyle=this.glowColor+"CC",t.lineWidth=1.5*this.energyLevel,t.stroke(),t.beginPath(),t.ellipse(0,0,3.2*r*e,1.2*r*e,Math.PI/6,0,2*Math.PI),t.strokeStyle=this.secondaryColor+"66",t.lineWidth=1*this.energyLevel,t.stroke()}}}const c=()=>{n.clearRect(0,0,s.width,s.height);const r=s.width/2,l=s.height/2,d=.9*Math.min(s.width,s.height);n.save(),n.translate(r,l),n.scale(1,.577);const u=(null==t?void 0:t.primary)||"#4338ca",h=(null==t?void 0:t.secondary)||"#1e1b4b",p=n.createRadialGradient(0,0,0,0,0,d);p.addColorStop(0,u+"88"),p.addColorStop(.4,u+"55"),p.addColorStop(.8,h+"22"),p.addColorStop(1,"transparent"),n.fillStyle=p,n.beginPath(),n.arc(0,0,d,0,2*Math.PI),n.fill(),n.restore();const m=.7*Math.sin(.0015*Date.now()),g=i(0,0,m,s.width,s.height),f=(3.5+.3*e)*(Math.min(s.width,s.height)/45),x=n.createRadialGradient(g.x,g.y,0,g.x,g.y,7*f);x.addColorStop(0,"#ffffff"),x.addColorStop(.2,u),x.addColorStop(.7,"transparent"),n.fillStyle=x,n.beginPath(),n.arc(g.x,g.y,7*f,0,2*Math.PI),n.fill(),a.sort((e,t)=>e.x+e.y-(t.x+t.y)),a.forEach(e=>{e.update(),e.draw(n,s.width,s.height)}),o=requestAnimationFrame(c)},d=()=>{const t=s.parentElement;t&&(s.width=t.clientWidth,s.height=t.clientHeight,(()=>{a=[];const t=Math.min(350,60+20*e);for(let r=0;r<t;r++)a.push(new l(e))})())};return window.addEventListener("resize",d),d(),c(),()=>{cancelAnimationFrame(o),window.removeEventListener("resize",d)}},[e,t]),a.jsxs("div",{className:"w-full h-full relative group overflow-hidden",children:[a.jsx("canvas",{ref:r,className:"w-full h-full block"}),a.jsx("div",{className:"absolute inset-0 pointer-events-none rounded-[4rem] shadow-[inset_0_0_250px_rgba(0,0,0,1)]"})]})},sa=({books:e,onSaveBook:t,onDeleteBook:r,onSyncBooks:s,cloudStatus:n})=>{const[o,i]=f.useState("LIST"),[l,c]=f.useState(null),[h,m]=f.useState(!1),[g,x]=f.useState(null),[b,v]=f.useState(""),[y,w]=f.useState("BOOK"),k=f.useRef(null),[N,j]=f.useState(0),[_,S]=f.useState(!1),[I,C]=f.useState("default"),T=e=>p(null,null,function*(){var t;const r=null==(t=e.target.files)?void 0:t[0];if(!r)return;if(!r.name.endsWith(".txt"))return void alert("Por favor, envie apenas arquivos .txt");x(r);const s=r.name.replace(/\.txt$/i,"");v(s)}),E=()=>p(null,null,function*(){var e;if(g&&b)try{const r=(yield(e=g,p(null,null,function*(){return new Promise((t,r)=>{const s=new FileReader;s.onload=e=>{var r;return t(null==(r=e.target)?void 0:r.result)},s.onerror=r,s.readAsText(e)})}))).split(/\s+/).filter(e=>e.length>0),s={id:Date.now().toString(),title:b,content:r,currentPosition:0,totalWords:r.length,wpm:300,fontSize:48,completed:!1,timeSpent:0,createdAt:Date.now(),type:y};t(s),x(null),v(""),i("LIST")}catch(r){console.error("Error parsing file:",r),alert("Erro ao processar arquivo")}}),A=(e,t,r)=>{const s=e.replace(/[^a-zA-ZÀ-ÿ]/g,""),n=s.length,o=/[.!?;:]$/.test(e),a=/,$/.test(e),i=/[-—–]/.test(e),l=/^[A-ZÀ-Ý]/.test(e),c=e===e.toUpperCase()&&n>1,d=/!/.test(e),u=/\?/.test(e),h=["amor","ódio","medo","morte","vida","guerra","paz","sangue","fogo","tempestade","trovão","relâmpago","explosão","grito","sussurro","segredo","revelação","traição","vingança","destino"].some(e=>s.toLowerCase().includes(e)),p=["correu","saltou","atacou","fugiu","gritou","explodiu","caiu","voou","disparou","lançou"].some(e=>s.toLowerCase().includes(e));return{length:n,isPunctuation:o,isComma:a,isDash:i,isCapitalized:l,isAllCaps:c,hasExclamation:d,hasQuestion:u,isEmotional:h,isAction:p,speedMultiplier:c?.7:h?.8:p?1.3:o?.6:a?.8:i?.85:n>12?.75:n>8?.85:n<3?1.2:1,pauseAfter:d||u?800:o?600:i?400:a?300:0}};f.useEffect(()=>{if(h&&l){const e=6e4/l.wpm,t=()=>{c(r=>{if(!r)return r;const s=r.currentPosition+1;if(s>=r.totalWords)return m(!1),u(d({},r),{completed:!0,completedAt:Date.now()});const n=r.content[r.currentPosition],o=A(n,r.currentPosition,r.content),a=e*o.speedMultiplier+o.pauseAfter;return k.current=setTimeout(t,a),j(e=>e+1),u(d({},r),{currentPosition:s,timeSpent:r.timeSpent+a/1e3})})};return t(),()=>{k.current&&clearTimeout(k.current)}}k.current&&clearTimeout(k.current)},[h,null==l?void 0:l.wpm]),f.useEffect(()=>{l&&l.currentPosition>0&&t(l)},[null==l?void 0:l.currentPosition]);const O=()=>{if(l){const e=u(d({},l),{completed:!0,completedAt:Date.now()});t(e),i("LIST")}},P=e=>{l&&c(u(d({},l),{wpm:Math.max(100,Math.min(1e3,l.wpm+e))}))},R=e=>{l&&c(u(d({},l),{fontSize:Math.max(24,Math.min(96,l.fontSize+e))}))},L=l?l.currentPosition/l.totalWords*100:0,M=l?(l.totalWords-l.currentPosition)/l.wpm:0;if("UPLOAD"===o)return a.jsxs("div",{className:"p-6 space-y-6",children:[a.jsx("div",{className:"flex items-center justify-between",children:a.jsxs("button",{onClick:()=>i("LIST"),className:"flex items-center gap-2 text-slate-400 hover:text-white transition-colors",children:[a.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:a.jsx("path",{strokeWidth:"2",d:"M15 19l-7-7 7-7"})}),a.jsx("span",{className:"text-sm font-bold uppercase tracking-wider",children:"Voltar"})]})}),a.jsx("div",{className:"max-w-2xl mx-auto space-y-6",children:a.jsxs("div",{className:"p-8 rounded-3xl bg-gradient-to-br from-slate-900/60 to-slate-800/60 border border-white/10 space-y-6",children:[a.jsx("h2",{className:"text-2xl font-black uppercase tracking-wider bg-gradient-to-r from-orange-400 to-amber-400 bg-clip-text text-transparent",children:"Novo Livro"}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-[8px] font-black uppercase tracking-[0.3em] text-orange-400/70 mb-3",children:"Arquivo de Texto"}),a.jsx("input",{type:"file",accept:".txt,text/plain",onChange:T,className:"w-full px-4 py-3 rounded-xl bg-white/5 border border-white/10 text-white text-sm focus:outline-none focus:border-orange-500/50"}),a.jsx("p",{className:"mt-2 text-xs text-slate-500",children:"Apenas arquivos .txt são suportados"})]}),g&&a.jsxs(a.Fragment,{children:[a.jsxs("div",{children:[a.jsx("label",{className:"block text-[8px] font-black uppercase tracking-[0.3em] text-orange-400/70 mb-3",children:"Título"}),a.jsx("input",{type:"text",value:b,onChange:e=>v(e.target.value),className:"w-full px-4 py-3 rounded-xl bg-white/5 border border-white/10 text-white text-sm focus:outline-none focus:border-orange-500/50",placeholder:"Nome do livro"})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-[8px] font-black uppercase tracking-[0.3em] text-orange-400/70 mb-3",children:"Tipo"}),a.jsx("div",{className:"grid grid-cols-3 gap-3",children:["BOOK","ARTICLE","MAGAZINE"].map(e=>a.jsxs("button",{onClick:()=>w(e),className:"py-3 rounded-xl text-xs font-black uppercase border-2 transition-all duration-300 "+(y===e?"bg-orange-500/20 border-orange-500/50 text-orange-300":"bg-white/5 border-white/10 text-slate-500 hover:border-orange-500/30"),children:["BOOK"===e&&"📚 Livro","ARTICLE"===e&&"📄 Artigo","MAGAZINE"===e&&"📰 Revista"]},e))})]}),a.jsx("button",{onClick:E,className:"w-full py-4 rounded-xl bg-gradient-to-r from-orange-500/20 to-amber-500/20 border border-orange-500/30 text-orange-300 text-sm font-black uppercase tracking-wider hover:from-orange-500/30 hover:to-amber-500/30 transition-all duration-300",children:"+ Adicionar Livro"})]})]})})]});if("READING"===o&&l)return a.jsxs("div",{className:"h-screen flex flex-col bg-gradient-to-br from-slate-950 to-slate-900",children:[a.jsxs("div",{className:"p-4 border-b border-white/10 flex items-center justify-between",children:[a.jsxs("button",{onClick:()=>{i("LIST"),m(!1)},className:"flex items-center gap-2 text-slate-400 hover:text-white transition-colors",children:[a.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:a.jsx("path",{strokeWidth:"2",d:"M15 19l-7-7 7-7"})}),a.jsx("span",{className:"text-sm font-bold",children:"Sair"})]}),a.jsxs("div",{className:"flex items-center gap-4",children:[a.jsxs("div",{className:"flex items-center gap-2 bg-white/5 rounded-xl px-3 py-2",children:[a.jsx("button",{onClick:()=>R(-4),className:"text-slate-400 hover:text-white transition-colors",children:a.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:a.jsx("path",{strokeWidth:"2",d:"M20 12H4"})})}),a.jsxs("span",{className:"text-xs font-bold text-orange-400",children:[l.fontSize,"px"]}),a.jsx("button",{onClick:()=>R(4),className:"text-slate-400 hover:text-white transition-colors",children:a.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:a.jsx("path",{strokeWidth:"2",d:"M12 4v16m8-8H4"})})})]}),a.jsxs("div",{className:"flex items-center gap-2 bg-white/5 rounded-xl px-3 py-2",children:[a.jsx("button",{onClick:()=>P(-50),className:"text-slate-400 hover:text-white transition-colors",children:a.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:a.jsx("path",{strokeWidth:"2",d:"M15 19l-7-7 7-7"})})}),a.jsxs("span",{className:"text-xs font-bold text-orange-400",children:[l.wpm," WPM"]}),a.jsx("button",{onClick:()=>P(50),className:"text-slate-400 hover:text-white transition-colors",children:a.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:a.jsx("path",{strokeWidth:"2",d:"M9 5l7 7-7 7"})})})]}),a.jsx("button",{onClick:()=>S(!_),className:"px-4 py-2 rounded-xl border text-xs font-bold transition-all "+(_?"bg-purple-500/20 border-purple-500/50 text-purple-300 shadow-[0_0_20px_rgba(168,85,247,0.4)]":"bg-white/5 border-white/10 text-slate-400 hover:border-purple-500/30"),title:"Ativa efeitos visuais intensos",children:_?"🚀 Turbo ON":"⚡ Turbo"}),a.jsx("div",{className:"flex items-center gap-1 bg-white/5 rounded-xl px-2 py-1",children:["default","rainbow","fire","ocean"].map(e=>a.jsx("button",{onClick:()=>C(e),className:"w-8 h-8 rounded-lg transition-all "+(I===e?"scale-110 ring-2 ring-white/30":"opacity-50 hover:opacity-100"),style:{background:"rainbow"===e?"linear-gradient(135deg, #f87171, #fbbf24, #34d399, #60a5fa, #a78bfa)":"fire"===e?"linear-gradient(135deg, #ef4444, #f97316, #fb923c)":"ocean"===e?"linear-gradient(135deg, #06b6d4, #3b82f6, #8b5cf6)":"linear-gradient(135deg, #64748b, #94a3b8)"},title:e},e))}),a.jsx("button",{onClick:O,className:"px-4 py-2 rounded-xl bg-green-500/20 border border-green-500/30 text-green-300 text-xs font-bold hover:bg-green-500/30 transition-all",children:"✓ Concluir"})]})]}),a.jsxs("div",{className:"flex-1 flex items-center justify-center p-8 relative overflow-hidden",children:[a.jsx("div",{className:"absolute inset-0 pointer-events-none opacity-30",style:{background:_?"radial-gradient(circle at 50% 50%, rgba(251, 146, 60, 0.3) 0%, transparent 50%), radial-gradient(circle at 30% 70%, rgba(34, 211, 238, 0.2) 0%, transparent 50%)":"radial-gradient(ellipse at 40% 50%, rgba(251, 146, 60, 0.15) 0%, transparent 60%)"}}),(()=>{const e=l.content[l.currentPosition]||"",t=A(e,l.currentPosition,l.content);let r="text-white",s="",n=1;return"rainbow"===I?(r="",s=`0 0 30px hsla(${30*l.currentPosition%360}, 70%, 50%, 0.6)`):"fire"===I?(r="",s=`0 0 40px ${["#ef4444","#f97316","#fb923c","#fbbf24"][l.currentPosition%4]}80`):"ocean"===I&&(r="",s=`0 0 35px ${["#06b6d4","#3b82f6","#8b5cf6","#6366f1"][l.currentPosition%4]}80`),_?t.isAllCaps?(r=r||"text-orange-400",s=s||"0 0 60px rgba(251, 146, 60, 1)",n=1.4):t.isEmotional?(r=r||"text-red-400",s=s||"0 0 50px rgba(248, 113, 113, 0.9)"):t.isAction&&(r=r||"text-cyan-400",s=s||"0 0 45px rgba(34, 211, 238, 0.8)"):t.isAllCaps?(r=r||"text-orange-400",s=s||"0 0 40px rgba(251, 146, 60, 0.8)",n=1.2):t.isEmotional?(r=r||"text-red-400",s=s||"0 0 30px rgba(248, 113, 113, 0.6)"):t.isAction&&(r=r||"text-cyan-400",s=s||"0 0 25px rgba(34, 211, 238, 0.5)"),a.jsx("div",{className:`text-center font-bold tracking-wide ${r}`,style:{fontSize:`${l.fontSize}px`,textShadow:s,transform:1!==n?`scale(${n})`:void 0,willChange:"contents"},children:e},`word-${l.currentPosition}-${N}`)})(),a.jsxs("div",{className:"absolute bottom-8 left-1/2 -translate-x-1/2 flex items-center gap-2 px-4 py-2 rounded-full bg-black/50 backdrop-blur-sm border border-white/10",children:[a.jsx("div",{className:"flex gap-1",children:[...Array(5)].map((e,t)=>{const r=Math.floor(l.wpm/200*5);return a.jsx("div",{className:"w-1 rounded-full transition-all duration-300 "+(t<r?"bg-orange-400 shadow-[0_0_8px_rgba(251,146,60,0.6)]":"bg-white/20"),style:{height:8+4*t+"px"}},t)})}),a.jsx("span",{className:"text-xs font-bold text-orange-400",children:l.wpm})]})]}),a.jsxs("div",{className:"p-6 border-t border-white/10 space-y-4",children:[a.jsx("div",{className:"relative h-2 bg-white/10 rounded-full overflow-hidden",children:a.jsx("div",{className:"absolute inset-y-0 left-0 bg-gradient-to-r from-orange-500 to-amber-500 transition-all duration-300",style:{width:`${L}%`}})}),a.jsxs("div",{className:"flex items-center justify-between text-xs text-slate-400",children:[a.jsxs("span",{children:[l.currentPosition," / ",l.totalWords," palavras"]}),a.jsxs("span",{children:[Math.round(M)," min restantes"]})]}),a.jsx("div",{className:"flex justify-center",children:a.jsx("button",{onClick:()=>m(!h),className:"w-20 h-20 rounded-full flex items-center justify-center transition-all duration-300 "+(h?"bg-red-500/20 border-2 border-red-500/50 text-red-300 hover:bg-red-500/30":"bg-orange-500/20 border-2 border-orange-500/50 text-orange-300 hover:bg-orange-500/30"),children:h?a.jsx("svg",{className:"w-8 h-8",fill:"currentColor",viewBox:"0 0 24 24",children:a.jsx("path",{d:"M6 4h4v16H6V4zm8 0h4v16h-4V4z"})}):a.jsx("svg",{className:"w-8 h-8 ml-1",fill:"currentColor",viewBox:"0 0 24 24",children:a.jsx("path",{d:"M8 5v14l11-7z"})})})})]})]});const D=e.filter(e=>!e.completed),$=e.filter(e=>e.completed);return a.jsxs("div",{className:"min-h-screen bg-gradient-to-br from-slate-950 via-slate-900 to-slate-950 p-6 space-y-8",children:[a.jsxs("header",{className:"flex flex-col md:flex-row justify-between items-start md:items-end gap-4 border-b border-white/5 pb-6",children:[a.jsxs("div",{className:"space-y-1",children:[a.jsx("h1",{className:"text-3xl md:text-5xl font-space font-bold tracking-tighter text-white uppercase leading-none",children:"Fast Reader"}),a.jsx("p",{className:"text-[8px] md:text-[9px] tracking-[0.5em] text-slate-500 font-bold uppercase italic opacity-60",children:"⚡ Leitura Quântica • Maximize sua Absorção de Conhecimento"})]}),a.jsxs("div",{className:"flex items-center gap-3",children:[s&&a.jsxs("button",{onClick:s,disabled:"syncing"===n,className:"flex items-center gap-2 text-[8px] font-black border px-4 py-3 rounded-2xl uppercase tracking-[0.3em] active:scale-95 transition-all hover:opacity-80 disabled:opacity-50 disabled:cursor-not-allowed",style:{color:"synced"===n?"#10b981":"syncing"===n?"#f59e0b":"#ef4444",borderColor:"synced"===n?"rgba(16, 185, 129, 0.2)":"syncing"===n?"rgba(245, 158, 11, 0.2)":"rgba(239, 68, 68, 0.2)",backgroundColor:"synced"===n?"rgba(16, 185, 129, 0.05)":"syncing"===n?"rgba(245, 158, 11, 0.05)":"rgba(239, 68, 68, 0.05)"},title:"offline"===n?"Clique para sincronizar com Supabase":"synced"===n?"Dados sincronizados na nuvem":"Sincronizando...",children:["synced"===n&&"☁️ Sincronizado","syncing"===n&&"🔄 Sincronizando...","offline"===n&&"📤 Sync Cloud"]}),a.jsx("button",{onClick:()=>i("UPLOAD"),className:"w-full md:w-auto text-[8px] font-black text-orange-400 border border-orange-400/20 px-6 py-3 rounded-2xl uppercase tracking-[0.3em] bg-orange-400/5 active:scale-95 transition-all hover:bg-orange-400/10 hover:border-orange-400/30",children:"+ Adicionar Livro"})]})]}),a.jsxs("div",{className:"grid grid-cols-2 lg:grid-cols-4 gap-3 md:gap-4",children:[a.jsxs("div",{className:"group relative p-5 rounded-2xl bg-white/[0.03] border border-white/10 hover:border-orange-400/30 transition-all duration-300",children:[a.jsx("div",{className:"absolute inset-0 rounded-2xl bg-gradient-to-br from-orange-500/5 to-transparent opacity-0 group-hover:opacity-100 transition-opacity duration-300"}),a.jsxs("div",{className:"relative space-y-2",children:[a.jsx("div",{className:"text-[10px] font-black text-orange-400/70 uppercase tracking-[0.2em]",children:"📖 Lendo"}),a.jsx("div",{className:"text-4xl font-space font-bold text-orange-400",children:D.length})]})]}),a.jsxs("div",{className:"group relative p-5 rounded-2xl bg-white/[0.03] border border-white/10 hover:border-emerald-400/30 transition-all duration-300",children:[a.jsx("div",{className:"absolute inset-0 rounded-2xl bg-gradient-to-br from-emerald-500/5 to-transparent opacity-0 group-hover:opacity-100 transition-opacity duration-300"}),a.jsxs("div",{className:"relative space-y-2",children:[a.jsx("div",{className:"text-[10px] font-black text-emerald-400/70 uppercase tracking-[0.2em]",children:"✓ Concluídos"}),a.jsx("div",{className:"text-4xl font-space font-bold text-emerald-400",children:$.length})]})]}),a.jsxs("div",{className:"group relative p-5 rounded-2xl bg-white/[0.03] border border-white/10 hover:border-cyan-400/30 transition-all duration-300",children:[a.jsx("div",{className:"absolute inset-0 rounded-2xl bg-gradient-to-br from-cyan-500/5 to-transparent opacity-0 group-hover:opacity-100 transition-opacity duration-300"}),a.jsxs("div",{className:"relative space-y-2",children:[a.jsx("div",{className:"text-[10px] font-black text-cyan-400/70 uppercase tracking-[0.2em]",children:"📝 Palavras"}),a.jsx("div",{className:"text-4xl font-space font-bold text-cyan-400",children:e.reduce((e,t)=>e+t.totalWords,0).toLocaleString()})]})]}),a.jsxs("div",{className:"group relative p-5 rounded-2xl bg-white/[0.03] border border-white/10 hover:border-violet-400/30 transition-all duration-300",children:[a.jsx("div",{className:"absolute inset-0 rounded-2xl bg-gradient-to-br from-violet-500/5 to-transparent opacity-0 group-hover:opacity-100 transition-opacity duration-300"}),a.jsxs("div",{className:"relative space-y-2",children:[a.jsx("div",{className:"text-[10px] font-black text-violet-400/70 uppercase tracking-[0.2em]",children:"⏱️ Minutos"}),a.jsx("div",{className:"text-4xl font-space font-bold text-violet-400",children:Math.round(e.reduce((e,t)=>e+t.timeSpent,0)/60)})]})]})]}),D.length>0&&a.jsxs("div",{className:"space-y-4",children:[a.jsx("h2",{className:"text-[10px] font-black text-orange-400/70 uppercase tracking-[0.3em]",children:"📖 Lendo Agora"}),a.jsx("div",{className:"grid gap-3",children:D.map(e=>a.jsxs("div",{className:"group relative p-5 rounded-2xl bg-white/[0.03] border border-white/10 hover:border-orange-400/30 transition-all duration-300 cursor-pointer",onClick:()=>(e=>{c(e),i("READING")})(e),children:[a.jsx("div",{className:"absolute inset-0 rounded-2xl bg-gradient-to-br from-orange-500/5 to-transparent opacity-0 group-hover:opacity-100 transition-opacity duration-300"}),a.jsxs("div",{className:"relative flex items-start justify-between gap-4",children:[a.jsxs("div",{className:"flex-1 space-y-3",children:[a.jsxs("div",{className:"flex items-start gap-3",children:[a.jsxs("div",{className:"text-2xl opacity-70",children:["BOOK"===e.type&&"📚","ARTICLE"===e.type&&"📄","MAGAZINE"===e.type&&"📰"]}),a.jsxs("div",{className:"flex-1 space-y-1",children:[a.jsx("h3",{className:"text-base font-space font-bold text-white group-hover:text-orange-400 transition-colors",children:e.title}),a.jsxs("div",{className:"flex items-center gap-3 text-[8px] text-slate-500 uppercase tracking-wider",children:[a.jsx("span",{className:"font-black",children:e.type}),a.jsx("span",{children:"•"}),a.jsxs("span",{children:[e.totalWords.toLocaleString()," palavras"]}),a.jsx("span",{children:"•"}),a.jsxs("span",{children:[Math.round(e.timeSpent/60)," min"]})]})]})]}),a.jsxs("div",{className:"space-y-1.5",children:[a.jsx("div",{className:"relative h-1.5 bg-white/5 rounded-full overflow-hidden",children:a.jsx("div",{className:"absolute inset-y-0 left-0 bg-gradient-to-r from-orange-500 to-amber-500 rounded-full transition-all duration-500",style:{width:e.currentPosition/e.totalWords*100+"%"}})}),a.jsxs("div",{className:"flex items-center justify-between text-[8px] font-black uppercase tracking-wider",children:[a.jsxs("span",{className:"text-slate-500",children:[Math.round(e.currentPosition/e.totalWords*100),"% completo"]}),a.jsxs("span",{className:"text-orange-400",children:[e.currentPosition.toLocaleString()," / ",e.totalWords.toLocaleString()]})]})]})]}),a.jsx("button",{onClick:t=>{t.stopPropagation(),r(e.id)},className:"p-2.5 rounded-xl bg-red-500/10 border border-red-400/20 text-red-400 hover:bg-red-500/20 hover:border-red-400/30 transition-all active:scale-95",children:a.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:a.jsx("path",{strokeWidth:"2",d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})})})]})]},e.id))})]}),$.length>0&&a.jsxs("div",{className:"space-y-4",children:[a.jsx("h2",{className:"text-[10px] font-black text-emerald-400/70 uppercase tracking-[0.3em]",children:"✓ Concluídos"}),a.jsx("div",{className:"grid gap-3",children:$.map(e=>a.jsxs("div",{className:"group relative p-5 rounded-2xl bg-white/[0.03] border border-white/10 hover:border-emerald-400/30 transition-all duration-300",children:[a.jsx("div",{className:"absolute inset-0 rounded-2xl bg-gradient-to-br from-emerald-500/5 to-transparent opacity-0 group-hover:opacity-100 transition-opacity duration-300"}),a.jsxs("div",{className:"relative flex items-start justify-between gap-4",children:[a.jsx("div",{className:"flex-1 space-y-1",children:a.jsxs("div",{className:"flex items-start gap-3",children:[a.jsx("div",{className:"text-2xl opacity-70",children:"✓"}),a.jsxs("div",{className:"flex-1 space-y-1",children:[a.jsx("h3",{className:"text-base font-space font-bold text-emerald-400",children:e.title}),a.jsxs("div",{className:"flex items-center gap-3 text-[8px] text-slate-500 uppercase tracking-wider",children:[a.jsxs("span",{className:"font-black text-emerald-400/70",children:["BOOK"===e.type&&"📚 Livro","ARTICLE"===e.type&&"📄 Artigo","MAGAZINE"===e.type&&"📰 Revista"]}),a.jsx("span",{children:"•"}),a.jsxs("span",{children:[e.totalWords.toLocaleString()," palavras"]}),a.jsx("span",{children:"•"}),a.jsxs("span",{className:"text-emerald-400 font-black",children:[Math.round(e.timeSpent/60)," min gastos"]})]})]})]})}),a.jsx("button",{onClick:()=>r(e.id),className:"p-2.5 rounded-xl bg-red-500/10 border border-red-400/20 text-red-400 hover:bg-red-500/20 hover:border-red-400/30 transition-all active:scale-95",children:a.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:a.jsx("path",{strokeWidth:"2",d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})})})]})]},e.id))})]}),0===e.length&&a.jsxs("div",{className:"py-20 text-center space-y-6",children:[a.jsx("div",{className:"text-7xl opacity-30",children:"📚"}),a.jsxs("div",{className:"space-y-2",children:[a.jsx("h3",{className:"text-xl font-space font-bold text-white uppercase",children:"Biblioteca Vazia"}),a.jsx("p",{className:"text-xs text-slate-500 max-w-md mx-auto",children:"Adicione seu primeiro livro para começar sua jornada de leitura quântica"})]}),a.jsx("button",{onClick:()=>i("UPLOAD"),className:"text-[8px] font-black text-orange-400 border border-orange-400/20 px-6 py-3 rounded-2xl uppercase tracking-[0.3em] bg-orange-400/5 active:scale-95 transition-all hover:bg-orange-400/10 hover:border-orange-400/30",children:"+ Adicionar Livro"})]})]})},na="manga",oa="default_user",aa=(e,t)=>e.name.localeCompare(t.name,void 0,{numeric:!0}),ia=e=>p(null,null,function*(){const t=yo(_o,`manga/${oa}/${e}`);var r;const s=(yield(r=t,io(r=_(r)))).items.sort(aa);return Promise.all(s.map(e=>vo(e)))}),la=({cloudStatus:e="synced"})=>{const[t,r]=f.useState("LIST"),[s,n]=f.useState([]),[o,i]=f.useState(!1),[l,c]=f.useState(null),[h,m]=f.useState([]),[g,x]=f.useState("");f.useEffect(()=>{"LIST"===t&&p(null,null,function*(){i(!0);try{const e=yield p(null,null,function*(){const e=ne(ae(jo,na),oe("userId","==",oa));return(yield ie(e)).docs.map(e=>{var t;const r=e.data();return{id:e.id,title:r.title,pageCount:r.pageCount,coverUrl:r.coverUrl,createdAt:(null==(t=r.createdAt)?void 0:t.toMillis)?r.createdAt.toMillis():void 0}}).sort((e,t)=>(t.createdAt||0)-(e.createdAt||0))});n(e)}catch(e){console.error("Erro ao carregar mangás:",e)}finally{i(!1)}})},[t]);const b=()=>p(null,null,function*(){if(g&&0!==h.length){i(!0);try{yield(e=g,t=h,p(null,null,function*(){if(!t.length)throw new Error("Nenhuma imagem selecionada");const r=crypto.randomUUID(),s=[...t].sort(aa),n=`manga/${oa}/${r}`;let o;yield Promise.all(s.map((e,t)=>p(null,null,function*(){const r=(e.name||`page_${t+1}`).replace(/[^a-zA-Z0-9._-]/g,"_"),s=`${String(t+1).padStart(4,"0")}_${r}`,a=yo(_o,`${n}/${s}`);yield bo(a,e),0===t&&(o=yield vo(a))})));const a={id:r,title:e,pageCount:s.length,coverUrl:o};return yield ee(Q(jo,na,r),u(d({},a),{userId:oa,createdAt:te()})),a})),m([]),x(""),r("LIST"),alert("✅ Manga enviado com sucesso!")}catch(s){console.error("Erro ao fazer upload:",s),alert("❌ Erro ao fazer upload do manga")}finally{i(!1)}var e,t}else alert("Defina um título e selecione imagens")}),v=e=>{if(!l)return;const{readingMode:t,currentPage:r,pages:s}=l;let n=r;n="RTL"===t?"next"===e?r-1:r+1:"next"===e?r+1:r-1,n>=0&&n<s.length&&c(u(d({},l),{currentPage:n}))},y=()=>{l&&c(u(d({},l),{webtoonMode:!l.webtoonMode,currentPage:0}))},w=e=>{if(l){const t=Math.max(50,Math.min(200,l.scale+e));c(u(d({},l),{scale:t}))}},k=()=>{l&&c(u(d({},l),{readingMode:"RTL"===l.readingMode?"LTR":"RTL"}))};if(f.useEffect(()=>{if("READING"!==t)return;const e=e=>{"ArrowLeft"===e.key?(e.preventDefault(),v("prev")):"ArrowRight"===e.key?(e.preventDefault(),v("next")):"PageUp"===e.key?(e.preventDefault(),v("prev")):"PageDown"===e.key?(e.preventDefault(),v("next")):"+"===e.key||"="===e.key?(e.preventDefault(),w(10)):"-"===e.key?(e.preventDefault(),w(-10)):"m"===e.key||"M"===e.key?(e.preventDefault(),k()):"w"!==e.key&&"W"!==e.key||(e.preventDefault(),y())};return window.addEventListener("keydown",e),()=>window.removeEventListener("keydown",e)},[t,l]),"UPLOAD"===t)return a.jsxs("div",{className:"max-w-4xl mx-auto p-6 space-y-6",children:[a.jsxs("button",{onClick:()=>r("LIST"),className:"flex items-center gap-2 text-slate-400 hover:text-white transition-colors mb-6",children:[a.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:a.jsx("path",{strokeWidth:"2",d:"M15 19l-7-7 7-7"})}),"Voltar"]}),a.jsxs("div",{className:"space-y-6 p-8 rounded-3xl bg-gradient-to-br from-slate-900/60 to-slate-800/60 border border-white/10",children:[a.jsx("h2",{className:"text-2xl font-black uppercase tracking-wider bg-gradient-to-r from-red-400 to-pink-400 bg-clip-text text-transparent",children:"📖 Upload de Manga"}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-[8px] font-black uppercase tracking-[0.3em] text-red-400/70 mb-3",children:"Título do Manga"}),a.jsx("input",{type:"text",value:g,onChange:e=>x(e.target.value),className:"w-full px-4 py-3 rounded-xl bg-white/5 border border-white/10 text-white text-sm focus:outline-none focus:border-red-500/50",placeholder:"Ex: One Piece Ch. 1001"})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-[8px] font-black uppercase tracking-[0.3em] text-red-400/70 mb-3",children:"Selecione as Imagens"}),a.jsxs("label",{className:"flex flex-col items-center justify-center w-full p-8 border-2 border-dashed border-red-500/30 rounded-2xl cursor-pointer hover:border-red-500/50 transition-colors",children:[a.jsxs("div",{className:"text-center space-y-2",children:[a.jsx("svg",{className:"w-12 h-12 mx-auto text-red-400/50",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:a.jsx("path",{strokeWidth:"2",d:"M12 4v16m8-8H4"})}),a.jsx("p",{className:"text-sm font-bold text-red-400",children:"Clique ou arraste imagens aqui"}),a.jsxs("p",{className:"text-xs text-slate-500",children:[h.length," imagem(ns) selecionada(s)"]})]}),a.jsx("input",{type:"file",multiple:!0,accept:"image/*",onChange:e=>m(Array.from(e.target.files||[])),className:"hidden"})]})]}),h.length>0&&a.jsxs("div",{className:"space-y-3",children:[a.jsx("p",{className:"text-xs font-bold text-slate-400",children:"Imagens selecionadas:"}),a.jsx("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-3 max-h-[300px] overflow-y-auto",children:h.map((e,t)=>a.jsxs("div",{className:"relative group",children:[a.jsx("img",{src:URL.createObjectURL(e),alt:`Page ${t+1}`,className:"w-full h-auto rounded-lg border border-white/10 object-cover"}),a.jsx("div",{className:"absolute inset-0 bg-black/50 opacity-0 group-hover:opacity-100 transition-opacity rounded-lg flex items-center justify-center",children:a.jsxs("span",{className:"text-white text-xs font-bold",children:["#",t+1]})})]},t))})]}),a.jsx("button",{onClick:b,disabled:o||!g||0===h.length,className:"w-full py-4 rounded-xl bg-gradient-to-r from-red-500/20 to-pink-500/20 border border-red-500/30 text-red-300 text-sm font-black uppercase tracking-wider hover:from-red-500/30 hover:to-pink-500/30 disabled:opacity-50 disabled:cursor-not-allowed transition-all",children:o?"📤 Carregando...":"✓ Fazer Upload"})]})]});if("READING"===t&&l){const{manga:e,pages:t,currentPage:s,scale:n,readingMode:o,webtoonMode:i}=l,d=(s+1)/t.length*100;return a.jsxs("div",{className:"min-h-screen bg-black flex flex-col",children:[a.jsxs("div",{className:"bg-slate-950 border-b border-white/10 px-6 py-4 flex items-center justify-between gap-4",children:[a.jsxs("button",{onClick:()=>{r("LIST"),c(null)},className:"flex items-center gap-2 text-slate-400 hover:text-white transition-colors",children:[a.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:a.jsx("path",{strokeWidth:"2",d:"M15 19l-7-7 7-7"})}),a.jsx("span",{className:"text-sm font-bold",children:"Sair"})]}),a.jsx("h2",{className:"text-white font-bold flex-1 text-center truncate",children:e.title}),a.jsxs("div",{className:"flex items-center gap-3",children:[a.jsx("button",{onClick:k,title:"Modo: "+("RTL"===o?"Manga (RTL)":"Webtoon (LTR)"),className:"px-3 py-2 rounded-lg bg-white/10 border border-white/20 text-sm font-bold text-white hover:bg-white/20 transition-all",children:"RTL"===o?"📖 RTL":"📘 LTR"}),a.jsx("button",{onClick:y,title:"Ativar rolagem vertical contínua",className:"px-3 py-2 rounded-lg text-sm font-bold transition-all "+(i?"bg-red-500/20 border border-red-500/50 text-red-300":"bg-white/10 border border-white/20 text-white hover:bg-white/20"),children:"⬇️ Webtoon"}),a.jsxs("div",{className:"flex items-center gap-2 bg-white/10 rounded-lg px-2 py-2",children:[a.jsx("button",{onClick:()=>w(-10),className:"text-white hover:text-red-400 transition-colors",children:a.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:a.jsx("path",{strokeWidth:"2",d:"M20 12H4"})})}),a.jsxs("span",{className:"text-xs font-bold text-red-400 w-10 text-center",children:[n,"%"]}),a.jsx("button",{onClick:()=>w(10),className:"text-white hover:text-red-400 transition-colors",children:a.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:a.jsx("path",{strokeWidth:"2",d:"M12 4v16m8-8H4"})})})]})]})]}),a.jsx("div",{className:"flex-1 overflow-hidden flex items-center justify-center p-4",children:i?a.jsx("div",{className:"w-full max-w-2xl h-full overflow-y-auto space-y-4 py-4",children:a.jsx("img",{src:t[s],alt:`Página ${s+1}`,style:{maxWidth:"100%",height:"auto"},className:"mx-auto rounded-lg"})}):a.jsxs("div",{className:"flex items-center justify-center gap-4",children:["RTL"===o&&s>0&&a.jsx("img",{src:t[s-1],alt:`Página ${s}`,style:{maxHeight:"100%",maxWidth:"45%",transform:"scaleX(-1)"},className:"rounded-lg border-2 border-white/10"}),a.jsx("img",{src:t[s],alt:`Página ${s+1}`,style:{maxHeight:"100%",maxWidth:"RTL"===o&&s>0?"45%":"90%"},className:"rounded-lg"}),"LTR"===o&&s<t.length-1&&a.jsx("img",{src:t[s+1],alt:`Página ${s+2}`,style:{maxHeight:"100%",maxWidth:"45%"},className:"rounded-lg border-2 border-white/10"})]})}),a.jsxs("div",{className:"bg-slate-950 border-t border-white/10 px-6 py-4 space-y-4",children:[a.jsxs("div",{className:"space-y-2",children:[a.jsx("div",{className:"relative h-2 bg-white/10 rounded-full overflow-hidden",children:a.jsx("div",{className:"absolute inset-y-0 left-0 bg-gradient-to-r from-red-500 to-pink-500 transition-all duration-300",style:{width:`${d}%`}})}),a.jsxs("div",{className:"flex items-center justify-between text-xs text-slate-400",children:[a.jsxs("span",{children:["Página ",s+1," / ",t.length]}),a.jsxs("span",{children:[Math.round(d),"%"]})]})]}),a.jsxs("div",{className:"flex gap-3 justify-center",children:[a.jsxs("button",{onClick:()=>v("prev"),disabled:"RTL"===o?s>=t.length-1:0===s,className:"flex items-center gap-2 px-6 py-3 rounded-xl bg-red-500/10 border border-red-500/30 text-red-400 hover:bg-red-500/20 disabled:opacity-30 disabled:cursor-not-allowed transition-all",children:[a.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:a.jsx("path",{strokeWidth:"2",d:"M15 19l-7-7 7-7"})}),"Anterior"]}),a.jsxs("button",{onClick:()=>v("next"),disabled:"RTL"===o?0===s:s>=t.length-1,className:"flex items-center gap-2 px-6 py-3 rounded-xl bg-red-500/10 border border-red-500/30 text-red-400 hover:bg-red-500/20 disabled:opacity-30 disabled:cursor-not-allowed transition-all",children:["Próxima",a.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:a.jsx("path",{strokeWidth:"2",d:"M9 5l7 7-7 7"})})]})]}),a.jsx("p",{className:"text-center text-[8px] text-slate-600 uppercase tracking-wider",children:"⮜ Setas / PageUp/Down | +/- Zoom | M (modo) | W (webtoon)"})]})]})}return a.jsxs("div",{className:"min-h-screen bg-gradient-to-br from-slate-950 via-slate-900 to-slate-950 p-6 space-y-8",children:[a.jsxs("header",{className:"flex flex-col md:flex-row justify-between items-start md:items-end gap-4 border-b border-red-500/10 pb-6",children:[a.jsxs("div",{className:"space-y-1",children:[a.jsx("h1",{className:"text-3xl md:text-5xl font-space font-bold tracking-tighter text-white uppercase leading-none",children:"Manga Reader"}),a.jsx("p",{className:"text-[8px] md:text-[9px] tracking-[0.5em] text-slate-500 font-bold uppercase italic opacity-60",children:"🎨 Leitor Otimizado para Mangá & Manhwa"})]}),a.jsx("button",{onClick:()=>r("UPLOAD"),className:"w-full md:w-auto text-[8px] font-black text-red-400 border border-red-400/20 px-6 py-3 rounded-2xl uppercase tracking-[0.3em] bg-red-400/5 active:scale-95 transition-all hover:bg-red-400/10 hover:border-red-400/30",children:"+ Upload Manga"})]}),o&&a.jsxs("div",{className:"text-center space-y-3",children:[a.jsx("div",{className:"inline-block animate-spin rounded-full h-12 w-12 border-4 border-red-400 border-t-transparent"}),a.jsx("p",{className:"text-slate-400 font-space text-sm",children:"Carregando mangás..."})]}),!o&&0===s.length&&a.jsxs("div",{className:"py-20 text-center space-y-6",children:[a.jsx("div",{className:"text-7xl opacity-30",children:"📖"}),a.jsx("p",{className:"text-slate-400",children:"Nenhum mangá no momento"}),a.jsx("button",{onClick:()=>r("UPLOAD"),className:"text-[8px] font-black text-red-400 border border-red-400/20 px-6 py-3 rounded-2xl uppercase tracking-[0.3em] bg-red-400/5 active:scale-95 transition-all hover:bg-red-400/10 hover:border-red-400/30",children:"+ Upload Manga"})]}),!o&&s.length>0&&a.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:s.map(e=>a.jsxs("div",{className:"group relative overflow-hidden rounded-2xl bg-gradient-to-br from-slate-800/50 to-slate-900/50 border border-white/10 hover:border-red-500/30 transition-all duration-300 cursor-pointer",onClick:()=>(e=>p(null,null,function*(){i(!0);try{const t=yield ia(e.id);c({manga:e,pages:t,currentPage:0,scale:100,readingMode:"RTL",webtoonMode:!1}),r("READING")}catch(t){console.error("Erro ao carregar páginas:",t),alert("Erro ao carregar manga")}finally{i(!1)}}))(e),children:[e.coverUrl?a.jsx("img",{src:e.coverUrl,alt:e.title,className:"w-full aspect-[3/4] object-cover group-hover:scale-105 transition-transform duration-300"}):a.jsx("div",{className:"w-full aspect-[3/4] bg-gradient-to-br from-red-500/20 to-pink-500/20 flex items-center justify-center",children:a.jsx("svg",{className:"w-16 h-16 text-red-400/30",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:a.jsx("path",{strokeWidth:"2",d:"M4 16l4.586-4.586a2 2 0 012.828 0L16 16m-2-2l1.586-1.586a2 2 0 012.828 0L20 14m-6-6h.01M6 20h12a2 2 0 002-2V6a2 2 0 00-2-2H6a2 2 0 00-2 2v12a2 2 0 002 2z"})})}),a.jsxs("div",{className:"absolute inset-0 bg-gradient-to-t from-black/80 to-transparent opacity-0 group-hover:opacity-100 transition-opacity duration-300 flex flex-col justify-end p-4",children:[a.jsx("h3",{className:"font-bold text-white mb-2 line-clamp-2",children:e.title}),a.jsxs("p",{className:"text-sm text-red-400 font-semibold",children:[e.pageCount," páginas"]})]}),a.jsx("div",{className:"absolute inset-0 flex items-center justify-center opacity-0 group-hover:opacity-100 transition-opacity duration-300",children:a.jsx("div",{className:"w-16 h-16 rounded-full bg-red-500/20 border-2 border-red-500 flex items-center justify-center backdrop-blur-sm",children:a.jsx("svg",{className:"w-8 h-8 text-red-400 ml-1",fill:"currentColor",viewBox:"0 0 24 24",children:a.jsx("path",{d:"M8 5v14l11-7z"})})})})]},e.id))})]})},ca=()=>({title:"",genre:"",synopsis:"",points:[{id:"1",position:1,content:"",type:"beginning"},{id:"2",position:2,content:"",type:"middle"},{id:"3",position:3,content:"",type:"end"}]});function da(e){var t,r,s="";if("string"==typeof e||"number"==typeof e)s+=e;else if("object"==typeof e)if(Array.isArray(e)){var n=e.length;for(t=0;t<n;t++)e[t]&&(r=da(e[t]))&&(s&&(s+=" "),s+=r)}else for(r in e)e[r]&&(s&&(s+=" "),s+=r);return s}const ua=(e,t)=>{var r;if(0===e.length)return t.classGroupId;const s=e[0],n=t.nextPart.get(s),o=n?ua(e.slice(1),n):void 0;if(o)return o;if(0===t.validators.length)return;const a=e.join("-");return null==(r=t.validators.find(({validator:e})=>e(a)))?void 0:r.classGroupId},ha=/^\[(.+)\]$/,pa=e=>{if(ha.test(e)){const t=ha.exec(e)[1],r=null==t?void 0:t.substring(0,t.indexOf(":"));if(r)return"arbitrary.."+r}},ma=e=>{const{theme:t,classGroups:r}=e,s={nextPart:new Map,validators:[]};for(const n in r)ga(r[n],s,n,t);return s},ga=(e,t,r,s)=>{e.forEach(e=>{if("string"!=typeof e)return"function"==typeof e?xa(e)?void ga(e(s),t,r,s):void t.validators.push({validator:e,classGroupId:r}):void Object.entries(e).forEach(([e,n])=>{ga(n,fa(t,e),r,s)});(""===e?t:fa(t,e)).classGroupId=r})},fa=(e,t)=>{let r=e;return t.split("-").forEach(e=>{r.nextPart.has(e)||r.nextPart.set(e,{nextPart:new Map,validators:[]}),r=r.nextPart.get(e)}),r},xa=e=>e.isThemeGetter,ba=e=>{if(e<1)return{get:()=>{},set:()=>{}};let t=0,r=new Map,s=new Map;const n=(n,o)=>{r.set(n,o),t++,t>e&&(t=0,s=r,r=new Map)};return{get(e){let t=r.get(e);return void 0!==t?t:void 0!==(t=s.get(e))?(n(e,t),t):void 0},set(e,t){r.has(e)?r.set(e,t):n(e,t)}}},va=e=>{const{prefix:t,experimentalParseClassName:r}=e;let s=e=>{const t=[];let r,s=0,n=0,o=0;for(let l=0;l<e.length;l++){let a=e[l];if(0===s&&0===n){if(":"===a){t.push(e.slice(o,l)),o=l+1;continue}if("/"===a){r=l;continue}}"["===a?s++:"]"===a?s--:"("===a?n++:")"===a&&n--}const a=0===t.length?e:e.substring(o),i=ya(a);return{modifiers:t,hasImportantModifier:i!==a,baseClassName:i,maybePostfixModifierPosition:r&&r>o?r-o:void 0}};if(t){const e=t+":",r=s;s=t=>t.startsWith(e)?r(t.substring(e.length)):{isExternal:!0,modifiers:[],hasImportantModifier:!1,baseClassName:t,maybePostfixModifierPosition:void 0}}if(r){const e=s;s=t=>r({className:t,parseClassName:e})}return s},ya=e=>e.endsWith("!")?e.substring(0,e.length-1):e.startsWith("!")?e.substring(1):e,wa=e=>{const t=Object.fromEntries(e.orderSensitiveModifiers.map(e=>[e,!0]));return e=>{if(e.length<=1)return e;const r=[];let s=[];return e.forEach(e=>{"["===e[0]||t[e]?(r.push(...s.sort(),e),s=[]):s.push(e)}),r.push(...s.sort()),r}},ka=e=>d({cache:ba(e.cacheSize),parseClassName:va(e),sortModifiers:wa(e)},(e=>{const t=ma(e),{conflictingClassGroups:r,conflictingClassGroupModifiers:s}=e;return{getClassGroupId:e=>{const r=e.split("-");return""===r[0]&&1!==r.length&&r.shift(),ua(r,t)||pa(e)},getConflictingClassGroupIds:(e,t)=>{const n=r[e]||[];return t&&s[e]?[...n,...s[e]]:n}}})(e)),Na=/\s+/;function ja(){let e,t,r=0,s="";for(;r<arguments.length;)(e=arguments[r++])&&(t=_a(e))&&(s&&(s+=" "),s+=t);return s}const _a=e=>{if("string"==typeof e)return e;let t,r="";for(let s=0;s<e.length;s++)e[s]&&(t=_a(e[s]))&&(r&&(r+=" "),r+=t);return r};function Sa(e,...t){let r,s,n,o=function(i){const l=t.reduce((e,t)=>t(e),e());return r=ka(l),s=r.cache.get,n=r.cache.set,o=a,a(i)};function a(e){const t=s(e);if(t)return t;const o=((e,t)=>{const{parseClassName:r,getClassGroupId:s,getConflictingClassGroupIds:n,sortModifiers:o}=t,a=[],i=e.trim().split(Na);let l="";for(let c=i.length-1;c>=0;c-=1){const e=i[c],{isExternal:t,modifiers:d,hasImportantModifier:u,baseClassName:h,maybePostfixModifierPosition:p}=r(e);if(t){l=e+(l.length>0?" "+l:l);continue}let m=!!p,g=s(m?h.substring(0,p):h);if(!g){if(!m){l=e+(l.length>0?" "+l:l);continue}if(g=s(h),!g){l=e+(l.length>0?" "+l:l);continue}m=!1}const f=o(d).join(":"),x=u?f+"!":f,b=x+g;if(a.includes(b))continue;a.push(b);const v=n(g,m);for(let r=0;r<v.length;++r){const e=v[r];a.push(x+e)}l=e+(l.length>0?" "+l:l)}return l})(e,r);return n(e,o),o}return function(){return o(ja.apply(null,arguments))}}const Ia=e=>{const t=t=>t[e]||[];return t.isThemeGetter=!0,t},Ca=/^\[(?:(\w[\w-]*):)?(.+)\]$/i,Ta=/^\((?:(\w[\w-]*):)?(.+)\)$/i,Ea=/^\d+\/\d+$/,Aa=/^(\d+(\.\d+)?)?(xs|sm|md|lg|xl)$/,Oa=/\d+(%|px|r?em|[sdl]?v([hwib]|min|max)|pt|pc|in|cm|mm|cap|ch|ex|r?lh|cq(w|h|i|b|min|max))|\b(calc|min|max|clamp)\(.+\)|^0$/,Pa=/^(rgba?|hsla?|hwb|(ok)?(lab|lch))\(.+\)$/,Ra=/^(inset_)?-?((\d+)?\.?(\d+)[a-z]+|0)_-?((\d+)?\.?(\d+)[a-z]+|0)/,La=/^(url|image|image-set|cross-fade|element|(repeating-)?(linear|radial|conic)-gradient)\(.+\)$/,Ma=e=>Ea.test(e),Da=e=>!!e&&!Number.isNaN(Number(e)),$a=e=>!!e&&Number.isInteger(Number(e)),Ua=e=>e.endsWith("%")&&Da(e.slice(0,-1)),za=e=>Aa.test(e),Fa=()=>!0,qa=e=>Oa.test(e)&&!Pa.test(e),Ba=()=>!1,Va=e=>Ra.test(e),Ha=e=>La.test(e),Wa=e=>!Ja(e)&&!ei(e),Ga=e=>ii(e,ui,Ba),Ja=e=>Ca.test(e),Ka=e=>ii(e,hi,qa),Za=e=>ii(e,pi,Da),Xa=e=>ii(e,ci,Ba),Ya=e=>ii(e,di,Ha),Qa=e=>ii(e,gi,Va),ei=e=>Ta.test(e),ti=e=>li(e,hi),ri=e=>li(e,mi),si=e=>li(e,ci),ni=e=>li(e,ui),oi=e=>li(e,di),ai=e=>li(e,gi,!0),ii=(e,t,r)=>{const s=Ca.exec(e);return!!s&&(s[1]?t(s[1]):r(s[2]))},li=(e,t,r=!1)=>{const s=Ta.exec(e);return!!s&&(s[1]?t(s[1]):r)},ci=e=>"position"===e||"percentage"===e,di=e=>"image"===e||"url"===e,ui=e=>"length"===e||"size"===e||"bg-size"===e,hi=e=>"length"===e,pi=e=>"number"===e,mi=e=>"family-name"===e,gi=e=>"shadow"===e,fi=Sa(()=>{const e=Ia("color"),t=Ia("font"),r=Ia("text"),s=Ia("font-weight"),n=Ia("tracking"),o=Ia("leading"),a=Ia("breakpoint"),i=Ia("container"),l=Ia("spacing"),c=Ia("radius"),d=Ia("shadow"),u=Ia("inset-shadow"),h=Ia("text-shadow"),p=Ia("drop-shadow"),m=Ia("blur"),g=Ia("perspective"),f=Ia("aspect"),x=Ia("ease"),b=Ia("animate"),v=()=>["center","top","bottom","left","right","top-left","left-top","top-right","right-top","bottom-right","right-bottom","bottom-left","left-bottom",ei,Ja],y=()=>[ei,Ja,l],w=()=>[Ma,"full","auto",...y()],k=()=>[$a,"none","subgrid",ei,Ja],N=()=>["auto",{span:["full",$a,ei,Ja]},$a,ei,Ja],j=()=>[$a,"auto",ei,Ja],_=()=>["auto","min","max","fr",ei,Ja],S=()=>["auto",...y()],I=()=>[Ma,"auto","full","dvw","dvh","lvw","lvh","svw","svh","min","max","fit",...y()],C=()=>[e,ei,Ja],T=()=>["center","top","bottom","left","right","top-left","left-top","top-right","right-top","bottom-right","right-bottom","bottom-left","left-bottom",si,Xa,{position:[ei,Ja]}],E=()=>["auto","cover","contain",ni,Ga,{size:[ei,Ja]}],A=()=>[Ua,ti,Ka],O=()=>["","none","full",c,ei,Ja],P=()=>["",Da,ti,Ka],R=()=>[Da,Ua,si,Xa],L=()=>["","none",m,ei,Ja],M=()=>["none",Da,ei,Ja],D=()=>["none",Da,ei,Ja],$=()=>[Da,ei,Ja],U=()=>[Ma,"full",...y()];return{cacheSize:500,theme:{animate:["spin","ping","pulse","bounce"],aspect:["video"],blur:[za],breakpoint:[za],color:[Fa],container:[za],"drop-shadow":[za],ease:["in","out","in-out"],font:[Wa],"font-weight":["thin","extralight","light","normal","medium","semibold","bold","extrabold","black"],"inset-shadow":[za],leading:["none","tight","snug","normal","relaxed","loose"],perspective:["dramatic","near","normal","midrange","distant","none"],radius:[za],shadow:[za],spacing:["px",Da],text:[za],"text-shadow":[za],tracking:["tighter","tight","normal","wide","wider","widest"]},classGroups:{aspect:[{aspect:["auto","square",Ma,Ja,ei,f]}],container:["container"],columns:[{columns:[Da,Ja,ei,i]}],"break-after":[{"break-after":["auto","avoid","all","avoid-page","page","left","right","column"]}],"break-before":[{"break-before":["auto","avoid","all","avoid-page","page","left","right","column"]}],"break-inside":[{"break-inside":["auto","avoid","avoid-page","avoid-column"]}],"box-decoration":[{"box-decoration":["slice","clone"]}],box:[{box:["border","content"]}],display:["block","inline-block","inline","flex","inline-flex","table","inline-table","table-caption","table-cell","table-column","table-column-group","table-footer-group","table-header-group","table-row-group","table-row","flow-root","grid","inline-grid","contents","list-item","hidden"],sr:["sr-only","not-sr-only"],float:[{float:["right","left","none","start","end"]}],clear:[{clear:["left","right","both","none","start","end"]}],isolation:["isolate","isolation-auto"],"object-fit":[{object:["contain","cover","fill","none","scale-down"]}],"object-position":[{object:v()}],overflow:[{overflow:["auto","hidden","clip","visible","scroll"]}],"overflow-x":[{"overflow-x":["auto","hidden","clip","visible","scroll"]}],"overflow-y":[{"overflow-y":["auto","hidden","clip","visible","scroll"]}],overscroll:[{overscroll:["auto","contain","none"]}],"overscroll-x":[{"overscroll-x":["auto","contain","none"]}],"overscroll-y":[{"overscroll-y":["auto","contain","none"]}],position:["static","fixed","absolute","relative","sticky"],inset:[{inset:w()}],"inset-x":[{"inset-x":w()}],"inset-y":[{"inset-y":w()}],start:[{start:w()}],end:[{end:w()}],top:[{top:w()}],right:[{right:w()}],bottom:[{bottom:w()}],left:[{left:w()}],visibility:["visible","invisible","collapse"],z:[{z:[$a,"auto",ei,Ja]}],basis:[{basis:[Ma,"full","auto",i,...y()]}],"flex-direction":[{flex:["row","row-reverse","col","col-reverse"]}],"flex-wrap":[{flex:["nowrap","wrap","wrap-reverse"]}],flex:[{flex:[Da,Ma,"auto","initial","none",Ja]}],grow:[{grow:["",Da,ei,Ja]}],shrink:[{shrink:["",Da,ei,Ja]}],order:[{order:[$a,"first","last","none",ei,Ja]}],"grid-cols":[{"grid-cols":k()}],"col-start-end":[{col:N()}],"col-start":[{"col-start":j()}],"col-end":[{"col-end":j()}],"grid-rows":[{"grid-rows":k()}],"row-start-end":[{row:N()}],"row-start":[{"row-start":j()}],"row-end":[{"row-end":j()}],"grid-flow":[{"grid-flow":["row","col","dense","row-dense","col-dense"]}],"auto-cols":[{"auto-cols":_()}],"auto-rows":[{"auto-rows":_()}],gap:[{gap:y()}],"gap-x":[{"gap-x":y()}],"gap-y":[{"gap-y":y()}],"justify-content":[{justify:["start","end","center","between","around","evenly","stretch","baseline","center-safe","end-safe","normal"]}],"justify-items":[{"justify-items":["start","end","center","stretch","center-safe","end-safe","normal"]}],"justify-self":[{"justify-self":["auto","start","end","center","stretch","center-safe","end-safe"]}],"align-content":[{content:["normal","start","end","center","between","around","evenly","stretch","baseline","center-safe","end-safe"]}],"align-items":[{items:["start","end","center","stretch","center-safe","end-safe",{baseline:["","last"]}]}],"align-self":[{self:["auto","start","end","center","stretch","center-safe","end-safe",{baseline:["","last"]}]}],"place-content":[{"place-content":["start","end","center","between","around","evenly","stretch","baseline","center-safe","end-safe"]}],"place-items":[{"place-items":["start","end","center","stretch","center-safe","end-safe","baseline"]}],"place-self":[{"place-self":["auto","start","end","center","stretch","center-safe","end-safe"]}],p:[{p:y()}],px:[{px:y()}],py:[{py:y()}],ps:[{ps:y()}],pe:[{pe:y()}],pt:[{pt:y()}],pr:[{pr:y()}],pb:[{pb:y()}],pl:[{pl:y()}],m:[{m:S()}],mx:[{mx:S()}],my:[{my:S()}],ms:[{ms:S()}],me:[{me:S()}],mt:[{mt:S()}],mr:[{mr:S()}],mb:[{mb:S()}],ml:[{ml:S()}],"space-x":[{"space-x":y()}],"space-x-reverse":["space-x-reverse"],"space-y":[{"space-y":y()}],"space-y-reverse":["space-y-reverse"],size:[{size:I()}],w:[{w:[i,"screen",...I()]}],"min-w":[{"min-w":[i,"screen","none",...I()]}],"max-w":[{"max-w":[i,"screen","none","prose",{screen:[a]},...I()]}],h:[{h:["screen",...I()]}],"min-h":[{"min-h":["screen","none",...I()]}],"max-h":[{"max-h":["screen",...I()]}],"font-size":[{text:["base",r,ti,Ka]}],"font-smoothing":["antialiased","subpixel-antialiased"],"font-style":["italic","not-italic"],"font-weight":[{font:[s,ei,Za]}],"font-stretch":[{"font-stretch":["ultra-condensed","extra-condensed","condensed","semi-condensed","normal","semi-expanded","expanded","extra-expanded","ultra-expanded",Ua,Ja]}],"font-family":[{font:[ri,Ja,t]}],"fvn-normal":["normal-nums"],"fvn-ordinal":["ordinal"],"fvn-slashed-zero":["slashed-zero"],"fvn-figure":["lining-nums","oldstyle-nums"],"fvn-spacing":["proportional-nums","tabular-nums"],"fvn-fraction":["diagonal-fractions","stacked-fractions"],tracking:[{tracking:[n,ei,Ja]}],"line-clamp":[{"line-clamp":[Da,"none",ei,Za]}],leading:[{leading:[o,...y()]}],"list-image":[{"list-image":["none",ei,Ja]}],"list-style-position":[{list:["inside","outside"]}],"list-style-type":[{list:["disc","decimal","none",ei,Ja]}],"text-alignment":[{text:["left","center","right","justify","start","end"]}],"placeholder-color":[{placeholder:C()}],"text-color":[{text:C()}],"text-decoration":["underline","overline","line-through","no-underline"],"text-decoration-style":[{decoration:["solid","dashed","dotted","double","wavy"]}],"text-decoration-thickness":[{decoration:[Da,"from-font","auto",ei,Ka]}],"text-decoration-color":[{decoration:C()}],"underline-offset":[{"underline-offset":[Da,"auto",ei,Ja]}],"text-transform":["uppercase","lowercase","capitalize","normal-case"],"text-overflow":["truncate","text-ellipsis","text-clip"],"text-wrap":[{text:["wrap","nowrap","balance","pretty"]}],indent:[{indent:y()}],"vertical-align":[{align:["baseline","top","middle","bottom","text-top","text-bottom","sub","super",ei,Ja]}],whitespace:[{whitespace:["normal","nowrap","pre","pre-line","pre-wrap","break-spaces"]}],break:[{break:["normal","words","all","keep"]}],wrap:[{wrap:["break-word","anywhere","normal"]}],hyphens:[{hyphens:["none","manual","auto"]}],content:[{content:["none",ei,Ja]}],"bg-attachment":[{bg:["fixed","local","scroll"]}],"bg-clip":[{"bg-clip":["border","padding","content","text"]}],"bg-origin":[{"bg-origin":["border","padding","content"]}],"bg-position":[{bg:T()}],"bg-repeat":[{bg:["no-repeat",{repeat:["","x","y","space","round"]}]}],"bg-size":[{bg:E()}],"bg-image":[{bg:["none",{linear:[{to:["t","tr","r","br","b","bl","l","tl"]},$a,ei,Ja],radial:["",ei,Ja],conic:[$a,ei,Ja]},oi,Ya]}],"bg-color":[{bg:C()}],"gradient-from-pos":[{from:A()}],"gradient-via-pos":[{via:A()}],"gradient-to-pos":[{to:A()}],"gradient-from":[{from:C()}],"gradient-via":[{via:C()}],"gradient-to":[{to:C()}],rounded:[{rounded:O()}],"rounded-s":[{"rounded-s":O()}],"rounded-e":[{"rounded-e":O()}],"rounded-t":[{"rounded-t":O()}],"rounded-r":[{"rounded-r":O()}],"rounded-b":[{"rounded-b":O()}],"rounded-l":[{"rounded-l":O()}],"rounded-ss":[{"rounded-ss":O()}],"rounded-se":[{"rounded-se":O()}],"rounded-ee":[{"rounded-ee":O()}],"rounded-es":[{"rounded-es":O()}],"rounded-tl":[{"rounded-tl":O()}],"rounded-tr":[{"rounded-tr":O()}],"rounded-br":[{"rounded-br":O()}],"rounded-bl":[{"rounded-bl":O()}],"border-w":[{border:P()}],"border-w-x":[{"border-x":P()}],"border-w-y":[{"border-y":P()}],"border-w-s":[{"border-s":P()}],"border-w-e":[{"border-e":P()}],"border-w-t":[{"border-t":P()}],"border-w-r":[{"border-r":P()}],"border-w-b":[{"border-b":P()}],"border-w-l":[{"border-l":P()}],"divide-x":[{"divide-x":P()}],"divide-x-reverse":["divide-x-reverse"],"divide-y":[{"divide-y":P()}],"divide-y-reverse":["divide-y-reverse"],"border-style":[{border:["solid","dashed","dotted","double","hidden","none"]}],"divide-style":[{divide:["solid","dashed","dotted","double","hidden","none"]}],"border-color":[{border:C()}],"border-color-x":[{"border-x":C()}],"border-color-y":[{"border-y":C()}],"border-color-s":[{"border-s":C()}],"border-color-e":[{"border-e":C()}],"border-color-t":[{"border-t":C()}],"border-color-r":[{"border-r":C()}],"border-color-b":[{"border-b":C()}],"border-color-l":[{"border-l":C()}],"divide-color":[{divide:C()}],"outline-style":[{outline:["solid","dashed","dotted","double","none","hidden"]}],"outline-offset":[{"outline-offset":[Da,ei,Ja]}],"outline-w":[{outline:["",Da,ti,Ka]}],"outline-color":[{outline:C()}],shadow:[{shadow:["","none",d,ai,Qa]}],"shadow-color":[{shadow:C()}],"inset-shadow":[{"inset-shadow":["none",u,ai,Qa]}],"inset-shadow-color":[{"inset-shadow":C()}],"ring-w":[{ring:P()}],"ring-w-inset":["ring-inset"],"ring-color":[{ring:C()}],"ring-offset-w":[{"ring-offset":[Da,Ka]}],"ring-offset-color":[{"ring-offset":C()}],"inset-ring-w":[{"inset-ring":P()}],"inset-ring-color":[{"inset-ring":C()}],"text-shadow":[{"text-shadow":["none",h,ai,Qa]}],"text-shadow-color":[{"text-shadow":C()}],opacity:[{opacity:[Da,ei,Ja]}],"mix-blend":[{"mix-blend":["normal","multiply","screen","overlay","darken","lighten","color-dodge","color-burn","hard-light","soft-light","difference","exclusion","hue","saturation","color","luminosity","plus-darker","plus-lighter"]}],"bg-blend":[{"bg-blend":["normal","multiply","screen","overlay","darken","lighten","color-dodge","color-burn","hard-light","soft-light","difference","exclusion","hue","saturation","color","luminosity"]}],"mask-clip":[{"mask-clip":["border","padding","content","fill","stroke","view"]},"mask-no-clip"],"mask-composite":[{mask:["add","subtract","intersect","exclude"]}],"mask-image-linear-pos":[{"mask-linear":[Da]}],"mask-image-linear-from-pos":[{"mask-linear-from":R()}],"mask-image-linear-to-pos":[{"mask-linear-to":R()}],"mask-image-linear-from-color":[{"mask-linear-from":C()}],"mask-image-linear-to-color":[{"mask-linear-to":C()}],"mask-image-t-from-pos":[{"mask-t-from":R()}],"mask-image-t-to-pos":[{"mask-t-to":R()}],"mask-image-t-from-color":[{"mask-t-from":C()}],"mask-image-t-to-color":[{"mask-t-to":C()}],"mask-image-r-from-pos":[{"mask-r-from":R()}],"mask-image-r-to-pos":[{"mask-r-to":R()}],"mask-image-r-from-color":[{"mask-r-from":C()}],"mask-image-r-to-color":[{"mask-r-to":C()}],"mask-image-b-from-pos":[{"mask-b-from":R()}],"mask-image-b-to-pos":[{"mask-b-to":R()}],"mask-image-b-from-color":[{"mask-b-from":C()}],"mask-image-b-to-color":[{"mask-b-to":C()}],"mask-image-l-from-pos":[{"mask-l-from":R()}],"mask-image-l-to-pos":[{"mask-l-to":R()}],"mask-image-l-from-color":[{"mask-l-from":C()}],"mask-image-l-to-color":[{"mask-l-to":C()}],"mask-image-x-from-pos":[{"mask-x-from":R()}],"mask-image-x-to-pos":[{"mask-x-to":R()}],"mask-image-x-from-color":[{"mask-x-from":C()}],"mask-image-x-to-color":[{"mask-x-to":C()}],"mask-image-y-from-pos":[{"mask-y-from":R()}],"mask-image-y-to-pos":[{"mask-y-to":R()}],"mask-image-y-from-color":[{"mask-y-from":C()}],"mask-image-y-to-color":[{"mask-y-to":C()}],"mask-image-radial":[{"mask-radial":[ei,Ja]}],"mask-image-radial-from-pos":[{"mask-radial-from":R()}],"mask-image-radial-to-pos":[{"mask-radial-to":R()}],"mask-image-radial-from-color":[{"mask-radial-from":C()}],"mask-image-radial-to-color":[{"mask-radial-to":C()}],"mask-image-radial-shape":[{"mask-radial":["circle","ellipse"]}],"mask-image-radial-size":[{"mask-radial":[{closest:["side","corner"],farthest:["side","corner"]}]}],"mask-image-radial-pos":[{"mask-radial-at":["center","top","bottom","left","right","top-left","left-top","top-right","right-top","bottom-right","right-bottom","bottom-left","left-bottom"]}],"mask-image-conic-pos":[{"mask-conic":[Da]}],"mask-image-conic-from-pos":[{"mask-conic-from":R()}],"mask-image-conic-to-pos":[{"mask-conic-to":R()}],"mask-image-conic-from-color":[{"mask-conic-from":C()}],"mask-image-conic-to-color":[{"mask-conic-to":C()}],"mask-mode":[{mask:["alpha","luminance","match"]}],"mask-origin":[{"mask-origin":["border","padding","content","fill","stroke","view"]}],"mask-position":[{mask:T()}],"mask-repeat":[{mask:["no-repeat",{repeat:["","x","y","space","round"]}]}],"mask-size":[{mask:E()}],"mask-type":[{"mask-type":["alpha","luminance"]}],"mask-image":[{mask:["none",ei,Ja]}],filter:[{filter:["","none",ei,Ja]}],blur:[{blur:L()}],brightness:[{brightness:[Da,ei,Ja]}],contrast:[{contrast:[Da,ei,Ja]}],"drop-shadow":[{"drop-shadow":["","none",p,ai,Qa]}],"drop-shadow-color":[{"drop-shadow":C()}],grayscale:[{grayscale:["",Da,ei,Ja]}],"hue-rotate":[{"hue-rotate":[Da,ei,Ja]}],invert:[{invert:["",Da,ei,Ja]}],saturate:[{saturate:[Da,ei,Ja]}],sepia:[{sepia:["",Da,ei,Ja]}],"backdrop-filter":[{"backdrop-filter":["","none",ei,Ja]}],"backdrop-blur":[{"backdrop-blur":L()}],"backdrop-brightness":[{"backdrop-brightness":[Da,ei,Ja]}],"backdrop-contrast":[{"backdrop-contrast":[Da,ei,Ja]}],"backdrop-grayscale":[{"backdrop-grayscale":["",Da,ei,Ja]}],"backdrop-hue-rotate":[{"backdrop-hue-rotate":[Da,ei,Ja]}],"backdrop-invert":[{"backdrop-invert":["",Da,ei,Ja]}],"backdrop-opacity":[{"backdrop-opacity":[Da,ei,Ja]}],"backdrop-saturate":[{"backdrop-saturate":[Da,ei,Ja]}],"backdrop-sepia":[{"backdrop-sepia":["",Da,ei,Ja]}],"border-collapse":[{border:["collapse","separate"]}],"border-spacing":[{"border-spacing":y()}],"border-spacing-x":[{"border-spacing-x":y()}],"border-spacing-y":[{"border-spacing-y":y()}],"table-layout":[{table:["auto","fixed"]}],caption:[{caption:["top","bottom"]}],transition:[{transition:["","all","colors","opacity","shadow","transform","none",ei,Ja]}],"transition-behavior":[{transition:["normal","discrete"]}],duration:[{duration:[Da,"initial",ei,Ja]}],ease:[{ease:["linear","initial",x,ei,Ja]}],delay:[{delay:[Da,ei,Ja]}],animate:[{animate:["none",b,ei,Ja]}],backface:[{backface:["hidden","visible"]}],perspective:[{perspective:[g,ei,Ja]}],"perspective-origin":[{"perspective-origin":v()}],rotate:[{rotate:M()}],"rotate-x":[{"rotate-x":M()}],"rotate-y":[{"rotate-y":M()}],"rotate-z":[{"rotate-z":M()}],scale:[{scale:D()}],"scale-x":[{"scale-x":D()}],"scale-y":[{"scale-y":D()}],"scale-z":[{"scale-z":D()}],"scale-3d":["scale-3d"],skew:[{skew:$()}],"skew-x":[{"skew-x":$()}],"skew-y":[{"skew-y":$()}],transform:[{transform:[ei,Ja,"","none","gpu","cpu"]}],"transform-origin":[{origin:v()}],"transform-style":[{transform:["3d","flat"]}],translate:[{translate:U()}],"translate-x":[{"translate-x":U()}],"translate-y":[{"translate-y":U()}],"translate-z":[{"translate-z":U()}],"translate-none":["translate-none"],accent:[{accent:C()}],appearance:[{appearance:["none","auto"]}],"caret-color":[{caret:C()}],"color-scheme":[{scheme:["normal","dark","light","light-dark","only-dark","only-light"]}],cursor:[{cursor:["auto","default","pointer","wait","text","move","help","not-allowed","none","context-menu","progress","cell","crosshair","vertical-text","alias","copy","no-drop","grab","grabbing","all-scroll","col-resize","row-resize","n-resize","e-resize","s-resize","w-resize","ne-resize","nw-resize","se-resize","sw-resize","ew-resize","ns-resize","nesw-resize","nwse-resize","zoom-in","zoom-out",ei,Ja]}],"field-sizing":[{"field-sizing":["fixed","content"]}],"pointer-events":[{"pointer-events":["auto","none"]}],resize:[{resize:["none","","y","x"]}],"scroll-behavior":[{scroll:["auto","smooth"]}],"scroll-m":[{"scroll-m":y()}],"scroll-mx":[{"scroll-mx":y()}],"scroll-my":[{"scroll-my":y()}],"scroll-ms":[{"scroll-ms":y()}],"scroll-me":[{"scroll-me":y()}],"scroll-mt":[{"scroll-mt":y()}],"scroll-mr":[{"scroll-mr":y()}],"scroll-mb":[{"scroll-mb":y()}],"scroll-ml":[{"scroll-ml":y()}],"scroll-p":[{"scroll-p":y()}],"scroll-px":[{"scroll-px":y()}],"scroll-py":[{"scroll-py":y()}],"scroll-ps":[{"scroll-ps":y()}],"scroll-pe":[{"scroll-pe":y()}],"scroll-pt":[{"scroll-pt":y()}],"scroll-pr":[{"scroll-pr":y()}],"scroll-pb":[{"scroll-pb":y()}],"scroll-pl":[{"scroll-pl":y()}],"snap-align":[{snap:["start","end","center","align-none"]}],"snap-stop":[{snap:["normal","always"]}],"snap-type":[{snap:["none","x","y","both"]}],"snap-strictness":[{snap:["mandatory","proximity"]}],touch:[{touch:["auto","none","manipulation"]}],"touch-x":[{"touch-pan":["x","left","right"]}],"touch-y":[{"touch-pan":["y","up","down"]}],"touch-pz":["touch-pinch-zoom"],select:[{select:["none","text","all","auto"]}],"will-change":[{"will-change":["auto","scroll","contents","transform",ei,Ja]}],fill:[{fill:["none",...C()]}],"stroke-w":[{stroke:[Da,ti,Ka,Za]}],stroke:[{stroke:["none",...C()]}],"forced-color-adjust":[{"forced-color-adjust":["auto","none"]}]},conflictingClassGroups:{overflow:["overflow-x","overflow-y"],overscroll:["overscroll-x","overscroll-y"],inset:["inset-x","inset-y","start","end","top","right","bottom","left"],"inset-x":["right","left"],"inset-y":["top","bottom"],flex:["basis","grow","shrink"],gap:["gap-x","gap-y"],p:["px","py","ps","pe","pt","pr","pb","pl"],px:["pr","pl"],py:["pt","pb"],m:["mx","my","ms","me","mt","mr","mb","ml"],mx:["mr","ml"],my:["mt","mb"],size:["w","h"],"font-size":["leading"],"fvn-normal":["fvn-ordinal","fvn-slashed-zero","fvn-figure","fvn-spacing","fvn-fraction"],"fvn-ordinal":["fvn-normal"],"fvn-slashed-zero":["fvn-normal"],"fvn-figure":["fvn-normal"],"fvn-spacing":["fvn-normal"],"fvn-fraction":["fvn-normal"],"line-clamp":["display","overflow"],rounded:["rounded-s","rounded-e","rounded-t","rounded-r","rounded-b","rounded-l","rounded-ss","rounded-se","rounded-ee","rounded-es","rounded-tl","rounded-tr","rounded-br","rounded-bl"],"rounded-s":["rounded-ss","rounded-es"],"rounded-e":["rounded-se","rounded-ee"],"rounded-t":["rounded-tl","rounded-tr"],"rounded-r":["rounded-tr","rounded-br"],"rounded-b":["rounded-br","rounded-bl"],"rounded-l":["rounded-tl","rounded-bl"],"border-spacing":["border-spacing-x","border-spacing-y"],"border-w":["border-w-x","border-w-y","border-w-s","border-w-e","border-w-t","border-w-r","border-w-b","border-w-l"],"border-w-x":["border-w-r","border-w-l"],"border-w-y":["border-w-t","border-w-b"],"border-color":["border-color-x","border-color-y","border-color-s","border-color-e","border-color-t","border-color-r","border-color-b","border-color-l"],"border-color-x":["border-color-r","border-color-l"],"border-color-y":["border-color-t","border-color-b"],translate:["translate-x","translate-y","translate-none"],"translate-none":["translate","translate-x","translate-y","translate-z"],"scroll-m":["scroll-mx","scroll-my","scroll-ms","scroll-me","scroll-mt","scroll-mr","scroll-mb","scroll-ml"],"scroll-mx":["scroll-mr","scroll-ml"],"scroll-my":["scroll-mt","scroll-mb"],"scroll-p":["scroll-px","scroll-py","scroll-ps","scroll-pe","scroll-pt","scroll-pr","scroll-pb","scroll-pl"],"scroll-px":["scroll-pr","scroll-pl"],"scroll-py":["scroll-pt","scroll-pb"],touch:["touch-x","touch-y","touch-pz"],"touch-x":["touch"],"touch-y":["touch"],"touch-pz":["touch"]},conflictingClassGroupModifiers:{"font-size":["leading"]},orderSensitiveModifiers:["*","**","after","backdrop","before","details-content","file","first-letter","first-line","marker","placeholder","selection"]}});function xi(...e){return fi(function(){for(var e,t,r=0,s="",n=arguments.length;r<n;r++)(e=arguments[r])&&(t=da(e))&&(s&&(s+=" "),s+=t);return s}(e))}function bi({point:e,suggestions:t,onUpdate:r,onDelete:s,onRegenerateSuggestions:n,isMainPoint:o=!1,rationale:i,hasSynopsis:l=!1}){const[c,d]=f.useState(!1),[u,h]=f.useState(!1),p=()=>{d(!0),setTimeout(()=>{n(),d(!1)},300)},m=u?t:t.slice(0,3);return a.jsxs("div",{className:xi("relative rounded-xl border-2 bg-white/[0.03] backdrop-blur-sm p-5 shadow-lg transition-all hover:shadow-xl",(()=>{switch(e.type){case"beginning":return"border-emerald-500/30";case"middle":return"border-amber-500/30";case"end":return"border-rose-500/30";default:return"border-orange-500/30"}})(),o?`ring-2 ring-offset-2 ring-offset-slate-950 ${(()=>{switch(e.type){case"beginning":return"ring-emerald-500/30";case"middle":return"ring-amber-500/30";case"end":return"ring-rose-500/30";default:return"ring-orange-500/30"}})()}`:""),children:[a.jsxs("div",{className:"flex items-center justify-between mb-4",children:[a.jsxs("div",{className:"flex items-center gap-3",children:[a.jsx("span",{className:xi("inline-flex items-center justify-center w-12 h-12 rounded-full text-white font-bold text-lg bg-gradient-to-br shadow-md",(()=>{switch(e.type){case"beginning":return"from-emerald-500 to-teal-600";case"middle":return"from-amber-500 to-orange-600";case"end":return"from-rose-500 to-pink-600";default:return"from-orange-500 to-amber-600"}})()),children:e.position}),a.jsxs("div",{children:[a.jsx("span",{className:"font-semibold text-white",children:(()=>{switch(e.type){case"beginning":return"📖 Começo";case"middle":return"⚡ Meio";case"end":return"🎬 Fim";default:return"📍 Ponto Intermediário"}})()}),i&&a.jsx("p",{className:"text-xs text-slate-400 mt-0.5",children:i})]})]}),!o&&s&&a.jsx("button",{onClick:s,className:"text-slate-400 hover:text-red-400 transition-colors p-2 hover:bg-red-500/10 rounded-lg border border-transparent hover:border-red-500/30",title:"Remover ponto",children:a.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})})})]}),a.jsxs("div",{className:"relative",children:[a.jsx("textarea",{value:e.content,onChange:e=>r(e.target.value),placeholder:"Descreva o que acontece neste ponto da história...\n\nDica: Use as sugestões abaixo para inspiração ou escreva sua própria ideia!",className:"w-full min-h-[120px] p-4 border border-white/10 bg-white/5 rounded-xl resize-none focus:outline-none focus:ring-2 focus:ring-orange-500/50 focus:border-transparent text-white placeholder:text-slate-500"}),e.content&&a.jsxs("div",{className:"absolute bottom-3 right-3 text-xs text-slate-400",children:[e.content.split(/\s+/).filter(e=>e).length," palavras"]})]}),a.jsxs("div",{className:"mt-4",children:[a.jsxs("div",{className:"flex items-center justify-between mb-3",children:[a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx("span",{className:"text-sm font-medium text-slate-300",children:"✨ Sugestões Criativas"}),a.jsx("span",{className:"text-xs bg-orange-500/20 text-orange-300 px-2 py-0.5 rounded-full border border-orange-500/30",children:"Baseadas no contexto"})]}),a.jsxs("button",{onClick:p,disabled:c,className:xi("flex items-center gap-2 px-3 py-1.5 text-sm font-medium rounded-lg transition-all",c?"bg-white/5 text-slate-500 cursor-not-allowed border border-white/10":"bg-gradient-to-r from-orange-500 to-amber-600 text-white hover:from-orange-600 hover:to-amber-700 shadow-md hover:shadow-lg hover:shadow-orange-500/30"),children:[a.jsx("svg",{className:xi("w-4 h-4",c&&"animate-spin"),fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 4v5h.582m15.356 2A8.001 8.001 0 004.582 9m0 0H9m11 11v-5h-.581m0 0a8.003 8.003 0 01-15.357-2m15.357 2H15"})}),c?"Gerando...":"Gerar Novas"]})]}),t.length>0?a.jsxs("div",{className:"space-y-2",children:[!l&&a.jsx("div",{className:"bg-amber-500/10 border border-amber-500/30 rounded-lg p-3 mb-3",children:a.jsxs("p",{className:"text-xs text-amber-300 flex items-center gap-2",children:[a.jsx("svg",{className:"w-4 h-4 flex-shrink-0",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-3L13.732 4c-.77-1.333-2.694-1.333-3.464 0L3.34 16c-.77 1.333.192 3 1.732 3z"})}),a.jsxs("span",{children:[a.jsx("strong",{children:"Dica:"})," Adicione uma sinopse para receber sugestões muito mais criativas e personalizadas!"]})]})}),m.map((t,s)=>a.jsx("button",{onClick:()=>{e.content.trim()?r(e.content+" "+t):r(t)},className:"w-full text-left p-3 bg-gradient-to-r from-orange-500/10 to-amber-500/10 hover:from-orange-500/20 hover:to-amber-500/20 text-slate-300 rounded-lg transition-all border border-orange-500/20 hover:border-orange-500/40 hover:shadow-md group",children:a.jsxs("div",{className:"flex items-start gap-2",children:[a.jsx("span",{className:"text-orange-400 text-lg mt-0.5",children:"💡"}),a.jsxs("div",{className:"flex-1",children:[a.jsx("p",{className:"text-sm leading-relaxed",children:t}),a.jsx("p",{className:"text-xs text-orange-400 mt-1 opacity-0 group-hover:opacity-100 transition-opacity",children:"Clique para usar esta sugestão"})]}),a.jsx("svg",{className:"w-5 h-5 text-orange-400 opacity-0 group-hover:opacity-100 transition-opacity flex-shrink-0",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 4v16m8-8H4"})})]})},s)),t.length>3&&a.jsx("button",{onClick:()=>h(!u),className:"w-full text-center py-2 text-sm text-orange-400 hover:text-orange-300 font-medium",children:u?"↑ Mostrar menos":`↓ Ver mais ${t.length-3} sugestões`})]}):a.jsxs("div",{className:"text-center py-6 text-slate-500 bg-white/5 border border-white/10 rounded-lg",children:[a.jsx("svg",{className:"w-8 h-8 mx-auto mb-2 opacity-50",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1.5,d:"M9.663 17h4.673M12 3v1m6.364 1.636l-.707.707M21 12h-1M4 12H3m3.343-5.657l-.707-.707m2.828 9.9a5 5 0 117.072 0l-.548.547A3.374 3.374 0 0014 18.469V19a2 2 0 11-4 0v-.531c0-.895-.356-1.754-.988-2.386l-.548-.547z"})}),a.jsx("p",{className:"text-sm font-medium mb-1 text-slate-400",children:"Sugestões personalizadas"}),a.jsx("p",{className:"text-xs",children:"Adicione uma sinopse para desbloquear sugestões criativas baseadas na sua história"}),a.jsx("button",{onClick:p,className:"mt-3 text-orange-400 hover:text-orange-300 font-medium text-sm",children:"Ou clique aqui para gerar sugestões genéricas"})]})]}),!e.content&&a.jsx("div",{className:"mt-4 p-3 bg-amber-500/10 border border-amber-500/30 rounded-lg",children:a.jsxs("p",{className:"text-xs text-amber-300",children:[a.jsx("span",{className:"font-medium",children:"💡 Dica:"}),' Você pode clicar em uma sugestão para usá-la, ou escrever diretamente seu próprio texto. Não gostou das sugestões? Clique em "Gerar Novas" para ver outras ideias!']})})]})}function vi({points:e,onAddPoint:t,onSelectPoint:r,selectedPosition:s}){const n=[...e].sort((e,t)=>e.position-t.position),o=e=>{switch(e){case"beginning":return"bg-emerald-500";case"middle":return"bg-amber-500";case"end":return"bg-rose-500";default:return"bg-orange-500"}};return a.jsxs("div",{className:"bg-white/[0.03] border border-white/10 rounded-xl shadow-lg p-6",children:[a.jsxs("h3",{className:"text-lg font-semibold text-white mb-4 flex items-center gap-2",children:[a.jsx("svg",{className:"w-5 h-5 text-orange-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M13 17h8m0 0V9m0 8l-8-8-4 4-6-6"})}),"Linha do Tempo"]}),a.jsxs("div",{className:"relative",children:[a.jsx("div",{className:"absolute top-4 left-0 right-0 h-1 bg-gradient-to-r from-emerald-500/50 via-amber-500/50 to-rose-500/50 rounded-full"}),a.jsx("div",{className:"relative flex justify-between items-start",children:n.map((e,i)=>{var l;return a.jsxs("div",{className:"relative flex flex-col items-center",style:{marginLeft:0===i?0:"auto",marginRight:i===n.length-1?0:"auto"},children:[a.jsx("button",{onClick:()=>r(e.position),className:xi("w-8 h-8 rounded-full flex items-center justify-center text-white text-xs font-bold transition-all",o(e.type),s===e.position?"ring-4 ring-offset-2 ring-offset-slate-950 ring-orange-500/50 scale-110":"hover:scale-110"),children:e.position}),a.jsx("span",{className:"mt-2 text-xs text-slate-400 text-center max-w-[80px] truncate",children:(null==(l=e.content)?void 0:l.slice(0,20))||("beginning"===e.type?"Começo":"middle"===e.type?"Meio":"end"===e.type?"Fim":`Ponto ${e.position}`)}),i<n.length-1&&a.jsx("button",{onClick:()=>{const r=n[i+1],s=(e.position+r.position)/2;t(s)},className:"absolute -right-8 top-1 w-6 h-6 bg-orange-500/20 hover:bg-orange-500/30 text-orange-400 border border-orange-500/30 rounded-full flex items-center justify-center transition-colors",title:"Adicionar ponto intermediário",children:a.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 4v16m8-8H4"})})})]},e.id)})})]}),a.jsxs("div",{className:"flex justify-center gap-6 mt-6 pt-4 border-t border-white/10",children:[a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx("span",{className:"w-3 h-3 rounded-full bg-emerald-500"}),a.jsx("span",{className:"text-xs text-slate-400",children:"Começo (1.x)"})]}),a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx("span",{className:"w-3 h-3 rounded-full bg-amber-500"}),a.jsx("span",{className:"text-xs text-slate-400",children:"Meio (2.x)"})]}),a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx("span",{className:"w-3 h-3 rounded-full bg-rose-500"}),a.jsx("span",{className:"text-xs text-slate-400",children:"Fim (3)"})]}),a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx("span",{className:"w-3 h-3 rounded-full bg-orange-500"}),a.jsx("span",{className:"text-xs text-slate-400",children:"Intermediário"})]})]})]})}function yi({story:e}){const t=[...e.points].sort((e,t)=>e.position-t.position),r=t.some(e=>e.content);return r?a.jsxs("div",{className:"bg-white/[0.03] border border-white/10 rounded-xl shadow-lg p-6",children:[a.jsxs("h3",{className:"text-lg font-semibold text-white mb-4 flex items-center gap-2",children:[a.jsx("svg",{className:"w-5 h-5 text-orange-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 6.253v13m0-13C10.832 5.477 9.246 5 7.5 5S4.168 5.477 3 6.253v13C4.168 18.477 5.754 18 7.5 18s3.332.477 4.5 1.253m0-13C13.168 5.477 14.754 5 16.5 5c1.747 0 3.332.477 4.5 1.253v13C19.832 18.477 18.247 18 16.5 18c-1.746 0-3.332.477-4.5 1.253"})}),"Prévia da História"]}),a.jsxs("div",{className:"prose prose-sm max-w-none",children:[e.title&&a.jsx("h4",{className:"text-center text-xl font-bold text-white mb-4",children:e.title}),e.genre&&a.jsxs("p",{className:"text-center text-sm text-orange-400 mb-4",children:["Gênero: ",e.genre]}),e.synopsis&&a.jsxs("div",{className:"mb-6 p-4 bg-orange-500/10 rounded-lg border border-orange-500/30",children:[a.jsx("p",{className:"text-xs font-medium text-orange-400 mb-2",children:"📋 Sinopse:"}),a.jsx("p",{className:"text-sm text-slate-300 italic",children:e.synopsis})]}),a.jsx("div",{className:"space-y-4",children:t.map(e=>e.content&&a.jsxs("div",{className:"relative pl-6",children:[a.jsx("span",{className:"absolute left-0 top-0 w-4 h-4 bg-gradient-to-br from-orange-400 to-amber-500 rounded-full flex items-center justify-center text-[10px] text-white font-bold",children:e.position}),a.jsx("p",{className:"text-slate-300 leading-relaxed",children:e.content})]},e.id))})]})]}):a.jsxs("div",{className:"bg-white/[0.03] border border-white/10 rounded-xl shadow-lg p-6",children:[a.jsxs("h3",{className:"text-lg font-semibold text-white mb-4 flex items-center gap-2",children:[a.jsx("svg",{className:"w-5 h-5 text-orange-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 6.253v13m0-13C10.832 5.477 9.246 5 7.5 5S4.168 5.477 3 6.253v13C4.168 18.477 5.754 18 7.5 18s3.332.477 4.5 1.253m0-13C13.168 5.477 14.754 5 16.5 5c1.747 0 3.332.477 4.5 1.253v13C19.832 18.477 18.247 18 16.5 18c-1.746 0-3.332.477-4.5 1.253"})}),"Prévia da História"]}),a.jsxs("div",{className:"text-center py-8 text-slate-500",children:[a.jsx("svg",{className:"w-16 h-16 mx-auto mb-4 opacity-50",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1.5,d:"M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})}),a.jsx("p",{children:"Preencha os pontos da história para ver a prévia aqui"})]})]})}function wi(e){const t=e.toLowerCase(),r=[],s=/\b([A-Z][a-záàâãéêíóôõúçA-Z]+(?:\s+(?:de|da|do|dos|das)\s+)?(?:[A-Z][a-záàâãéêíóôõúçA-Z]+)?)\b/g;let n;const o=["Um","Uma","O","A","Os","As","No","Na","Nos","Nas","Em","De","Para","Com","Por","Quando","Depois","Antes","Durante","Ela","Ele","Seu","Sua","Seus","Suas","Este","Esta","Esse","Essa","Aquele","Aquela","Mas","Porém","Contudo","Enquanto","Até","Sobre","Sob","Entre","Contra","Após","Segundo"];for(;null!==(n=s.exec(e));){const e=n[1].trim();!o.includes(e)&&e.length>2&&!r.includes(e)&&r.push(e)}let a="";const i=[/^([A-Z][a-záàâãéêíóôõúç]+(?:\s+[A-Z][a-záàâãéêíóôõúç]+)?)/,/história\s+(?:de|sobre)\s+([A-Z][a-záàâãéêíóôõúç]+(?:\s+[A-Z][a-záàâãéêíóôõúç]+)?)/i,/([A-Z][a-záàâãéêíóôõúç]+)\s+(?:é\s+um|é\s+uma|deve|precisa|descobre|encontra|busca|luta|enfrenta)/,/protagonista[:\s]+([^,.]+)/i,/jovem\s+([A-Z][a-záàâãéêíóôõúç]+)/i];for(const y of i){const t=e.match(y);if(t&&t[1]&&!o.includes(t[1].trim())){a=t[1].trim();break}}!a&&r.length>0&&(a=r[0]);let l="";const c=[/(?:vilão|antagonista|inimigo|adversário)[:\s]+([^,.]+)/i,/(?:rei|rainha|senhor|lorde|doutor|dr\.|mestre)\s+([A-Z][a-záàâãéêíóôõúç]+)/i,/(?:contra|enfrentar|derrotar|combater|vencer)\s+(?:o|a|os|as)?\s*([A-Z][a-záàâãéêíóôõúç]+(?:\s+[A-Z][a-záàâãéêíóôõúç]+)?)/i,/(?:tirano|ditador|imperador|feiticeiro|bruxa|demônio|dragão|monstro|criatura)\s+([A-Z][a-záàâãéêíóôõúç]+)/i,/([A-Z][a-záàâãéêíóôõúç]+)\s+(?:quer\s+destruir|ameaça|persegue|caça)/i];for(const y of c){const t=e.match(y);if(t&&t[1]){const e=t[1].trim();if(!o.includes(e)&&e!==a){l=e;break}}}let d="";const u=[/(?:em|no|na|num|numa)\s+((?:um|uma)\s+)?([^,.]{3,40}(?:reino|mundo|cidade|vila|floresta|castelo|nave|planeta|dimensão|terra|país|era|época|ilha|montanha|deserto|oceano|caverna|templo|torre|aldeia|metrópole|galáxia|universo|dimensão|realidade))/i,/(?:mundo|reino|terra|lugar)\s+(?:de|onde|chamado|conhecido)\s+([^,.]+)/i,/ambientad[oa]\s+(?:em|no|na)\s+([^,.]+)/i,/(?:vive|mora|habita)\s+(?:em|no|na)\s+([^,.]+)/i,/(?:na|no)\s+([A-Z][a-záàâãéêíóôõúç]+(?:\s+(?:de|da|do|dos|das)\s+)?(?:[A-Z][a-záàâãéêíóôõúç]+)?)/];for(const y of u){const t=e.match(y);if(t&&(d=(t[2]||t[1]||"").trim(),d.length>3))break}let h="";const p=[/(?:precisa|deve|tem que)\s+([^,.]+)/i,/(?:missão|objetivo|jornada|busca)\s+(?:é|de|para)\s+([^,.]+)/i,/(?:para|afim de)\s+(salvar|resgatar|proteger|destruir|encontrar|descobrir|derrotar|impedir|libertar|recuperar)\s+([^,.]+)/i,/(?:luta|batalha|conflito)\s+(?:para|contra|por)\s+([^,.]+)/i,/(?:antes que|senão)\s+([^,.]+)/i];for(const y of p){const t=e.match(y);if(t&&(h=(t[2]?t[1]+" "+t[2]:t[1]).trim(),h.length>5))break}const m=[],g={"redenção":["redenção","redimir","perdão","segunda chance","recomeçar","expiar"],"vingança":["vingança","vingar","retaliação","pagar pelo","punir","justiça pelas próprias mãos"],amor:["amor","paixão","romance","coração","amante","apaixon","amar"],amizade:["amizade","amigo","companheiro","lealdade","parceiro","aliado"],"família":["família","pai","mãe","irmão","irmã","filho","filha","herança","linhagem","ancestral"],poder:["poder","trono","governar","dominar","controle","reinar","conquistar"],liberdade:["liberdade","escapar","fugir","livre","libertação","prisão","cativeiro"],identidade:["identidade","quem sou","descobrir-se","verdadeiro eu","passado oculto","origem"],"sacrifício":["sacrifício","sacrificar","dar tudo","entregar","abrir mão","renunciar"],"sobrevivência":["sobreviver","sobrevivência","viver","morte","apocalipse","extinção"],"justiça":["justiça","justo","culpado","inocente","crime","tribunal","lei"],destino:["destino","profecia","escolhido","fadado","predestinado","oráculo"],"traição":["traição","trair","traidor","confiança quebrada","enganar","mentira"],"esperança":["esperança","esperar","acreditar","fé","último"],guerra:["guerra","batalha","exército","soldado","invasão","conflito armado"],magia:["magia","mágico","feitiço","encantamento","poderes","sobrenatural"],segredo:["segredo","oculto","escondido","mistério","revelação","verdade"],perda:["perda","perder","morte","luto","saudade","ausência"]};for(const[y,w]of Object.entries(g))w.some(e=>t.includes(e))&&m.push(y);const f=[],x=[/(?:para|afim de|com objetivo de)\s+([^,.]+)/gi,/(?:busca|procura|quer|deseja|almeja|sonha em)\s+([^,.]+)/gi,/(?:missão de|tarefa de)\s+([^,.]+)/gi];for(const y of x){let t;for(;null!==(t=y.exec(e));)t[1]&&t[1].length>5&&f.push(t[1].trim())}let b="aventura";/sombri|escur|terror|medo|horror|morte|sangue|macabr|sinistro/i.test(e)?b="sombrio":/amor|romance|paixão|coração|apaixon/i.test(e)?b="romântico":/engraçad|cômico|hilári|diversão|absurd/i.test(e)?b="cômico":/épic|grand|legend|heró|destino|profecia/i.test(e)?b="épico":/mistério|segredo|investig|pista|detetive/i.test(e)?b="misterioso":/filosóf|existenc|profund|sentido|reflex/i.test(e)?b="filosófico":/ação|luta|combate|perseguição|explosão/i.test(e)&&(b="ação");const v=r.filter(e=>e!==a);return{protagonist:a,antagonist:l,setting:d,mainConflict:h,themes:m,characters:v,objectives:f,tone:b}}const ki=[(e,t)=>`${e} acorda em ${t}, sentindo que algo mudou no ar`,(e,t)=>`A rotina de ${e} em ${t} é interrompida por um evento inesperado`,(e,t)=>`${e} começa mais um dia comum em ${t}, sem saber que tudo está prestes a mudar`,(e,t)=>`Uma visão perturbadora assombra ${e} durante a noite, mostrando ${t} em chamas`,(e,t)=>`${e} encontra algo estranho que não pertence a ${t}`,(e,t)=>`O primeiro sinal de que algo está errado: ${e} percebe mudanças sutis em ${t}`,(e,t)=>`Uma figura misteriosa observa ${e} de longe nas ruas de ${t}`,(e,t)=>`${e} descobre um objeto antigo escondido em ${t}`,(e,t)=>`Rumores estranhos começam a circular em ${t}, chegando aos ouvidos de ${e}`,(e,t)=>`${e} recebe uma mensagem enigmática que menciona ${t}`,(e,t)=>`Boatos sobre ${t} começam a se espalhar, causando inquietação`,(e,t)=>`${e} ouve falar de ${t} pela primeira vez e sente um calafrio`,(e,t)=>`${e} tem um pressentimento sobre ${t}`,e=>`${e} encontra um objeto que pertencia a alguém de seu passado`,e=>`A vida de ${e} está prestes a tomar um rumo inesperado`],Ni=[(e,t)=>`Um evento catastrófico força ${e} a deixar ${t} e iniciar sua jornada`,(e,t,r)=>`${e} descobre que o destino de ${t} depende de ${r}`,(e,t)=>`${e} descobre que ${t} está mais próximo do que imaginava`,(e,t)=>`Uma escolha impossível: ${e} deve decidir se aceita ${t}`,(e,t)=>`O passado de ${e} volta para assombrá-lo, revelando conexões com ${t}`,(e,t)=>`${e} aceita a missão de ${t}, mesmo sem saber o custo`,(e,t)=>`Uma perda pessoal impulsiona ${e} a agir contra ${t}`,(e,t)=>`Sinais antigos em ${t} revelam que ${e} foi escolhido para algo maior`,(e,t)=>`${t} aparece com informações cruciais que mudam tudo`,(e,t,r)=>`${t} propõe uma aliança a ${e} para ${r}`,e=>`${e} tem um sonho profético que revela seu verdadeiro destino`,(e,t)=>`Uma carta misteriosa chega a ${e}, pedindo ajuda urgente em ${t}`,(e,t)=>`${e} jura vingança contra ${t} após uma grande perda`,e=>`${e} descobre que possui um dom oculto essencial para a jornada`,(e,t)=>`O chamado ecoa em ${t}, e ${e} não pode mais ignorá-lo`],ji=[(e,t)=>`${e} cruza a fronteira de ${t}, entrando em território desconhecido`,(e,t)=>`O primeiro confronto com as forças de ${t} mostra a magnitude do desafio`,(e,t)=>`${e} encontra ${t}, que compartilha o mesmo objetivo`,(e,t)=>`Uma revelação sobre ${t} muda completamente os planos de ${e}`,(e,t)=>`${e} descobre que possui uma habilidade oculta, essencial para ${t}`,(e,t)=>`O verdadeiro preço de ${t} começa a se tornar claro para ${e}`,(e,t)=>`${t} toma conhecimento de ${e} e começa a agir contra ele`,e=>`${e} recebe treinamento crucial de um mentor improvável`,(e,t)=>`${e} adentra as profundezas de ${t}, onde poucos retornaram`,e=>`${e} quebra uma regra fundamental e não há mais volta`,(e,t)=>`${t} oferece ajuda, mas com condições que ${e} não esperava`,(e,t)=>`A verdadeira natureza de ${t} começa a se revelar para ${e}`,e=>`${e} faz um juramento que mudará tudo`,(e,t)=>`${e} envia uma mensagem desafiadora para ${t}`,e=>`${e} transforma-se, deixando para trás quem costumava ser`],_i=[(e,t)=>`${e} é testado duramente e quase falha, questionando se conseguirá ${t}`,(e,t)=>`Uma aliança inesperada com ${t} fortalece a jornada`,(e,t)=>`${t} envia seus melhores agentes para interceptar ${e}`,(e,t)=>`${e} descobre um segredo terrível sobre ${t} que muda tudo`,e=>`A confiança entre ${e} e seus aliados é testada por uma traição aparente`,(e,t)=>`${e} encontra uma pista crucial que o aproxima de ${t}`,(e,t)=>`Uma emboscada de ${t} resulta em perdas significativas`,e=>`${e} deve fazer uma escolha moral difícil que define seu caráter`,(e,t)=>`${t} revela um segredo doloroso sobre o passado`,(e,t)=>`${e} descobre uma facção oculta operando em ${t}`,e=>`${e} aprende uma habilidade crucial através de sacrifício`,(e,t)=>`${e} captura um mensageiro de ${t} e obtém informações vitais`,(e,t)=>`Tensão surge entre ${e} e ${t}, ameaçando a aliança`,e=>`${e} enfrenta seus próprios demônios internos`,(e,t)=>`Uma antiga profecia sobre ${t} começa a fazer sentido para ${e}`],Si=[(e,t)=>`${e} finalmente confronta ${t}, mas a batalha não sai como esperado`,(e,t)=>`Uma revelação chocante: ${t} e ${e} estão conectados de forma inesperada`,e=>`${e} perde tudo que conquistou e deve recomeçar do zero`,(e,t)=>`O verdadeiro plano de ${t} é revelado, e é pior do que se imaginava`,(e,t)=>`${e} deve sacrificar algo precioso para ter chance de ${t}`,(e,t)=>`A maior fraqueza de ${e} é explorada por ${t} sem piedade`,(e,t)=>`${t} trai ${e} no pior momento possível`,e=>`${e} descobre que a única forma de vencer é tornar-se aquilo que sempre temeu`,(e,t)=>`${e} infiltra-se no território de ${t}, arriscando tudo`,(e,t)=>`O destino de ${t} pende por um fio nas mãos de ${e}`,e=>`${e} enfrenta uma ilusão cruel de seu maior desejo`,(e,t)=>`${t} sacrifica-se para dar a ${e} uma última chance`,(e,t)=>`${t} oferece a ${e} uma proposta tentadora que poderia mudar tudo`,e=>`${e} percebe que foi enganado desde o início`,(e,t)=>`A verdadeira natureza de ${t} é finalmente revelada`],Ii=[e=>`${e} ressurge das cinzas, transformado pela provação`,(e,t)=>`Uma nova abordagem para ${t} surge após a derrota`,(e,t)=>`${t} comete um erro fatal, subestimando a determinação de ${e}`,e=>`${e} encontra aliados onde menos esperava, reunindo forças`,(e,t)=>`A verdadeira natureza de ${t} é revelada - nada é como parecia`,e=>`${e} faz as pazes com seu passado, encontrando força interior`,e=>`A jornada interior de ${e} atinge seu ponto crucial`,(e,t)=>`${e} desenvolve um plano ousado para derrotar ${t} de vez`,e=>`${e} descobre um poder latente que sempre esteve dentro dele`,(e,t)=>`${t} retorna de forma inesperada para ajudar ${e}`,(e,t)=>`Os habitantes de ${t} unem-se em apoio a ${e}`,e=>`${e} recebe uma visão que mostra o caminho para a vitória`,(e,t)=>`${e} compreende finalmente as motivações de ${t}`,e=>`${e} perdoa-se por seus erros passados e avança renovado`,e=>`Uma arma inesperada cai nas mãos de ${e}`],Ci=[(e,t,r)=>`O confronto final entre ${e} e ${t} começa em ${r}`,(e,t)=>`${e} usa tudo que aprendeu na jornada para enfrentar ${t}`,(e,t)=>`Uma reviravolta final: ${t} tinha razões mais complexas do que parecia`,(e,t,r)=>`${e} deve escolher entre vitória pessoal e o bem maior de ${t}`,(e,t)=>`O sacrifício de ${t} dá a ${e} a chance necessária`,(e,t)=>`${e} enfrenta sua versão mais sombria antes de poder vencer ${t}`,(e,t)=>`A batalha final transforma ${t} para sempre`,(e,t)=>`${e} percebe que ${t} era apenas parte de algo muito maior`,(e,t)=>`${e} e ${t} travam um duelo que abala os fundamentos da realidade`,e=>`${e} faz a escolha final que define quem ele realmente é`,(e,t)=>`O futuro de ${t} é decidido pelas ações de ${e}`,(e,t)=>`${e} oferece redenção a ${t}, mas será aceita?`,e=>`${e} usa o poder que jurou nunca tocar`,(e,t)=>`${t} revela ter sido a chave para tudo desde o início`,(e,t)=>`${e} e ${t} devem unir forças contra uma ameaça maior`],Ti=[(e,t)=>`${e} finalmente ${t}, mas não da forma que esperava`,(e,t,r)=>`${t} começa a se reconstruir após a derrota de ${r}`,e=>`${e} retorna transformado, carregando as cicatrizes da jornada`,(e,t)=>`O legado de ${t} ainda ecoa - uma semente para futuras histórias`,e=>`${e} encontra paz, mas sinais sutis indicam que novos desafios virão`,(e,t)=>`As consequências da jornada se revelam para ${e} e todos em ${t}`,(e,t)=>`${e} deve lidar com quem se tornou após enfrentar ${t}`,e=>`Um epílogo mostra ${e} anos depois, e como a jornada o moldou`,(e,t)=>`${e} torna-se lenda em ${t}, inspirando gerações futuras`,(e,t)=>`A missão de ${t} está completa, mas a que custo?`,e=>`${e} passa o bastão para a próxima geração`,(e,t)=>`${e} e ${t} partem em direções diferentes, mas para sempre conectados`,(e,t)=>`Uma nova era começa em ${t} graças a ${e}`,e=>`${e} finalmente compreende o verdadeiro significado de sua jornada`,e=>`${e} desaparece nas brumas do tempo, tornando-se mito`],Ei=["Fantasia","Ficção Científica","Romance","Terror","Aventura","Drama","Comédia","Mistério"];function Ai(){const{story:e,selectedPosition:t,setSelectedPosition:r,updateStoryMeta:s,updatePointContent:n,addIntermediatePoint:o,removePoint:i,resetStory:l}=function(){const[e,t]=f.useState(ca),[r,s]=f.useState(1),n=f.useCallback((e,r)=>{t(t=>u(d({},t),{[e]:r}))},[]),o=f.useCallback((e,r)=>{t(t=>u(d({},t),{points:t.points.map(t=>t.position===e?u(d({},t),{content:r}):t)}))},[]),a=f.useCallback(e=>{const r=Math.round(100*e)/100;let n="intermediate";(r<2||r>=2&&r<3)&&(n="intermediate");const o={id:`point-${Date.now()}`,position:r,content:"",type:n};t(e=>u(d({},e),{points:[...e.points,o].sort((e,t)=>e.position-t.position)})),s(r)},[]),i=f.useCallback(e=>{[1,2,3].includes(e)||(t(t=>u(d({},t),{points:t.points.filter(t=>t.position!==e)})),s(null))},[]),l=f.useCallback(()=>{t({title:"",genre:"",synopsis:"",points:[{id:"1",position:1,content:"",type:"beginning"},{id:"2",position:2,content:"",type:"middle"},{id:"3",position:3,content:"",type:"end"}]}),s(1)},[]),c=f.useCallback(()=>{var t,r,s;const n=(null==(t=e.points.find(e=>1===e.position))?void 0:t.content)||"",o=(null==(r=e.points.find(e=>2===e.position))?void 0:r.content)||"",a=(null==(s=e.points.find(e=>3===e.position))?void 0:s.content)||"",i=e.points.filter(e=>e.content).sort((e,t)=>e.position-t.position).map(e=>e.content);return{beginning:n,middle:o,end:a,previousEvents:i}},[e.points]);return{story:e,selectedPosition:r,setSelectedPosition:s,updateStoryMeta:n,updatePointContent:o,addIntermediatePoint:a,removePoint:i,resetStory:l,getContext:c}}(),[c,h]=f.useState(Date.now()),[p,m]=f.useState(!1),[g,x]=f.useState(!1),[b,v]=f.useState(""),[y,w]=f.useState(null),[k,N]=f.useState(!1),j=e.points.find(e=>e.position===t),_=f.useCallback(()=>{!e.synopsis||e.synopsis.trim().length<10||(N(!0),setTimeout(()=>{const t=wi(e.synopsis);w(t),v(e.synopsis),x(!0),N(!1),h(Date.now())},800))},[e.synopsis]),S=g&&e.synopsis!==b,I=f.useCallback(()=>{var r,s,n;const o=(null==(r=e.points.find(e=>1===e.position))?void 0:r.content)||"",a=(null==(s=e.points.find(e=>2===e.position))?void 0:s.content)||"",i=(null==(n=e.points.find(e=>3===e.position))?void 0:n.content)||"",l=e.points.filter(e=>e.content).sort((e,t)=>e.position-t.position).map(e=>({position:e.position,content:e.content}));return{title:e.title,genre:e.genre||"Aventura",synopsis:g?b:"",beginning:o,middle:a,end:i,previousEvents:l,currentPosition:t||1}},[e,t,g,b]),C=t?function(e,t=Date.now()){if(!e.synopsis||e.synopsis.trim().length<10)return["📝 Adicione uma sinopse para receber sugestões personalizadas!","✨ Com uma sinopse, as sugestões usarão os nomes e eventos da SUA história","💡 Descreva seu protagonista, conflito e mundo para sugestões criativas"];const r=wi(e.synopsis),s=[];let n=t;const o=e=>{const t=1e4*Math.sin(n++);return Math.floor((t-Math.floor(t))*e)},a=e=>e[o(e.length)],i=e=>{const t=[...e];for(let r=t.length-1;r>0;r--){const e=o(r+1);[t[r],t[e]]=[t[e],t[r]]}return t},l=r.protagonist||"o protagonista",c=r.antagonist||"o antagonista",d=r.setting||"este mundo",u=r.mainConflict||"completar sua missão",h=r.characters.length>0?r.characters:["um aliado misterioso"],p=r.themes,m=e.currentPosition;let g=[];g=m<=1.25?ki:m<1.75?Ni:m<2?ji:m<2.35?_i:m<2.65?Si:m<2.85?Ii:m<3?Ci:Ti;const f=i(g);for(const v of f.slice(0,20))try{const e=[v(l,d,u),v(l,c,d),v(l,d),v(l,c),v(l,u),v(l,a(h)),v(l)];for(const t of e)if(t&&"string"==typeof t&&!t.includes("undefined")){s.push(t);break}}catch(b){}p.includes("redenção")&&s.push(`${l} tem a oportunidade de corrigir o maior erro de seu passado`,`Alguém que ${l} prejudicou aparece oferecendo uma chance de redenção`),p.includes("vingança")&&s.push(`A sede de vingança de ${l} contra ${c} ameaça consumi-lo por completo`,`${l} descobre que vingança pode custar mais do que está disposto a pagar`),p.includes("amor")&&s.push(`O amor de ${l} é colocado em risco direto por ${c}`,`${l} deve escolher entre seu amor e ${u}`),p.includes("família")&&s.push(`Segredos sobre a família de ${l} vêm à tona, mudando tudo`,`${l} descobre que ${c} tem conexões com sua própria linhagem`),p.includes("poder")&&s.push(`${l} é tentado pelo mesmo poder que corrompeu ${c}`,`O verdadeiro custo do poder necessário para ${u} se revela`),p.includes("traição")&&s.push(`${a(h)} revela ter trabalhado para ${c} o tempo todo`,`${l} é forçado a fingir trair seus aliados para se infiltrar`),p.includes("sacrifício")&&s.push(`${l} percebe que ${u} exigirá o sacrifício definitivo`,`${a(h)} oferece-se para sacrificar tudo por ${l}`),p.includes("destino")&&s.push(`Uma profecia antiga revela que ${l} sempre foi destinado a enfrentar ${c}`,`${l} tenta escapar de seu destino, mas cada ação o leva de volta a ele`);const x=e.previousEvents.filter(e=>e.position<m&&e.content&&e.content.length>10).sort((e,t)=>t.position-e.position);if(x.length>0){const e=x[0].content.split(/\s+/).filter(e=>e.length>4);if(e.length>0){const t=a(e);s.push(`As consequências do que aconteceu com "${t.toLowerCase()}" começam a se manifestar`,`${l} reflete sobre o evento anterior e toma uma decisão crucial`)}}return h.length>0&&"um aliado misterioso"!==h[0]&&(s.push(`${a(h)} revela um segredo que muda a perspectiva de ${l}`,`A lealdade de ${a(h)} é colocada à prova de forma dramática`),h.length>1&&s.push(`Tensão surge entre ${h[0]} e ${h[1]}, forçando ${l} a intervir`)),i([...new Set(s)].filter(e=>e&&e.length>10)).slice(0,6)}(I(),c):[],T=t?function(e){const t=e.currentPosition;let r="";if(r=t<=1?"🌅 Abertura":t<1.5?"📖 Estabelecendo o mundo":t<2?"🚀 Chamado à aventura":t<2.35?"⚔️ Testes e aliados":t<2.65?"🔥 Clímax":t<2.85?"💪 Provação suprema":t<3?"🏃 Caminho de volta":"🏁 Resolução",e.synopsis&&e.synopsis.length>10){const t=wi(e.synopsis),s=[];return t.protagonist&&s.push(`👤 ${t.protagonist}`),t.themes.length>0&&s.push(`🎭 ${t.themes.slice(0,2).join(", ")}`),`${r} | ${s.join(" • ")||"Sinopse analisada"}`}return`${r} | ⚠️ Adicione sinopse para sugestões personalizadas`}(I()):"",E=()=>{h(Date.now()+1e4*Math.random())};return a.jsxs("div",{className:"flex-1 overflow-y-auto p-4 md:p-8 space-y-6 bg-gradient-to-br from-slate-950 via-slate-900 to-slate-950",children:[a.jsxs("header",{className:"flex flex-col md:flex-row justify-between items-start md:items-end gap-4 border-b border-white/5 pb-6",children:[a.jsxs("div",{className:"space-y-1",children:[a.jsx("h1",{className:"text-3xl md:text-5xl font-space font-bold tracking-tighter text-white uppercase leading-none",children:"Story Builder Pro"}),a.jsx("p",{className:"text-[8px] md:text-[9px] tracking-[0.5em] text-slate-500 font-bold uppercase italic opacity-60",children:"✨ Timeline Narrativa • Sugestões Inteligentes • Análise de Sinopse"})]}),a.jsx("button",{onClick:()=>{l(),x(!1),v(""),w(null)},className:"px-6 py-3 bg-gradient-to-r from-orange-600 to-amber-600 hover:from-orange-500 hover:to-amber-500 text-white rounded-xl font-bold text-sm shadow-lg hover:shadow-orange-500/50 transition-all duration-300 hover:scale-105",children:"🔄 Nova História"})]}),a.jsxs("div",{className:"rounded-xl shadow-xl p-6 mb-6 text-white transition-all duration-500 "+(g?"bg-gradient-to-r from-green-600 to-emerald-700":"bg-gradient-to-r from-orange-600 to-amber-700"),children:[a.jsxs("div",{className:"flex items-start justify-between mb-4",children:[a.jsxs("div",{children:[a.jsxs("h2",{className:"text-xl font-bold flex items-center gap-2",children:[a.jsx("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})}),"Sinopse da História",g&&a.jsxs("span",{className:"ml-2 px-2 py-1 bg-white/20 rounded-full text-xs font-medium flex items-center gap-1",children:[a.jsx("svg",{className:"w-4 h-4",fill:"currentColor",viewBox:"0 0 20 20",children:a.jsx("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zm3.707-9.293a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z",clipRule:"evenodd"})}),"Interpretada"]})]}),a.jsx("p",{className:"text-white/80 text-sm mt-1",children:g?"✅ Sugestões personalizadas ativadas com base na sinopse":'📝 Escreva a sinopse e clique em "Interpretar Sinopse" para ativar sugestões inteligentes'})]}),a.jsx("button",{onClick:()=>m(!p),className:"p-2 hover:bg-white/10 rounded-lg transition-colors",title:"Dicas para escrever a sinopse",children:a.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M13 16h-1v-4h-1m1-4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})})})]}),p&&a.jsxs("div",{className:"bg-white/10 rounded-lg p-4 mb-4 text-sm",children:[a.jsx("p",{className:"font-medium mb-2",children:"💡 Dicas para uma boa sinopse:"}),a.jsxs("ul",{className:"space-y-1 text-white/90",children:[a.jsxs("li",{children:["• Mencione o ",a.jsx("strong",{children:"protagonista"})," pelo nome ou descrição"]}),a.jsxs("li",{children:["• Descreva o ",a.jsx("strong",{children:"conflito principal"})," ou objetivo"]}),a.jsxs("li",{children:["• Inclua o ",a.jsx("strong",{children:"cenário/mundo"})," onde a história acontece"]}),a.jsxs("li",{children:["• Mencione o ",a.jsx("strong",{children:"antagonista"})," ou obstáculo principal"]}),a.jsxs("li",{children:["• Use palavras que indiquem ",a.jsx("strong",{children:"temas"})," (amor, vingança, poder, família...)"]})]}),a.jsx("p",{className:"mt-3 text-white/70 italic",children:'Exemplo: "Maria, uma jovem arqueóloga, descobre um mapa antigo que leva a um templo perdido na Amazônia. Ela deve enfrentar caçadores de tesouros rivais e seus próprios medos para encontrar o artefato que pode salvar sua família da ruína."'})]}),a.jsx("textarea",{value:e.synopsis,onChange:e=>s("synopsis",e.target.value),placeholder:"Escreva aqui a sinopse da sua história... \n\nExemplo: Em um reino onde a magia foi proibida, uma jovem descobre que possui poderes ancestrais. Ela deve encontrar os outros portadores antes que o rei tirano os elimine, enquanto descobre segredos sobre sua própria família.",className:"w-full min-h-[150px] p-4 bg-white/10 border border-white/20 rounded-xl resize-none focus:outline-none focus:ring-2 focus:ring-white/50 text-white placeholder:text-white/50"}),a.jsxs("div",{className:"mt-4 flex flex-col sm:flex-row items-center gap-4",children:[a.jsx("button",{onClick:_,disabled:!e.synopsis||e.synopsis.trim().length<10||k,className:`px-6 py-3 rounded-xl font-bold text-lg flex items-center gap-2 transition-all transform hover:scale-105 disabled:opacity-50 disabled:cursor-not-allowed disabled:hover:scale-100 ${g?"bg-white text-emerald-700 hover:bg-white/90":"bg-white text-orange-700 hover:bg-white/90"} ${k?"animate-pulse":""}`,children:k?a.jsxs(a.Fragment,{children:[a.jsx("svg",{className:"w-5 h-5 animate-spin",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 4v5h.582m15.356 2A8.001 8.001 0 004.582 9m0 0H9m11 11v-5h-.581m0 0a8.003 8.003 0 01-15.357-2m15.357 2H15"})}),"Interpretando..."]}):a.jsxs(a.Fragment,{children:[a.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9.663 17h4.673M12 3v1m6.364 1.636l-.707.707M21 12h-1M4 12H3m3.343-5.657l-.707-.707m2.828 9.9a5 5 0 117.072 0l-.548.547A3.374 3.374 0 0014 18.469V19a2 2 0 11-4 0v-.531c0-.895-.356-1.754-.988-2.386l-.548-.547z"})}),g&&S?"Reinterpretar Sinopse":"Interpretar Sinopse"]})}),!e.synopsis||e.synopsis.trim().length<10?a.jsx("p",{className:"text-white/70 text-sm",children:"⚠️ Escreva pelo menos 10 caracteres na sinopse"}):g?S?a.jsxs("p",{className:"text-amber-200 text-sm flex items-center gap-1",children:[a.jsx("svg",{className:"w-4 h-4",fill:"currentColor",viewBox:"0 0 20 20",children:a.jsx("path",{fillRule:"evenodd",d:"M8.257 3.099c.765-1.36 2.722-1.36 3.486 0l5.58 9.92c.75 1.334-.213 2.98-1.742 2.98H4.42c-1.53 0-2.493-1.646-1.743-2.98l5.58-9.92zM11 13a1 1 0 11-2 0 1 1 0 012 0zm-1-8a1 1 0 00-1 1v3a1 1 0 002 0V6a1 1 0 00-1-1z",clipRule:"evenodd"})}),"Sinopse modificada! Clique para reinterpretar"]}):null:a.jsx("p",{className:"text-white/70 text-sm",children:"👆 Clique no botão para ativar sugestões baseadas na sinopse"})]}),g&&y&&a.jsxs("div",{className:"mt-6 p-4 bg-white/10 rounded-xl",children:[a.jsxs("h3",{className:"text-sm font-semibold mb-3 flex items-center gap-2",children:[a.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 5H7a2 2 0 00-2 2v12a2 2 0 002 2h10a2 2 0 002-2V7a2 2 0 00-2-2h-2M9 5a2 2 0 002 2h2a2 2 0 002-2M9 5a2 2 0 012-2h2a2 2 0 012 2"})}),"Elementos Detectados na Sinopse"]}),a.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-3",children:[a.jsxs("div",{className:"bg-white/10 rounded-lg p-3",children:[a.jsx("p",{className:"text-xs text-white/70 mb-1",children:"👤 Protagonista"}),a.jsx("p",{className:"text-sm font-medium truncate",children:y.protagonist||"Não identificado"})]}),a.jsxs("div",{className:"bg-white/10 rounded-lg p-3",children:[a.jsx("p",{className:"text-xs text-white/70 mb-1",children:"👹 Antagonista"}),a.jsx("p",{className:"text-sm font-medium truncate",children:y.antagonist||"Não identificado"})]}),a.jsxs("div",{className:"bg-white/10 rounded-lg p-3",children:[a.jsx("p",{className:"text-xs text-white/70 mb-1",children:"🌍 Cenário"}),a.jsx("p",{className:"text-sm font-medium truncate",children:y.setting||"Não identificado"})]}),a.jsxs("div",{className:"bg-white/10 rounded-lg p-3",children:[a.jsx("p",{className:"text-xs text-white/70 mb-1",children:"🎭 Temas"}),a.jsx("p",{className:"text-sm font-medium truncate",children:y.themes.length>0?y.themes.slice(0,3).join(", "):"Não identificados"})]})]}),y.mainConflict&&a.jsxs("div",{className:"mt-3 bg-white/10 rounded-lg p-3",children:[a.jsx("p",{className:"text-xs text-white/70 mb-1",children:"⚔️ Conflito Principal"}),a.jsx("p",{className:"text-sm font-medium",children:y.mainConflict})]}),y.characters.length>0&&a.jsxs("div",{className:"mt-3 bg-white/10 rounded-lg p-3",children:[a.jsx("p",{className:"text-xs text-white/70 mb-1",children:"👥 Personagens Mencionados"}),a.jsx("p",{className:"text-sm font-medium",children:y.characters.join(", ")})]})]})]}),a.jsx("div",{className:"bg-white/[0.03] border border-white/10 rounded-xl shadow-lg p-6 mb-6",children:a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-orange-400/70 mb-2 uppercase tracking-wider text-xs font-black",children:"📝 Título da História"}),a.jsx("input",{type:"text",value:e.title,onChange:e=>s("title",e.target.value),placeholder:"Digite o título da sua história...",className:"w-full px-4 py-3 bg-white/5 border border-white/10 rounded-lg focus:outline-none focus:ring-2 focus:ring-orange-500/50 text-white placeholder:text-slate-500"})]}),a.jsxs("div",{children:[a.jsxs("label",{className:"block text-sm font-medium text-orange-400/70 mb-2 uppercase tracking-wider text-xs font-black",children:["🎭 Gênero ",a.jsx("span",{className:"text-orange-400",children:"(influencia as sugestões)"})]}),a.jsxs("select",{value:e.genre,onChange:e=>{s("genre",e.target.value),g&&E()},className:"w-full px-4 py-3 bg-white/5 border border-white/10 rounded-lg focus:outline-none focus:ring-2 focus:ring-orange-500/50 text-white",children:[a.jsx("option",{value:"",children:"Selecione um gênero..."}),Ei.map(e=>a.jsx("option",{value:e,children:e},e))]})]})]})}),a.jsxs("div",{className:"bg-white/[0.03] border border-white/10 rounded-xl shadow-lg p-6 mb-6 border-l-4 border-orange-500",children:[a.jsxs("h2",{className:"text-lg font-semibold mb-3 flex items-center gap-2 text-white",children:[a.jsx("svg",{className:"w-5 h-5 text-orange-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M13 16h-1v-4h-1m1-4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})}),"Como funciona a Linha do Tempo?"]}),a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4 text-sm",children:[a.jsxs("div",{className:"bg-emerald-500/10 border border-emerald-500/30 rounded-lg p-4",children:[a.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[a.jsx("span",{className:"w-8 h-8 bg-emerald-500 rounded-full flex items-center justify-center text-sm font-bold text-white",children:"1"}),a.jsx("span",{className:"font-medium text-emerald-400",children:"Começo"})]}),a.jsx("p",{className:"text-slate-300",children:"Estabeleça o mundo, apresente personagens e o gancho inicial."})]}),a.jsxs("div",{className:"bg-amber-500/10 border border-amber-500/30 rounded-lg p-4",children:[a.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[a.jsx("span",{className:"w-8 h-8 bg-amber-500 rounded-full flex items-center justify-center text-sm font-bold text-white",children:"2"}),a.jsx("span",{className:"font-medium text-amber-400",children:"Meio"})]}),a.jsx("p",{className:"text-slate-300",children:"Desenvolva o conflito, crie tensão e leve ao clímax."})]}),a.jsxs("div",{className:"bg-rose-500/10 border border-rose-500/30 rounded-lg p-4",children:[a.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[a.jsx("span",{className:"w-8 h-8 bg-rose-500 rounded-full flex items-center justify-center text-sm font-bold text-white",children:"3"}),a.jsx("span",{className:"font-medium text-rose-400",children:"Fim"})]}),a.jsx("p",{className:"text-slate-300",children:"Resolva os conflitos e conclua a jornada dos personagens."})]})]}),a.jsxs("p",{className:"mt-4 text-sm text-slate-400 bg-white/5 p-3 rounded-lg border border-white/10",children:["➕ ",a.jsx("strong",{children:"Pontos intermediários:"}),' Clique nos botões "+" entre os pontos principais para adicionar eventos com números decimais (1.5, 2.25, etc.) e detalhar sua narrativa.']})]}),a.jsx("div",{className:"mb-6",children:a.jsx(vi,{points:e.points,onAddPoint:o,onSelectPoint:r,selectedPosition:t})}),a.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[a.jsxs("div",{className:"space-y-4",children:[a.jsxs("h2",{className:"text-lg font-semibold text-white flex items-center gap-2",children:[a.jsx("svg",{className:"w-5 h-5 text-orange-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M11 5H6a2 2 0 00-2 2v11a2 2 0 002 2h11a2 2 0 002-2v-5m-1.414-9.414a2 2 0 112.828 2.828L11.828 15H9v-2.828l8.586-8.586z"})}),"Editor de Pontos",!g&&a.jsx("span",{className:"text-xs bg-amber-500/20 text-amber-300 px-2 py-1 rounded-full border border-amber-500/30",children:"⚠️ Interprete a sinopse para sugestões personalizadas"})]}),j?a.jsx(bi,{point:j,suggestions:C,onUpdate:e=>n(j.position,e),onDelete:[1,2,3].includes(j.position)?void 0:()=>i(j.position),onRegenerateSuggestions:E,isMainPoint:[1,2,3].includes(j.position),rationale:T,hasSynopsis:g}):a.jsxs("div",{className:"bg-white/[0.03] border border-white/10 rounded-xl shadow-lg p-8 text-center text-slate-500",children:[a.jsx("svg",{className:"w-12 h-12 mx-auto mb-4 opacity-50",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1.5,d:"M15 15l-2 5L9 9l11 4-5 2zm0 0l5 5M7.188 2.239l.777 2.897M5.136 7.965l-2.898-.777M13.95 4.05l-2.122 2.122m-5.657 5.656l-2.12 2.122"})}),a.jsx("p",{children:"Selecione um ponto na linha do tempo para editar"})]}),a.jsxs("div",{className:"bg-white/[0.03] border border-white/10 rounded-xl shadow-lg p-4",children:[a.jsxs("h3",{className:"text-sm font-medium text-slate-300 mb-3 flex items-center gap-2",children:[a.jsx("svg",{className:"w-4 h-4 text-orange-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 6h16M4 10h16M4 14h16M4 18h16"})}),"Navegação Rápida"]}),a.jsx("div",{className:"space-y-2 max-h-60 overflow-y-auto",children:e.points.sort((e,t)=>e.position-t.position).map(e=>a.jsx("button",{onClick:()=>r(e.position),className:"w-full text-left px-3 py-2 rounded-lg text-sm transition-all "+(t===e.position?"bg-orange-500/20 text-orange-300 shadow-sm border border-orange-500/30":"bg-white/5 hover:bg-white/10 text-slate-300 border border-white/10"),children:a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx("span",{className:"w-6 h-6 rounded-full text-white text-xs flex items-center justify-center font-medium "+("beginning"===e.type?"bg-emerald-500":"middle"===e.type?"bg-amber-500":"end"===e.type?"bg-rose-500":"bg-violet-500"),children:e.position}),a.jsx("span",{className:"truncate flex-1",children:e.content?e.content.length>40?e.content.slice(0,40)+"...":e.content:a.jsx("span",{className:"text-slate-500 italic",children:"beginning"===e.type?"Começo (vazio)":"middle"===e.type?"Meio (vazio)":"end"===e.type?"Fim (vazio)":`Ponto ${e.position} (vazio)`})}),e.content&&a.jsx("svg",{className:"w-4 h-4 text-green-400 flex-shrink-0",fill:"currentColor",viewBox:"0 0 20 20",children:a.jsx("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zm3.707-9.293a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z",clipRule:"evenodd"})})]})},e.id))})]})]}),a.jsxs("div",{children:[a.jsxs("h2",{className:"text-lg font-semibold text-white mb-4 flex items-center gap-2",children:[a.jsxs("svg",{className:"w-5 h-5 text-orange-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:[a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 12a3 3 0 11-6 0 3 3 0 016 0z"}),a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M2.458 12C3.732 7.943 7.523 5 12 5c4.478 0 8.268 2.943 9.542 7-1.274 4.057-5.064 7-9.542 7-4.477 0-8.268-2.943-9.542-7z"})]}),"Prévia da História"]}),a.jsx(yi,{story:e})]})]}),a.jsxs("div",{className:"mt-6 bg-white/[0.03] border border-white/10 rounded-xl shadow-lg p-6",children:[a.jsxs("h3",{className:"text-sm font-medium text-slate-300 mb-4 flex items-center gap-2",children:[a.jsx("svg",{className:"w-4 h-4 text-orange-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 19v-6a2 2 0 00-2-2H5a2 2 0 00-2 2v6a2 2 0 002 2h2a2 2 0 002-2zm0 0V9a2 2 0 012-2h2a2 2 0 012 2v10m-6 0a2 2 0 002 2h2a2 2 0 002-2m0 0V5a2 2 0 012-2h2a2 2 0 012 2v14a2 2 0 01-2 2h-2a2 2 0 01-2-2z"})}),"Estatísticas da História"]}),a.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-5 gap-4",children:[a.jsxs("div",{className:"text-center p-4 bg-orange-500/10 border border-orange-500/30 rounded-lg",children:[a.jsx("div",{className:"text-2xl font-bold text-orange-400",children:e.points.length}),a.jsx("div",{className:"text-xs text-slate-400 uppercase tracking-wider",children:"Pontos"})]}),a.jsxs("div",{className:"text-center p-4 bg-emerald-500/10 border border-emerald-500/30 rounded-lg",children:[a.jsx("div",{className:"text-2xl font-bold text-emerald-400",children:e.points.filter(e=>e.content).length}),a.jsx("div",{className:"text-xs text-slate-400 uppercase tracking-wider",children:"Preenchidos"})]}),a.jsxs("div",{className:"text-center p-4 bg-amber-500/10 border border-amber-500/30 rounded-lg",children:[a.jsx("div",{className:"text-2xl font-bold text-amber-400",children:e.points.reduce((e,t)=>{var r;return e+((null==(r=t.content)?void 0:r.split(/\s+/).filter(e=>e).length)||0)},0)}),a.jsx("div",{className:"text-xs text-slate-400 uppercase tracking-wider",children:"Palavras"})]}),a.jsxs("div",{className:"text-center p-4 bg-rose-500/10 border border-rose-500/30 rounded-lg",children:[a.jsxs("div",{className:"text-2xl font-bold text-rose-400",children:[Math.round(e.points.filter(e=>e.content).length/e.points.length*100),"%"]}),a.jsx("div",{className:"text-xs text-slate-400 uppercase tracking-wider",children:"Completo"})]}),a.jsxs("div",{className:"text-center p-4 rounded-lg border "+(g?"bg-green-500/10 border-green-500/30":"bg-white/5 border-white/10"),children:[a.jsx("div",{className:"text-2xl font-bold "+(g?"text-green-400":"text-slate-500"),children:g?"✓":"✗"}),a.jsx("div",{className:"text-xs text-slate-400 uppercase tracking-wider",children:"Sinopse Ativa"})]})]})]}),a.jsx("footer",{className:"mt-8 py-6 border-t border-white/10 bg-white/5 rounded-lg",children:a.jsx("p",{className:"text-center text-sm text-slate-500",children:"Story Builder Pro - Sugestões inteligentes baseadas na sua sinopse ✨"})})]})}"undefined"!=typeof window&&(window.testFirebaseConnection=Ho);const Oi=[{id:"p1",name:"Manhã"},{id:"p2",name:"Tarde"},{id:"p3",name:"Noite"},{id:"p4",name:"♾️ Constantes"}],Pi=["O Universo vibra com sua nova frequência.","As estrelas se alinham ao seu comando.","Você transcendeu as limitações da matéria.","Sua luz atravessa as nébulas do tempo.","A sincronia perfeita foi estabelecida."],Ri=[{name:"Vácuo Índigo",primary:"#4338ca",secondary:"#1e1b4b"},{name:"Supernova Rubi",primary:"#e11d48",secondary:"#4c0519"},{name:"Aurora Esmeralda",primary:"#10b981",secondary:"#064e3b"},{name:"Névoa Dourada",primary:"#f59e0b",secondary:"#78350f"},{name:"Abismo Cinzento",primary:"#475569",secondary:"#0f172a"},{name:"Plasma Violeta",primary:"#a855f7",secondary:"#3b0764"}],Li=()=>{var e,t;const[r,s]=f.useState(!1),[n,o]=f.useState(""),[i,l]=f.useState(""),[h,m]=f.useState([]),[g,x]=f.useState({xp:0,level:1,completedCount:0,gaveUpCount:0,ignoredCount:0,timeLogs:[],nebulaTheme:Ri[0]}),[b,v]=f.useState(!0),[y,w]=f.useState("DASHBOARD"),[k,N]=f.useState(""),[j,_]=f.useState(!1),[S,I]=f.useState([]),[C,T]=f.useState("DAILY"),[E,A]=f.useState(null),[O,P]=f.useState(!1),[R,L]=f.useState(""),[M,D]=f.useState(2),[$,U]=f.useState("WORK"),[z,F]=f.useState(!1),[q,B]=f.useState(""),[V,H]=f.useState([]),[W,G]=f.useState("p1"),[J,K]=f.useState({}),[Z,X]=f.useState("syncing"),[Y,ee]=f.useState([]),[te,re]=f.useState(""),[se,ne]=f.useState(""),[oe,ae]=f.useState("OTHER"),[ie,ce]=f.useState([]),[de,ue]=f.useState([]),[he,pe]=f.useState([]),[me,ge]=f.useState([]),[fe,xe]=f.useState(!1),[be,ve]=f.useState(""),[ye,we]=f.useState(""),[ke,Ne]=f.useState(""),[je,_e]=f.useState(""),[Se,Ie]=f.useState("month"),Ce=f.useMemo(()=>c.find(e=>e.level===g.level)||c[0],[g.level]),Te=f.useMemo(()=>c.find(e=>e.level===g.level+1),[g.level]);f.useEffect(()=>{"true"===localStorage.getItem("isAuthenticated")&&s(!0)},[]);const Ee=e=>{e.preventDefault(),"EON"===n&&"0130"===i?(s(!0),localStorage.setItem("isAuthenticated","true")):alert("Credenciais inválidas. Tente novamente.")},Ae=f.useMemo(()=>{const e=new Date,t=new Date;if("week"===Se){const r=e.getDay();t.setDate(e.getDate()-r),t.setHours(0,0,0,0)}else t.setDate(1),t.setHours(0,0,0,0);const r=me.filter(e=>e.createdAt>=t.getTime()),s=r.reduce((e,t)=>e+t.pricePaid,0),n=r.reduce((e,t)=>e+t.salePrice,0),o=r.reduce((e,t)=>e+t.profit,0),a=r.reduce((e,t)=>e+.1*t.profit,0);return{totalPaid:s,totalSale:n,totalProfit:o,totalCompanyDiscount:a,netProfit:o-a,count:r.length}},[me,Se]);f.useEffect(()=>{p(null,null,function*(){const e=yield Ho();X(e?"synced":"offline")})},[]),f.useEffect(()=>{const e=()=>{const e=(new Date).toDateString();localStorage.getItem("cronos_last_routine_check")!==e&&(m(t=>t.map(t=>{var r;return"ROUTINE"===t.type&&"PENDING"!==t.status&&(t.lastDone?new Date(t.lastDone).toDateString():null)!==e?u(d({},t),{status:"PENDING",currentInput:"",lastDone:void 0,completedAt:void 0,steps:(null==(r=t.steps)?void 0:r.map(e=>u(d({},e),{completed:!1})))||[]}):t})),localStorage.setItem("cronos_last_routine_check",e))};e();const t=setInterval(e,6e4);return()=>clearInterval(t)},[]),f.useEffect(()=>{p(null,null,function*(){v(!0),console.log("🔄 Iniciando carregamento de dados do Firebase...");try{const[e,t,r,s,n,o,a]=yield Promise.all([p(null,null,function*(){if(!Ro&&Lo){const e=localStorage.getItem("cronos_stats");return e?JSON.parse(e):null}try{const e=Q(jo,Io,Po),t=yield Mo(e);return t.exists()?t.data():null}catch(e){const t=localStorage.getItem("cronos_stats");return t?JSON.parse(t):null}}),$o(),p(null,null,function*(){if(!Ro&&Lo){const e=localStorage.getItem("cronos_books");return e?JSON.parse(e):[]}try{const e=Q(jo,Co,Po),t=yield Mo(e);return t.exists()&&t.data().books||[]}catch(e){const t=localStorage.getItem("cronos_books");return t?JSON.parse(t):[]}}),p(null,null,function*(){if(!Ro&&Lo){const e=localStorage.getItem("cronos_stories");return e?JSON.parse(e):[]}try{const e=Q(jo,To,Po),t=yield Mo(e);return t.exists()&&t.data().stories||[]}catch(e){const t=localStorage.getItem("cronos_stories");return t?JSON.parse(t):[]}}),p(null,null,function*(){if(!Ro&&Lo){const e=localStorage.getItem("cronos_links");return e?JSON.parse(e):[]}try{const e=Q(jo,Eo,Po),t=yield Mo(e);return t.exists()&&t.data().links||[]}catch(e){const t=localStorage.getItem("cronos_links");return t?JSON.parse(t):[]}}),p(null,null,function*(){if(!Ro&&Lo){const e=localStorage.getItem("cronos_products");return e?JSON.parse(e):[]}try{const e=Q(jo,Ao,Po),t=yield Mo(e);return t.exists()&&t.data().products||[]}catch(e){const t=localStorage.getItem("cronos_products");return t?JSON.parse(t):[]}}),p(null,null,function*(){if(!Ro&&Lo){const e=localStorage.getItem("cronos_purchases");return e?JSON.parse(e):[]}try{const e=Q(jo,Oo,Po),t=yield Mo(e);return t.exists()&&t.data().purchases||[]}catch(e){const t=localStorage.getItem("cronos_purchases");return t?JSON.parse(t):[]}})]);let i=e,l=t,c=r,h=s,g=n,f=o,b=a;if(i&&(x(i),console.log("📊 Stats carregados:",i)),c&&c.length>0&&(ce(c),console.log("📚 Books carregados:",c.length)),h&&h.length>0&&(ue(h),console.log("📖 Stories carregadas:",h.length)),g&&g.length>0&&(ee(g),console.log("🔗 Links carregados:",g.length)),f&&f.length>0&&(pe(f),console.log("📦 Products carregados:",f.length)),b&&b.length>0&&(ge(b),console.log("🛒 Purchases carregados:",b.length)),l&&l.length>0){const e=(new Date).toDateString(),t=Oi.map(e=>e.id),r=l.map(r=>{var s;r.periodId&&t.includes(r.periodId)||(r.periodId="p1");const n=r.lastDone?new Date(r.lastDone).toDateString():null;return"ROUTINE"===r.type&&"PENDING"!==r.status&&n!==e?u(d({},r),{status:"PENDING",currentInput:"",lastDone:void 0,completedAt:void 0,steps:(null==(s=r.steps)?void 0:s.map(e=>u(d({},e),{completed:!1})))||[]}):r}).filter(t=>"DAILY"!==t.type||"PENDING"===t.status||!t.lastDone||new Date(t.lastDone).toDateString()===e);m(r),console.log("✅ Tasks processadas e carregadas:",r.length)}else console.log("⚠️ Nenhuma task encontrada")}catch(e){console.error("❌ Erro ao carregar dados:",e),console.log("🆘 Tentando recuperação total do localStorage...");try{const e=localStorage.getItem("cronos_stats"),t=localStorage.getItem("cronos_tasks"),r=localStorage.getItem("cronos_books");e&&x(JSON.parse(e)),t&&m(JSON.parse(t)),r&&ce(JSON.parse(r)),console.log("✅ Dados recuperados do localStorage após erro!")}catch(t){console.error("❌ Erro no fallback do localStorage:",t)}}finally{v(!1),console.log("✅ Carregamento concluído!")}})},[]),f.useEffect(()=>{!b&&h.length>=0&&(Do(h),localStorage.setItem("cronos_tasks",JSON.stringify(h)))},[h,b]),f.useEffect(()=>{b||(Uo(g),localStorage.setItem("cronos_stats",JSON.stringify(g)))},[g,b]),f.useEffect(()=>{if(b)return;const e=setInterval(()=>{!function(e,t,r,s,n,o){const a=localStorage.getItem("cronos_user_id")||"unknown",i={version:"1.0.0",timestamp:Date.now(),exportDate:(new Date).toISOString(),userId:a,data:{tasks:e,stats:t,books:r,links:s,products:n,purchases:o}},l=localStorage.getItem("cronos_auto_backups"),c=l?JSON.parse(l):[];c.unshift(i),c.length>5&&c.splice(5),localStorage.setItem("cronos_auto_backups",JSON.stringify(c)),console.log(`💾 Auto-backup saved (${c.length}/5)`)}(h,g,ie,Y,he,me)},3e5);return()=>clearInterval(e)},[h,g,ie,Y,b]),f.useEffect(()=>{const e=()=>{console.log("🚨 SALVAMENTO EMERGENCIAL - Usuário saindo da página!");try{localStorage.setItem("cronos_tasks",JSON.stringify(h)),localStorage.setItem("cronos_stats",JSON.stringify(g)),localStorage.setItem("cronos_books",JSON.stringify(ie)),localStorage.setItem("cronos_stories",JSON.stringify(de)),localStorage.setItem("cronos_links",JSON.stringify(Y)),localStorage.setItem("cronos_products",JSON.stringify(he)),localStorage.setItem("cronos_purchases",JSON.stringify(me)),console.log("✅ Dados salvos com sucesso no localStorage!")}catch(e){console.error("❌ ERRO ao salvar dados:",e)}Do(h).catch(()=>{}),Uo(g).catch(()=>{}),zo(ie).catch(()=>{}),Fo(de).catch(()=>{}),qo(Y).catch(()=>{}),Bo(he).catch(()=>{}),Vo(me).catch(()=>{})},t=t=>{if(e(),h.some(e=>"IN_PROGRESS"===e.status))return t.preventDefault(),t.returnValue="Você tem tarefas em andamento. Tem certeza que deseja sair?"},r=()=>{document.hidden&&(console.log("👁️ Página ficou invisível - salvando dados..."),e())},s=t=>{console.log("📱 Página sendo descarregada (mobile/tablet) - salvando..."),e()},n=()=>{console.log("🔍 Janela perdeu foco - salvando por precaução..."),e()};return window.addEventListener("beforeunload",t),document.addEventListener("visibilitychange",r),window.addEventListener("pagehide",s),window.addEventListener("blur",n),()=>{e(),window.removeEventListener("beforeunload",t),document.removeEventListener("visibilitychange",r),window.removeEventListener("pagehide",s),window.removeEventListener("blur",n)}},[h,g,ie,de,Y,he,me,b]),f.useEffect(()=>{window.hideAppLoader&&window.hideAppLoader()},[]),f.useEffect(()=>{!b&&ie.length>=0&&zo(ie)},[ie,b]),f.useEffect(()=>{!b&&Y.length>=0&&qo(Y)},[Y,b]),f.useEffect(()=>{!b&&de.length>=0&&(Fo(de),localStorage.setItem("cronos_stories",JSON.stringify(de)))},[de,b]),f.useEffect(()=>{!b&&he.length>=0&&Bo(he)},[he,b]),f.useEffect(()=>{!b&&me.length>=0&&(Vo(me),localStorage.setItem("cronos_purchases",JSON.stringify(me)))},[me,b]),f.useEffect(()=>{"EVOLUTION"!==y||k||Oe()},[y,g.level]);const Oe=()=>p(null,null,function*(){_(!0);const e=yield function(e){return p(this,null,function*(){var t,r,s,n,o,a,i;const l=le[e.level]||`Você alcançou a era: ${e.storyEra}. O conhecimento desta época está sendo descriptografado no registro universal...`;try{const c=null==(r=null==(t=window.process)?void 0:t.env)?void 0:r.API_KEY;if(!c||""===c)return l;const d=yield fetch(`https://generativelanguage.googleapis.com/v1beta/models/gemini-1.5-flash:generateContent?key=${c}`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({contents:[{parts:[{text:`Conte um parágrafo curto, inspirador e educativo (máximo 150 palavras) sobre a história do universo/mundo especificamente sobre o estágio: "${e.storyEra}". Este é o Nível ${e.level} de uma jornada de evolução. Fale como se estivesse narrando a evolução de um planeta para seu guardião. Use português do Brasil.`}]}],generationConfig:{temperature:.8,topP:.95,maxOutputTokens:250}})});return d.ok?(null==(i=null==(a=null==(o=null==(n=null==(s=(yield d.json()).candidates)?void 0:s[0])?void 0:n.content)?void 0:o.parts)?void 0:a[0])?void 0:i.text)||l:(console.log("Gemini API error, using fallback"),l)}catch(c){return console.log("Using fallback narrative (Gemini unavailable):",c),l}})}(Ce);N(e),_(!1)}),Pe=(e,t,r=0,s)=>{x(n=>{let o=Math.max(0,(n.xp||0)+e);const a=c.filter(e=>e.xpRequired<=o).pop();let i=a?a.level:1;i>n.level&&A(a||null);const l=r>0?{timestamp:Date.now(),seconds:r,taskId:(null==s?void 0:s.id)||"unknown",taskTitle:(null==s?void 0:s.title)||"Sincronia"}:null;return u(d({},n),{xp:o,level:i,completedCount:"COMPLETED"===t?(n.completedCount||0)+1:n.completedCount||0,gaveUpCount:"GAVE_UP"===t?(n.gaveUpCount||0)+1:n.gaveUpCount||0,ignoredCount:"IGNORED"===t?(n.ignoredCount||0)+1:n.ignoredCount||0,timeLogs:l?[l,...n.timeLogs||[]].slice(0,100):n.timeLogs||[]})})},Re=()=>{q.trim()&&(H(e=>[...e,q.trim()]),B(""))},Le=(e,t)=>{m(r=>r.map(r=>r.id===e?d(d({},r),t):r))},Me=(e,t)=>{m(r=>r.map(r=>{var s;if(r.id===e){const e=null==(s=r.steps)?void 0:s.map(e=>{if(e.id===t){const t=!e.completed;return t?Pe(1,"STEP_COMPLETED",0,r):Pe(-1,"STEP_UNCHECKED",0,r),u(d({},e),{completed:t})}return e});return u(d({},r),{steps:e})}return r}))},De=(e,t,r)=>{let s=0;"COMPLETED"===e?s=5:"CYCLE_FINISHED"===e||"GAVE_UP"===e?s=3:"IGNORED"===e&&(s=-3),Pe(s,e,t,r),m(t=>t.map(t=>t.id===r.id?u(d({},t),{status:"COMPLETED"===e?"COMPLETED":t.status,lastDone:Date.now(),completedAt:"COMPLETED"===e?Date.now():t.completedAt}):t)),I(e=>e.filter(e=>e!==r.id)),"COMPLETED"===e&&K(e=>{const t=d({},e);return delete t[r.id],t})},$e=e=>{const t=Math.floor(e/3600),r=Math.floor(e%3600/60),s=e%60;return t>0?`${t}h ${r}m ${s}s`:`${r}m ${s}s`},Ue=()=>p(null,null,function*(){console.log("🔥 === SALVANDO NO FIREBASE ==="),console.log("📊 Dados a salvar:",{tasks:h.length,stats:`Level ${g.level}`,books:ie.length,stories:de.length,links:Y.length,products:he.length,purchases:me.length}),X("syncing");try{if(console.log("🔍 Verificando conexão com Firebase..."),!(yield Ho()))return console.error("❌ Firebase não está acessível!"),alert("❌ ERRO: Firebase Offline\n\nO servidor Firebase não está respondendo.\n\nVerifique:\n1. Conexão com internet\n2. Console (F12) para mais detalhes\n\nSeus dados continuam salvos localmente."),void X("offline");console.log("📤 Enviando dados para Firebase..."),yield Promise.all([Do(h),Uo(g),zo(ie),Fo(de),qo(Y),Bo(he),Vo(me)]),console.log("✅ SUCESSO! Todos os dados salvos no Firebase!"),X("synced"),alert(`🔥 SALVO NO FIREBASE!\n\n📋 Tasks: ${h.length}\n⭐ Stats: Level ${g.level} (${g.xp} XP)\n📚 Books: ${ie.length}\n📖 Stories: ${de.length}\n🔗 Links: ${Y.length}\n📦 Produtos: ${he.length}\n🛒 Compras: ${me.length}\n\nTodos os dados foram enviados para a nuvem!`)}catch(e){console.error("❌ Erro ao salvar no Firebase:",e),X("offline"),alert("❌ ERRO ao salvar!\n\nVeja o console (F12) para detalhes.\n\nSeus dados estão salvos localmente.")}}),ze=e=>{const t=Date.now()-e;return Math.floor(t/864e5)};f.useEffect(()=>{const e=localStorage.getItem("cronos_saved_links");if(e)try{ee(JSON.parse(e))}catch(t){}},[]),f.useEffect(()=>{b||localStorage.setItem("cronos_saved_links",JSON.stringify(Y))},[Y,b]),f.useEffect(()=>{b||localStorage.setItem("cronos_books",JSON.stringify(ie))},[ie,b]);const Fe={1:"ALTA",2:"MÉDIA",3:"BAIXA"},qe={1:"bg-red-500",2:"bg-indigo-500",3:"bg-slate-700"},Be={1:"text-red-400",2:"text-indigo-400",3:"text-slate-500"};return r?a.jsxs("div",{className:"h-[100dvh] w-full flex flex-col md:flex-row bg-[#020617] text-slate-200 overflow-hidden font-inter select-none relative",children:[a.jsxs("div",{className:"fixed inset-0 pointer-events-none overflow-hidden",children:[a.jsx("div",{className:"absolute top-0 left-1/4 w-96 h-96 bg-indigo-600/10 rounded-full blur-[120px] animate-pulse"}),a.jsx("div",{className:"absolute bottom-0 right-1/4 w-96 h-96 bg-purple-600/10 rounded-full blur-[120px] animate-pulse",style:{animationDelay:"1s"}}),a.jsx("div",{className:"absolute top-1/2 left-1/2 w-96 h-96 bg-cyan-600/5 rounded-full blur-[100px] animate-pulse",style:{animationDelay:"2s"}})]}),a.jsx("style",{children:"\n        .tab-glow { text-shadow: 0 0 15px rgba(129, 140, 248, 0.4); }\n        .active-text-gradient {\n          background: linear-gradient(135deg, #fff 0%, #818cf8 100%);\n          -webkit-background-clip: text;\n          -webkit-text-fill-color: transparent;\n        }\n        .inactive-text-style { color: rgba(148, 163, 184, 0.3); }\n        .console-blur { backdrop-filter: blur(24px) saturate(180%); }\n        .hologram-card { \n          background: linear-gradient(135deg, rgba(99, 102, 241, 0.03) 0%, rgba(139, 92, 246, 0.02) 100%);\n          border: 1px solid rgba(129, 140, 248, 0.1);\n          box-shadow: \n            inset 0 1px 0 rgba(255, 255, 255, 0.05),\n            0 4px 24px rgba(0, 0, 0, 0.3),\n            0 0 0 1px rgba(99, 102, 241, 0.05);\n          transition: all 0.3s ease;\n        }\n        .hologram-card:hover {\n          border-color: rgba(129, 140, 248, 0.2);\n          box-shadow: \n            inset 0 1px 0 rgba(255, 255, 255, 0.08),\n            0 8px 32px rgba(99, 102, 241, 0.15),\n            0 0 0 1px rgba(99, 102, 241, 0.1);\n          transform: translateY(-2px);\n        }\n        .task-card {\n          background: linear-gradient(135deg, rgba(15, 23, 42, 0.8) 0%, rgba(30, 41, 59, 0.6) 100%);\n          border: 1px solid rgba(148, 163, 184, 0.1);\n          box-shadow: \n            0 10px 30px -10px rgba(0, 0, 0, 0.5),\n            inset 0 1px 0 rgba(255, 255, 255, 0.03);\n          backdrop-filter: blur(20px);\n          transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);\n        }\n        .task-card:hover {\n          border-color: rgba(129, 140, 248, 0.3);\n          box-shadow: \n            0 20px 40px -15px rgba(99, 102, 241, 0.3),\n            inset 0 1px 0 rgba(255, 255, 255, 0.05);\n          transform: translateY(-3px) scale(1.01);\n        }\n        .priority-glow-high {\n          box-shadow: 0 0 20px rgba(239, 68, 68, 0.3);\n          animation: pulse-glow-red 2s ease-in-out infinite;\n        }\n        .priority-glow-medium {\n          box-shadow: 0 0 15px rgba(99, 102, 241, 0.2);\n        }\n        @keyframes pulse-glow-red {\n          0%, 100% { box-shadow: 0 0 20px rgba(239, 68, 68, 0.3); }\n          50% { box-shadow: 0 0 30px rgba(239, 68, 68, 0.5); }\n        }\n        .input-glow:focus {\n          box-shadow: 0 0 0 3px rgba(99, 102, 241, 0.1), 0 0 20px rgba(99, 102, 241, 0.2);\n        }\n        .button-glow {\n          box-shadow: 0 0 20px rgba(99, 102, 241, 0.3);\n          transition: all 0.3s ease;\n        }\n        .button-glow:hover {\n          box-shadow: 0 0 30px rgba(99, 102, 241, 0.5);\n          transform: scale(1.05);\n        }\n        .stat-card {\n          background: linear-gradient(135deg, rgba(99, 102, 241, 0.05) 0%, rgba(139, 92, 246, 0.03) 100%);\n          border: 1px solid rgba(129, 140, 248, 0.15);\n          box-shadow: \n            inset 0 1px 0 rgba(255, 255, 255, 0.05),\n            0 10px 30px rgba(0, 0, 0, 0.3);\n        }\n        .no-scrollbar::-webkit-scrollbar { display: none; }\n        .floating-nav {\n          box-shadow: 0 -10px 40px rgba(0,0,0,0.5), inset 0 1px 1px rgba(255,255,255,0.05);\n        }\n      "}),a.jsx("input",{type:"file",onChange:e=>{var t;const r=null==(t=e.target.files)?void 0:t[0];if(!r)return;const s=new FileReader;s.onload=e=>{var t;try{const r=JSON.parse(null==(t=e.target)?void 0:t.result);r.tasks&&r.stats?confirm("Isso substituirá todos os seus dados atuais. Continuar?")&&(m(r.tasks),x(r.stats),alert("Protocolo restaurado com sucesso!")):alert("Arquivo de backup inválido.")}catch(r){alert("Erro ao ler o arquivo de backup.")}},s.readAsText(r),e.target.value=""},accept:".json",className:"hidden"}),b&&a.jsx("div",{className:"fixed inset-0 z-[3000] flex items-center justify-center bg-slate-950",children:a.jsxs("div",{className:"space-y-4 text-center",children:[a.jsx("div",{className:"w-12 h-12 border-2 border-indigo-500/10 border-t-indigo-500 rounded-full animate-spin mx-auto"}),a.jsx("p",{className:"font-space text-indigo-400 text-[8px] tracking-[0.8em] uppercase animate-pulse",children:"Sincronizando com o Cosmos..."})]})}),E&&a.jsx("div",{className:"fixed inset-0 z-[2000] flex items-center justify-center p-4 bg-slate-950/95 backdrop-blur-3xl animate-in fade-in zoom-in duration-500 overflow-hidden",children:a.jsxs("div",{className:"max-w-xl w-full text-center space-y-8 relative z-10",children:[a.jsxs("div",{className:"space-y-2",children:[a.jsx("span",{className:"text-[10px] font-black text-indigo-400 tracking-[0.8em] uppercase block animate-pulse",children:"Evolução Detectada"}),a.jsx("div",{className:"text-8xl md:text-[180px] font-space font-bold text-white leading-none filter drop-shadow-[0_0_20px_rgba(255,255,255,0.3)]",children:E.level})]}),a.jsxs("div",{className:"space-y-4",children:[a.jsx("h2",{className:"text-3xl md:text-5xl font-space font-bold text-white uppercase tracking-tight",children:E.name}),a.jsxs("p",{className:"text-slate-400 text-sm md:text-lg font-light italic max-w-xs mx-auto",children:['"',Pi[Math.floor(Math.random()*Pi.length)],'"']})]}),a.jsx("button",{onClick:()=>{A(null),w("EVOLUTION")},className:"w-full max-w-xs mx-auto h-16 bg-white text-slate-950 rounded-2xl font-space font-bold uppercase tracking-[0.2em] shadow-2xl active:scale-95 transition-all",children:"Sincronizar"})]})}),a.jsxs("nav",{className:"fixed bottom-6 left-1/2 -translate-x-1/2 w-[90%] max-w-sm h-16 md:h-screen md:w-20 lg:w-24 md:static md:translate-x-0 md:left-0 md:max-w-none bg-gradient-to-br from-slate-900/80 via-slate-900/70 to-slate-800/80 console-blur border border-white/20 md:border-white/10 rounded-3xl md:rounded-none flex md:flex-col items-center justify-around md:justify-start gap-0 md:gap-6 z-50 floating-nav md:py-8 shadow-[0_8px_32px_rgba(0,0,0,0.4)]",children:[a.jsxs("div",{className:"hidden md:flex w-12 h-12 rounded-2xl bg-gradient-to-tr from-indigo-600 via-purple-500 to-pink-500 items-center justify-center font-space font-bold text-white text-xl mb-6 shadow-[0_0_30px_rgba(99,102,241,0.5)] relative overflow-hidden group",children:[a.jsx("span",{className:"relative z-10",children:"C"}),a.jsx("div",{className:"absolute inset-0 bg-gradient-to-tr from-cyan-500 to-blue-500 opacity-0 group-hover:opacity-100 transition-opacity duration-500"})]}),a.jsxs("button",{onClick:()=>w("DASHBOARD"),className:"relative flex flex-col items-center gap-1.5 p-3 rounded-2xl transition-all duration-300 group "+("DASHBOARD"===y?"text-indigo-400 scale-110 bg-indigo-500/10 shadow-[0_0_20px_rgba(99,102,241,0.3)]":"text-slate-500 hover:text-indigo-300 hover:scale-105"),children:["DASHBOARD"===y&&a.jsx("div",{className:"absolute inset-0 rounded-2xl bg-gradient-to-br from-indigo-500/20 to-purple-500/10 border border-indigo-500/30"}),a.jsx("svg",{className:"w-6 h-6 relative z-10 transition-all duration-300 "+("DASHBOARD"===y?"drop-shadow-[0_0_8px_rgba(99,102,241,0.8)]":"group-hover:drop-shadow-[0_0_4px_rgba(99,102,241,0.4)]"),fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:a.jsx("path",{strokeWidth:"2",d:"M4 6h16M4 12h16m-7 6h7"})}),a.jsx("span",{className:"text-[6px] font-black uppercase tracking-[0.2em] md:hidden relative z-10",children:"Sincronia"}),"DASHBOARD"===y&&a.jsx("div",{className:"absolute -bottom-1 md:bottom-auto md:-right-1 left-1/2 md:left-auto md:top-1/2 -translate-x-1/2 md:translate-x-0 md:-translate-y-1/2 w-6 md:w-1 h-1 md:h-6 bg-gradient-to-r md:bg-gradient-to-b from-indigo-500 to-purple-500 rounded-full shadow-[0_0_8px_rgba(99,102,241,0.8)]"})]}),a.jsxs("button",{onClick:()=>w("EVOLUTION"),className:"relative flex flex-col items-center gap-1.5 p-3 rounded-2xl transition-all duration-300 group "+("EVOLUTION"===y?"text-violet-400 scale-110 bg-violet-500/10 shadow-[0_0_20px_rgba(139,92,246,0.3)]":"text-slate-500 hover:text-violet-300 hover:scale-105"),children:["EVOLUTION"===y&&a.jsx("div",{className:"absolute inset-0 rounded-2xl bg-gradient-to-br from-violet-500/20 to-fuchsia-500/10 border border-violet-500/30"}),a.jsx("svg",{className:"w-6 h-6 relative z-10 transition-all duration-300 "+("EVOLUTION"===y?"drop-shadow-[0_0_8px_rgba(139,92,246,0.8)]":"group-hover:drop-shadow-[0_0_4px_rgba(139,92,246,0.4)]"),fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:a.jsx("path",{strokeWidth:"2",d:"M13 10V3L4 14h7v7l9-11h-7z"})}),a.jsx("span",{className:"text-[6px] font-black uppercase tracking-[0.2em] md:hidden relative z-10",children:"Cosmos"}),"EVOLUTION"===y&&a.jsx("div",{className:"absolute -bottom-1 md:bottom-auto md:-right-1 left-1/2 md:left-auto md:top-1/2 -translate-x-1/2 md:translate-x-0 md:-translate-y-1/2 w-6 md:w-1 h-1 md:h-6 bg-gradient-to-r md:bg-gradient-to-b from-violet-500 to-fuchsia-500 rounded-full shadow-[0_0_8px_rgba(139,92,246,0.8)]"})]}),a.jsxs("button",{onClick:()=>w("STATISTICS"),className:"relative flex flex-col items-center gap-1.5 p-3 rounded-2xl transition-all duration-300 group "+("STATISTICS"===y?"text-emerald-400 scale-110 bg-emerald-500/10 shadow-[0_0_20px_rgba(16,185,129,0.3)]":"text-slate-500 hover:text-emerald-300 hover:scale-105"),children:["STATISTICS"===y&&a.jsx("div",{className:"absolute inset-0 rounded-2xl bg-gradient-to-br from-emerald-500/20 to-teal-500/10 border border-emerald-500/30"}),a.jsx("svg",{className:"w-6 h-6 relative z-10 transition-all duration-300 "+("STATISTICS"===y?"drop-shadow-[0_0_8px_rgba(16,185,129,0.8)]":"group-hover:drop-shadow-[0_0_4px_rgba(16,185,129,0.4)]"),fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:a.jsx("path",{strokeWidth:"2",d:"M9 19v-6a2 2 0 00-2-2H5a2 2 0 00-2 2v6a2 2 0 002 2h2a2 2 0 002-2zm0 0V9a2 2 0 012-2h2a2 2 0 012 2v10m-6 0a2 2 0 002 2h2a2 2 0 002-2m0 0V5a2 2 0 012-2h2a2 2 0 012 2v14a2 2 0 01-2 2h-2a2 2 0 01-2-2z"})}),a.jsx("span",{className:"text-[6px] font-black uppercase tracking-[0.2em] md:hidden relative z-10",children:"Arquivo"}),"STATISTICS"===y&&a.jsx("div",{className:"absolute -bottom-1 md:bottom-auto md:-right-1 left-1/2 md:left-auto md:top-1/2 -translate-x-1/2 md:translate-x-0 md:-translate-y-1/2 w-6 md:w-1 h-1 md:h-6 bg-gradient-to-r md:bg-gradient-to-b from-emerald-500 to-teal-500 rounded-full shadow-[0_0_8px_rgba(16,185,129,0.8)]"})]}),a.jsxs("button",{onClick:()=>w("LINKS"),className:"relative flex flex-col items-center gap-1.5 p-3 rounded-2xl transition-all duration-300 group "+("LINKS"===y?"text-cyan-400 scale-110 bg-cyan-500/10 shadow-[0_0_20px_rgba(6,182,212,0.3)]":"text-slate-500 hover:text-cyan-300 hover:scale-105"),children:["LINKS"===y&&a.jsx("div",{className:"absolute inset-0 rounded-2xl bg-gradient-to-br from-cyan-500/20 to-blue-500/10 border border-cyan-500/30"}),a.jsxs("svg",{className:"w-6 h-6 relative z-10 transition-all duration-300 "+("LINKS"===y?"drop-shadow-[0_0_8px_rgba(6,182,212,0.8)]":"group-hover:drop-shadow-[0_0_4px_rgba(6,182,212,0.4)]"),fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",strokeLinecap:"round",strokeLinejoin:"round",children:[a.jsx("path",{strokeWidth:"2",d:"M10 13a5 5 0 0 0 7.54.54l3-3a5 5 0 0 0-7.07-7.07l-1.72 1.71"}),a.jsx("path",{strokeWidth:"2",d:"M14 11a5 5 0 0 0-7.54-.54l-3 3a5 5 0 0 0 7.07 7.07l1.71-1.71"})]}),a.jsx("span",{className:"text-[6px] font-black uppercase tracking-[0.2em] md:hidden relative z-10",children:"Links"}),"LINKS"===y&&a.jsx("div",{className:"absolute -bottom-1 md:bottom-auto md:-right-1 left-1/2 md:left-auto md:top-1/2 -translate-x-1/2 md:translate-x-0 md:-translate-y-1/2 w-6 md:w-1 h-1 md:h-6 bg-gradient-to-r md:bg-gradient-to-b from-cyan-500 to-blue-500 rounded-full shadow-[0_0_8px_rgba(6,182,212,0.8)]"})]}),a.jsxs("button",{onClick:()=>w("READER"),className:"relative flex flex-col items-center gap-1.5 p-3 rounded-2xl transition-all duration-300 group "+("READER"===y?"text-orange-400 scale-110 bg-orange-500/10 shadow-[0_0_20px_rgba(249,115,22,0.3)]":"text-slate-500 hover:text-orange-300 hover:scale-105"),children:["READER"===y&&a.jsx("div",{className:"absolute inset-0 rounded-2xl bg-gradient-to-br from-orange-500/20 to-amber-500/10 border border-orange-500/30"}),a.jsxs("svg",{className:"w-6 h-6 relative z-10 transition-all duration-300 "+("READER"===y?"drop-shadow-[0_0_8px_rgba(249,115,22,0.8)]":"group-hover:drop-shadow-[0_0_4px_rgba(249,115,22,0.4)]"),fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",strokeLinecap:"round",strokeLinejoin:"round",children:[a.jsx("path",{strokeWidth:"2",d:"M12 6.253v13m0-13C10.832 5.477 9.246 5 7.5 5S4.168 5.477 3 6.253v13C4.168 18.477 5.754 18 7.5 18s3.332.477 4.5 1.253m0-13C13.168 5.477 14.754 5 16.5 5c1.747 0 3.332.477 4.5 1.253v13C19.832 18.477 18.247 18 16.5 18c-1.746 0-3.332.477-4.5 1.253"}),a.jsx("path",{strokeWidth:"2",d:"M8 8h.01M16 8h.01",opacity:"0.6"})]}),a.jsx("span",{className:"text-[6px] font-black uppercase tracking-[0.2em] md:hidden relative z-10",children:"Reader"}),"READER"===y&&a.jsx("div",{className:"absolute -bottom-1 md:bottom-auto md:-right-1 left-1/2 md:left-auto md:top-1/2 -translate-x-1/2 md:translate-x-0 md:-translate-y-1/2 w-6 md:w-1 h-1 md:h-6 bg-gradient-to-r md:bg-gradient-to-b from-orange-500 to-amber-500 rounded-full shadow-[0_0_8px_rgba(249,115,22,0.8)]"})]}),a.jsxs("button",{onClick:()=>w("STORIES"),className:"relative flex flex-col items-center gap-1.5 p-3 rounded-2xl transition-all duration-300 group "+("STORIES"===y?"text-fuchsia-400 scale-110 bg-fuchsia-500/10 shadow-[0_0_20px_rgba(217,70,239,0.3)]":"text-slate-500 hover:text-fuchsia-300 hover:scale-105"),children:["STORIES"===y&&a.jsx("div",{className:"absolute inset-0 rounded-2xl bg-gradient-to-br from-fuchsia-500/20 to-violet-500/10 border border-fuchsia-500/30"}),a.jsxs("svg",{className:"w-6 h-6 relative z-10 transition-all duration-300 "+("STORIES"===y?"drop-shadow-[0_0_8px_rgba(217,70,239,0.8)]":"group-hover:drop-shadow-[0_0_4px_rgba(217,70,239,0.4)]"),fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",strokeLinecap:"round",strokeLinejoin:"round",children:[a.jsx("path",{strokeWidth:"2",d:"M12 6.253v13m0-13C10.832 5.477 9.246 5 7.5 5S4.168 5.477 3 6.253v13C4.168 18.477 5.754 18 7.5 18s3.332.477 4.5 1.253m0-13C13.168 5.477 14.754 5 16.5 5c1.747 0 3.332.477 4.5 1.253v13C19.832 18.477 18.247 18 16.5 18c-1.746 0-3.332.477-4.5 1.253"}),a.jsx("path",{strokeWidth:"2",d:"M9 10h.01M15 10h.01M9 14h6",opacity:"0.7"})]}),a.jsx("span",{className:"text-[6px] font-black uppercase tracking-[0.2em] md:hidden relative z-10",children:"Stories"}),"STORIES"===y&&a.jsx("div",{className:"absolute -bottom-1 md:bottom-auto md:-right-1 left-1/2 md:left-auto md:top-1/2 -translate-x-1/2 md:translate-x-0 md:-translate-y-1/2 w-6 md:w-1 h-1 md:h-6 bg-gradient-to-r md:bg-gradient-to-b from-fuchsia-500 to-violet-500 rounded-full shadow-[0_0_8px_rgba(217,70,239,0.8)]"})]}),a.jsxs("button",{onClick:()=>w("MANGA"),className:"relative flex flex-col items-center gap-1.5 p-3 rounded-2xl transition-all duration-300 group "+("MANGA"===y?"text-red-400 scale-110 bg-red-500/10 shadow-[0_0_20px_rgba(239,68,68,0.3)]":"text-slate-500 hover:text-red-300 hover:scale-105"),children:["MANGA"===y&&a.jsx("div",{className:"absolute inset-0 rounded-2xl bg-gradient-to-br from-red-500/20 to-pink-500/10 border border-red-500/30"}),a.jsx("svg",{className:"w-6 h-6 relative z-10 transition-all duration-300 "+("MANGA"===y?"drop-shadow-[0_0_8px_rgba(239,68,68,0.8)]":"group-hover:drop-shadow-[0_0_4px_rgba(239,68,68,0.4)]"),fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",strokeLinecap:"round",strokeLinejoin:"round",children:a.jsx("path",{strokeWidth:"2",d:"M12 6.253v13m0-13C10.832 5.477 9.246 5 7.5 5S4.168 5.477 3 6.253v13C4.168 18.477 5.754 18 7.5 18s3.332.477 4.5 1.253m0-13C13.168 5.477 14.754 5 16.5 5c1.747 0 3.332.477 4.5 1.253v13C19.832 18.477 18.247 18 16.5 18c-1.746 0-3.332.477-4.5 1.253"})}),a.jsx("span",{className:"text-[6px] font-black uppercase tracking-[0.2em] md:hidden relative z-10",children:"Manga"}),"MANGA"===y&&a.jsx("div",{className:"absolute -bottom-1 md:bottom-auto md:-right-1 left-1/2 md:left-auto md:top-1/2 -translate-x-1/2 md:translate-x-0 md:-translate-y-1/2 w-6 md:w-1 h-1 md:h-6 bg-gradient-to-r md:bg-gradient-to-b from-red-500 to-pink-500 rounded-full shadow-[0_0_8px_rgba(239,68,68,0.8)]"})]}),a.jsxs("button",{onClick:()=>w("SHOPPING"),className:"relative flex flex-col items-center gap-1.5 p-3 rounded-2xl transition-all duration-300 group "+("SHOPPING"===y?"text-amber-400 scale-110 bg-amber-500/10 shadow-[0_0_20px_rgba(245,158,11,0.3)]":"text-slate-500 hover:text-amber-300 hover:scale-105"),children:["SHOPPING"===y&&a.jsx("div",{className:"absolute inset-0 rounded-2xl bg-gradient-to-br from-amber-500/20 to-yellow-500/10 border border-amber-500/30"}),a.jsx("svg",{className:"w-6 h-6 relative z-10 transition-all duration-300 "+("SHOPPING"===y?"drop-shadow-[0_0_8px_rgba(245,158,11,0.8)]":"group-hover:drop-shadow-[0_0_4px_rgba(245,158,11,0.4)]"),fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",strokeLinecap:"round",strokeLinejoin:"round",children:a.jsx("path",{strokeWidth:"2",d:"M3 3h2l.4 2M7 13h10l4-8H5.4M7 13L5.4 5M7 13l-2.293 2.293c-.63.63-.184 1.707.707 1.707H17m0 0a2 2 0 100 4 2 2 0 000-4zm-8 2a2 2 0 11-4 0 2 2 0 014 0z"})}),a.jsx("span",{className:"text-[6px] font-black uppercase tracking-[0.2em] md:hidden relative z-10",children:"Compras"}),"SHOPPING"===y&&a.jsx("div",{className:"absolute -bottom-1 md:bottom-auto md:-right-1 left-1/2 md:left-auto md:top-1/2 -translate-x-1/2 md:translate-x-0 md:-translate-y-1/2 w-6 md:w-1 h-1 md:h-6 bg-gradient-to-r md:bg-gradient-to-b from-amber-500 to-yellow-500 rounded-full shadow-[0_0_8px_rgba(245,158,11,0.8)]"})]}),a.jsx("button",{onClick:()=>{s(!1),localStorage.removeItem("isAuthenticated"),o(""),l("")},className:"relative flex flex-col items-center gap-1.5 p-3 rounded-2xl transition-all duration-300 group text-slate-500 hover:text-red-400 hover:scale-105 md:mt-auto",title:"Sair do Sistema",children:a.jsx("svg",{className:"w-6 h-6 relative z-10 group-hover:drop-shadow-[0_0_4px_rgba(248,113,113,0.4)] transition-all",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:a.jsx("path",{strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",d:"M17 16l4-4m0 0l-4-4m4 4H7m6 4v1a3 3 0 01-3 3H6a3 3 0 01-3-3V7a3 3 0 013-3h4a3 3 0 013 3v1"})})})]}),a.jsxs("main",{className:"flex-1 overflow-y-auto px-5 py-8 md:px-16 lg:px-24 custom-scrollbar pb-32 md:pb-8 pt-safe",children:["DASHBOARD"===y&&a.jsxs("div",{className:"max-w-4xl mx-auto space-y-10 md:space-y-12 animate-in fade-in duration-500",children:[a.jsxs("header",{className:"flex flex-col md:flex-row justify-between items-start md:items-end gap-2 md:gap-4 border-b border-white/5 pb-6",children:[a.jsxs("div",{className:"space-y-1",children:[a.jsx("h1",{className:"text-3xl md:text-5xl font-space font-bold tracking-tighter text-white uppercase leading-none",children:"Status Orbital"}),a.jsx("p",{className:"text-[8px] md:text-[9px] tracking-[0.5em] text-slate-500 font-bold uppercase italic opacity-60",children:(new Date).toLocaleDateString("pt-BR",{weekday:"long",day:"numeric",month:"long"})})]}),a.jsxs("div",{className:"flex gap-3 items-center w-full md:w-auto flex-wrap",children:[a.jsx("button",{onClick:()=>{console.log("📦 Iniciando export..."),console.log("💡 O arquivo será baixado para sua pasta de Downloads"),function(e,t,r,s,n,o){const a=localStorage.getItem("cronos_user_id")||"unknown",i={version:"1.0.0",timestamp:Date.now(),exportDate:(new Date).toISOString(),userId:a,data:{tasks:e,stats:t,books:r,links:s,products:n,purchases:o}},l=JSON.stringify(i,null,2),c=new Blob([l],{type:"application/json"}),d=URL.createObjectURL(c),u=`cronos_backup_${(new Date).toISOString().split("T")[0]}.json`,h=document.createElement("a");h.href=d,h.download=u,h.style.display="none",document.body.appendChild(h),h.click(),setTimeout(()=>{document.body.removeChild(h),URL.revokeObjectURL(d)},100),console.log("✅ Backup exported successfully!"),console.log(`📦 Tasks: ${e.length} | Stats: Level ${t.level} | Books: ${r.length} | Links: ${s.length} | Products: ${n.length} | Purchases: ${o.length}`)}(h,g,ie,Y,he,me)},className:"flex items-center gap-2 text-[8px] font-black text-purple-400 border border-purple-400/20 px-4 py-3 rounded-2xl uppercase tracking-[0.3em] bg-purple-400/5 active:scale-95 transition-all hover:opacity-80",title:"Exportar backup dos dados (JSON)",children:"💾 Export"}),a.jsx("button",{onClick:()=>{const e=document.createElement("input");e.type="file",e.accept=".json",e.onchange=e=>p(null,null,function*(){var t,r,s;const n=null==(t=e.target.files)?void 0:t[0];if(!n)return;const o=yield function(e){return p(this,null,function*(){try{const t=yield e.text(),r=JSON.parse(t);if(!r.version||!r.data)throw new Error("Invalid backup file format");return console.log("✅ Backup file validated!"),console.log(`📦 Version: ${r.version}`),console.log(`📅 Export date: ${r.exportDate}`),console.log(`📦 Tasks: ${r.data.tasks.length} | Level: ${r.data.stats.level} | Books: ${r.data.books.length}`),r}catch(t){return console.error("❌ Failed to import backup:",t.message),null}})}(n);if(o){if(confirm(`📦 Backup encontrado!\n\n📅 Data: ${new Date(o.timestamp).toLocaleString("pt-BR")}\n📋 Tarefas: ${o.data.tasks.length}\n⭐ Level: ${o.data.stats.level}\n📚 Livros: ${o.data.books.length}\n📦 Produtos: ${(null==(r=o.data.products)?void 0:r.length)||0}\n🛒 Compras: ${(null==(s=o.data.purchases)?void 0:s.length)||0}\n\nDeseja SUBSTITUIR todos os dados atuais?`)){const e=function(e,t="replace"){try{if("replace"===t)localStorage.setItem("cronos_tasks",JSON.stringify(e.data.tasks)),localStorage.setItem("cronos_stats",JSON.stringify(e.data.stats)),localStorage.setItem("cronos_books",JSON.stringify(e.data.books)),localStorage.setItem("cronos_links",JSON.stringify(e.data.links)),localStorage.setItem("cronos_products",JSON.stringify(e.data.products)),localStorage.setItem("cronos_purchases",JSON.stringify(e.data.purchases)),console.log("✅ Data restored from backup (REPLACE mode)");else{const t=JSON.parse(localStorage.getItem("cronos_tasks")||"[]"),r=JSON.parse(localStorage.getItem("cronos_books")||"[]"),s=JSON.parse(localStorage.getItem("cronos_links")||"[]"),n=[...t];e.data.tasks.forEach(e=>{n.find(t=>t.id===e.id)||n.push(e)});const o=[...r];e.data.books.forEach(e=>{o.find(t=>t.id===e.id)||o.push(e)});const a=[...s];e.data.links.forEach(e=>{a.find(t=>t.id===e.id)||a.push(e)}),localStorage.setItem("cronos_tasks",JSON.stringify(n)),localStorage.setItem("cronos_books",JSON.stringify(o)),localStorage.setItem("cronos_links",JSON.stringify(a)),localStorage.setItem("cronos_products",JSON.stringify(e.data.products)),localStorage.setItem("cronos_purchases",JSON.stringify(e.data.purchases));const i=JSON.parse(localStorage.getItem("cronos_stats")||"null");(!i||e.data.stats.level>i.level)&&localStorage.setItem("cronos_stats",JSON.stringify(e.data.stats)),console.log("✅ Data restored from backup (MERGE mode)")}return!0}catch(r){return console.error("❌ Failed to restore backup:",r.message),!1}}(o,"replace");e?(m(o.data.tasks),x(o.data.stats),ce(o.data.books),ee(o.data.links),pe(o.data.products||[]),ge(o.data.purchases||[]),alert("✅ Dados restaurados com sucesso!")):alert("❌ Falha ao restaurar backup.")}}else alert("❌ Falha ao importar backup. Verifique o arquivo.")}),e.click()},className:"flex items-center gap-2 text-[8px] font-black text-cyan-400 border border-cyan-400/20 px-4 py-3 rounded-2xl uppercase tracking-[0.3em] bg-cyan-400/5 active:scale-95 transition-all hover:opacity-80",title:"Importar backup dos dados (JSON)",children:"📂 Import"}),a.jsxs("button",{onClick:Ue,className:"flex items-center gap-2 text-[8px] font-black px-4 py-3 rounded-2xl uppercase tracking-[0.3em] active:scale-95 transition-all hover:opacity-80 "+("synced"===Z?"text-emerald-400 border border-emerald-400/20 bg-emerald-400/5":"syncing"===Z?"text-amber-400 border border-amber-400/20 bg-amber-400/5":"text-red-400 border border-red-400/20 bg-red-400/5"),title:"Sincronizar com Firebase Cloud",children:["syncing"===Z?"⏳":"synced"===Z?"🔥":"❌"," Firebase"]}),"ROUTINE"===C&&a.jsx("button",{onClick:()=>{confirm("Reiniciar todas as rotinas para hoje?")&&m(e=>e.map(e=>{var t;return"ROUTINE"===e.type?u(d({},e),{status:"PENDING",currentInput:"",lastDone:void 0,completedAt:void 0,steps:(null==(t=e.steps)?void 0:t.map(e=>u(d({},e),{completed:!1})))||[]}):e}))},className:"flex-1 md:flex-initial text-[8px] font-black text-cyan-400 border border-cyan-400/20 px-6 py-3 rounded-2xl uppercase tracking-[0.3em] bg-cyan-400/5 active:scale-95 transition-all",children:"Reiniciar Órbita"})]})]}),a.jsx("div",{className:"bg-white/[0.03] p-1 rounded-2xl border border-white/5 flex gap-1",children:["DAILY","ROUTINE"].map(e=>a.jsx("button",{onClick:()=>T(e),className:"flex-1 py-3 rounded-xl text-[10px] md:text-[12px] font-space font-bold tracking-[0.2em] uppercase transition-all duration-300 relative "+(C===e?"bg-indigo-500/20 text-white shadow-lg":"text-slate-500 hover:text-slate-400"),children:"DAILY"===e?"Singularidades":"Ciclos Orbitais"},e))}),a.jsxs("form",{onSubmit:e=>{if(e.preventDefault(),!R.trim())return;const t={id:crypto.randomUUID(),title:R,type:C,category:$,priority:M,completionMode:"TIMER",requiresInput:z,currentInput:"",status:"PENDING",createdAt:Date.now(),periodId:W,steps:V.map(e=>({id:crypto.randomUUID(),title:e,completed:!1}))};console.log(`➕ Adding ${C} task:`,t.title),m(e=>[...e,t]),L(""),H([])},className:"space-y-6 bg-indigo-500/[0.02] p-6 rounded-[2rem] border border-indigo-500/10 shadow-inner",children:[a.jsxs("div",{className:"relative",children:[a.jsx("input",{type:"text",placeholder:"Injetar novos dados no sistema...",value:R,onChange:e=>L(e.target.value),className:"w-full h-12 md:h-16 bg-transparent border-b border-indigo-500/20 text-lg md:text-2xl text-white outline-none focus:border-indigo-400 transition-all placeholder:text-slate-700 font-space"}),a.jsx("button",{type:"submit",className:"absolute right-0 bottom-2 text-indigo-400 text-[10px] font-black tracking-widest uppercase",children:"+ ADD"})]}),a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[a.jsxs("div",{className:"space-y-4",children:[a.jsx("span",{className:"text-[7px] font-black text-slate-600 uppercase tracking-[0.4em]",children:"Protocolos Secundários"}),a.jsxs("div",{className:"flex gap-2",children:[a.jsx("input",{type:"text",placeholder:"Novo módulo...",value:q,onChange:e=>B(e.target.value),onKeyDown:e=>"Enter"===e.key&&(e.preventDefault(),Re()),className:"flex-1 bg-white/5 rounded-xl px-4 py-3 text-xs outline-none focus:ring-1 ring-indigo-500 border border-white/5"}),a.jsx("button",{type:"button",onClick:Re,className:"px-5 bg-indigo-500/20 text-indigo-400 rounded-xl text-lg",children:"+"})]}),a.jsx("div",{className:"flex flex-wrap gap-2",children:V.map((e,t)=>a.jsxs("div",{className:"flex items-center gap-2 bg-indigo-500/5 px-3 py-1.5 rounded-lg border border-indigo-500/10",children:[a.jsx("span",{className:"text-[8px] text-indigo-300/70 font-bold uppercase",children:e}),a.jsx("button",{type:"button",onClick:()=>{return e=t,void H(t=>t.filter((t,r)=>r!==e));var e},className:"text-red-500/50 text-xs",children:"×"})]},t))})]}),a.jsxs("div",{className:"space-y-4",children:[a.jsx("span",{className:"text-[7px] font-black text-slate-600 uppercase tracking-[0.4em]",children:"Tipo de Carga"}),a.jsxs("div",{className:"flex gap-2",children:[a.jsx("button",{type:"button",onClick:()=>U("WORK"),className:"flex-1 py-4 rounded-xl text-[9px] font-bold uppercase border transition-all "+("WORK"===$?"bg-indigo-500/10 border-indigo-500/40 text-indigo-300 shadow-md":"bg-white/5 border-white/5 text-slate-600"),children:"Executivo"}),a.jsx("button",{type:"button",onClick:()=>U("LEISURE"),className:"flex-1 py-4 rounded-xl text-[9px] font-bold uppercase border transition-all "+("LEISURE"===$?"bg-amber-500/10 border-amber-500/40 text-amber-300 shadow-md":"bg-white/5 border-white/5 text-slate-600"),children:"Lúdico"})]})]})]}),a.jsxs("div",{className:"flex flex-wrap items-center gap-6 text-[8px] md:text-[9px] font-black tracking-[0.3em] uppercase pt-6 border-t border-white/5",children:[a.jsxs("div",{className:"flex items-center gap-3",children:[a.jsx("span",{className:"text-[7px] text-slate-700 tracking-[0.4em] font-black uppercase",children:"Urgência"}),a.jsx("div",{className:"flex gap-2",children:[1,2,3].map(e=>a.jsx("button",{type:"button",onClick:()=>D(e),className:`\n                          px-4 py-2 rounded-xl text-[7px] font-black tracking-[0.25em] uppercase\n                          transition-all duration-300 active:scale-95 border\n                          ${M===e?"bg-gradient-to-r from-cyan-500/20 to-cyan-400/10 text-cyan-300 border-cyan-400/40 shadow-[0_0_20px_rgba(34,211,238,0.3),inset_0_1px_0_rgba(255,255,255,0.1)]":"bg-white/[0.02] text-slate-600 border-white/5 hover:text-slate-400 hover:border-white/10 hover:bg-white/[0.04]"}\n                        `,children:Fe[e]},e))})]}),a.jsx("div",{className:"flex-1"}),a.jsxs("div",{className:"flex items-center gap-3",children:[a.jsx("span",{className:"text-[7px] text-slate-700 tracking-[0.4em] font-black uppercase hidden md:inline",children:"Período"}),a.jsxs("div",{className:"relative group",children:[a.jsx("select",{value:W,onChange:e=>G(e.target.value),className:"\r\n                        appearance-none bg-gradient-to-br from-indigo-500/10 to-purple-500/5 \r\n                        text-indigo-300 outline-none cursor-pointer \r\n                        border border-indigo-500/30 rounded-xl\r\n                        px-4 py-2 pr-10\r\n                        text-[8px] font-black tracking-[0.25em] uppercase\r\n                        transition-all duration-300\r\n                        hover:border-indigo-400/50 hover:shadow-[0_0_15px_rgba(99,102,241,0.2)]\r\n                        focus:border-indigo-400/60 focus:shadow-[0_0_20px_rgba(99,102,241,0.3)]\r\n                      ",children:Oi.map(e=>a.jsx("option",{value:e.id,className:"bg-slate-900 text-slate-200",children:e.name},e.id))}),a.jsx("svg",{className:"absolute right-3 top-1/2 -translate-y-1/2 w-3 h-3 text-indigo-400 pointer-events-none",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"3",d:"M19 9l-7 7-7-7"})})]})]})]})]}),a.jsx("div",{className:"space-y-12 pb-20",children:Oi.map(e=>{const t=h.filter(t=>t.type===C&&t.periodId===e.id),r=t.filter(e=>"PENDING"===e.status).sort((e,t)=>(e.priority||2)-(t.priority||2)),s=t.filter(e=>"PENDING"!==e.status);return 0===t.length?null:a.jsxs("section",{className:"space-y-4",children:[a.jsxs("h2",{className:"text-[9px] tracking-[0.6em] text-indigo-500/50 font-black uppercase flex items-center gap-4",children:[e.name," ",a.jsx("div",{className:"h-px flex-1 bg-gradient-to-r from-indigo-500/20 to-transparent"})]}),a.jsxs("div",{className:"space-y-3",children:[r.map(e=>{var t,r,s;return a.jsxs("div",{className:"task-card rounded-2xl overflow-hidden "+(1===e.priority?"priority-glow-high":2===e.priority?"priority-glow-medium":""),children:[a.jsxs("div",{className:"flex items-center gap-4 py-5 px-5",children:[a.jsx("div",{className:`w-1.5 h-10 rounded-full ${qe[e.priority||2]} ${1===e.priority?"shadow-[0_0_15px_currentColor]":"shadow-[0_0_8px_currentColor]"}`}),a.jsxs("div",{className:"flex-1 min-w-0 cursor-pointer",onClick:()=>K(t=>u(d({},t),{[e.id]:!t[e.id]})),children:[a.jsx("h3",{className:"text-base md:text-lg font-space font-semibold text-white truncate",children:e.title}),a.jsxs("div",{className:"flex gap-2 items-center mt-1.5",children:[a.jsx("span",{className:`text-[7px] font-black uppercase tracking-widest px-2 py-0.5 rounded ${Be[e.priority||2]} bg-white/5`,children:Fe[e.priority||2]}),a.jsx("div",{className:"w-1 h-1 rounded-full bg-slate-700"}),a.jsxs("span",{className:"text-[7px] font-black text-slate-500 uppercase tracking-widest",children:[null==(t=e.steps)?void 0:t.filter(e=>e.completed).length,"/",null==(r=e.steps)?void 0:r.length," Módulos"]}),"LEISURE"===e.category&&a.jsx("span",{className:"text-[7px] font-black text-amber-400/60 uppercase tracking-widest",children:"● Lúdico"})]})]}),a.jsx("button",{onClick:()=>{return t=e.id,void I(e=>e.includes(t)?e:[...e,t]);var t},className:`w-14 h-14 rounded-2xl flex items-center justify-center transition-all button-glow ${"LEISURE"===e.category?"bg-gradient-to-br from-amber-500/20 to-orange-500/10 text-amber-400 border-amber-500/20":"bg-gradient-to-br from-indigo-500/20 to-purple-500/10 text-indigo-400 border-indigo-500/20"} border`,children:a.jsxs("svg",{className:"w-7 h-7",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:[a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M14.752 11.168l-3.197-2.132A1 1 0 0010 9.87v4.263a1 1 0 001.555.832l3.197-2.132a1 1 0 000-1.664z"}),a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})]})})]}),J[e.id]&&a.jsxs("div",{className:"px-5 pb-6 pt-4 space-y-6 animate-in slide-in-from-top-2 duration-300 border-t border-white/5",children:[a.jsxs("div",{className:"space-y-3",children:[a.jsx("span",{className:"text-[7px] font-black text-slate-600 uppercase tracking-[0.4em] block",children:"Status de Prioridade"}),a.jsx("div",{className:"flex gap-2",children:[1,2,3].map(t=>a.jsx("button",{onClick:r=>{r.stopPropagation(),Le(e.id,{priority:t})},className:"flex-1 py-2 rounded-xl text-[8px] font-black uppercase border transition-all "+(e.priority===t?`${qe[t]} border-transparent text-white shadow-lg`:"bg-white/5 border-white/5 text-slate-500"),children:Fe[t]},t))})]}),a.jsxs("div",{className:"space-y-3",children:[a.jsx("span",{className:"text-[7px] font-black text-slate-600 uppercase tracking-[0.4em] block",children:"Protocolos Secundários"}),a.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-2",children:null==(s=e.steps)?void 0:s.map(t=>a.jsxs("div",{onClick:r=>{r.stopPropagation(),Me(e.id,t.id)},className:"flex items-center gap-3 p-3 rounded-xl border transition-all "+(t.completed?"bg-indigo-500/10 border-indigo-500/20 opacity-60":"bg-white/[0.02] border-white/5"),children:[a.jsx("div",{className:"w-4 h-4 rounded border flex items-center justify-center "+(t.completed?"bg-indigo-500 border-indigo-400":"border-white/20"),children:t.completed&&a.jsx("span",{className:"text-[10px]",children:"✓"})}),a.jsx("span",{className:"text-xs flex-1 "+(t.completed?"text-slate-600 line-through":"text-slate-300"),children:t.title})]},t.id))})]}),a.jsxs("div",{className:"flex gap-2",children:[a.jsx("button",{onClick:t=>{t.stopPropagation(),De("COMPLETED",0,e)},className:"flex-1 py-3 rounded-xl bg-emerald-500/10 border border-emerald-500/20 text-emerald-400 text-[9px] font-black uppercase tracking-[0.2em]",children:"Finalizar Protocolo"}),a.jsx("button",{onClick:t=>{t.stopPropagation(),Le(e.id,{category:"WORK"===e.category?"LEISURE":"WORK"})},className:"p-3 rounded-xl bg-white/5 border border-white/5 text-slate-500",children:a.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:a.jsx("path",{strokeWidth:"2",d:"M8 7h12m0 0l-4-4m4 4l-4 4m0 6H4m0 0l4 4m-4-4l4-4"})})}),a.jsx("button",{onClick:t=>{var r;t.stopPropagation(),confirm("Apagar permanentemente?")&&(r=e.id,p(null,null,function*(){try{const e=(yield $o()).filter(e=>e.id!==r);yield Do(e)}catch(e){console.error("❌ Firebase: Erro ao deletar task:",e)}}),m(t=>t.filter(t=>t.id!==e.id)))},className:"p-3 rounded-xl bg-red-500/10 border border-red-500/20 text-red-500",children:a.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:a.jsx("path",{strokeWidth:"2",d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-4v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})})})]})]})]},e.id)}),s.map(e=>a.jsxs("div",{className:"flex flex-row items-center gap-4 py-3 px-5 rounded-xl border border-white/5 bg-slate-950/20 opacity-30",children:[a.jsx("div",{className:"w-1 h-3 rounded-full bg-emerald-500/50"}),a.jsx("span",{className:"text-xs font-space line-through text-slate-600 flex-1 truncate",children:e.title}),a.jsx("button",{onClick:()=>(e=>{const t=h.find(t=>t.id===e);t&&(Pe(-5,"RESTORED",0,t),m(t=>t.map(t=>{var r;return t.id===e?u(d({},t),{status:"PENDING",lastDone:void 0,completedAt:void 0,steps:(null==(r=t.steps)?void 0:r.map(e=>u(d({},e),{completed:!1})))||[]}):t})))})(e.id),className:"text-[8px] font-black text-indigo-400 uppercase tracking-widest",children:"Reativar"})]},e.id))]})]},e.id)})})]}),"STATISTICS"===y&&a.jsxs("div",{className:"max-w-4xl mx-auto space-y-10 animate-in slide-in-from-bottom-5 duration-700",children:[a.jsx("header",{className:"border-b border-white/5 pb-6",children:a.jsx("h1",{className:"text-3xl md:text-5xl font-space font-bold tracking-tighter text-white uppercase leading-none",children:"Arquivo de Dados"})}),a.jsxs("div",{className:"hologram-card rounded-[2.5rem] p-8 space-y-8",children:[a.jsx("div",{className:"flex justify-between items-end",children:a.jsxs("div",{className:"space-y-1",children:[a.jsx("span",{className:"text-[8px] font-black text-indigo-400 uppercase tracking-[0.4em]",children:"Nível de Evolução"}),a.jsxs("h2",{className:"text-3xl font-space font-bold text-white uppercase tracking-widest leading-tight",children:[Ce.level," - ",Ce.name]})]})}),a.jsxs("div",{className:"space-y-4",children:[a.jsx("div",{className:"w-full h-2 bg-white/5 rounded-full overflow-hidden",children:Te&&a.jsx("div",{className:"h-full bg-gradient-to-r from-indigo-600 to-purple-500 shadow-[0_0_15px_rgba(99,102,241,0.5)]",style:{width:`${Math.min(100,(g.xp-Ce.xpRequired)/(Te.xpRequired-Ce.xpRequired)*100)}%`}})}),a.jsxs("div",{className:"flex justify-between text-[8px] font-black text-slate-500 uppercase tracking-[0.3em]",children:[a.jsxs("span",{children:[g.xp," XP"]}),Te?a.jsxs("span",{children:["Próximo nível em ",Te.xpRequired-g.xp," XP"]}):a.jsx("span",{children:"Nível Máximo"})]})]})]}),a.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[a.jsxs("div",{className:"hologram-card p-6 rounded-3xl text-center space-y-1",children:[a.jsx("span",{className:"text-[7px] font-black text-indigo-400 uppercase tracking-[0.4em]",children:"Sincronias"}),a.jsx("p",{className:"text-3xl font-space font-bold text-white",children:g.completedCount||0})]}),a.jsxs("div",{className:"hologram-card p-6 rounded-3xl text-center space-y-1",children:[a.jsx("span",{className:"text-[7px] font-black text-red-400 uppercase tracking-[0.4em]",children:"Perdas"}),a.jsx("p",{className:"text-3xl font-space font-bold text-white",children:g.gaveUpCount||0})]})]}),a.jsxs("div",{className:"space-y-4 pb-20",children:[a.jsx("h3",{className:"text-[9px] tracking-[0.6em] text-indigo-500/50 font-black uppercase flex items-center gap-4",children:"Logs Recentes"}),a.jsx("div",{className:"divide-y divide-white/5 bg-white/[0.01] rounded-2xl border border-white/5",children:null==(e=g.timeLogs)?void 0:e.slice(0,8).map((e,t)=>a.jsxs("div",{className:"flex items-center justify-between p-5",children:[a.jsxs("div",{className:"flex flex-col",children:[a.jsx("span",{className:"text-xs font-bold text-slate-300 uppercase",children:e.taskTitle}),a.jsx("span",{className:"text-[7px] text-slate-600 font-bold uppercase",children:new Date(e.timestamp).toLocaleString("pt-BR")})]}),a.jsxs("span",{className:"text-xs font-space font-bold text-indigo-400",children:["+",$e(e.seconds)]})]},t))})]})]}),"EVOLUTION"===y&&a.jsxs("div",{className:"h-full flex flex-col items-center justify-center pb-24 space-y-8 pt-safe",children:[a.jsx("div",{className:"w-full max-w-5xl aspect-square md:aspect-auto md:h-[500px] relative",children:a.jsx(ra,{level:g.level,nebulaTheme:g.nebulaTheme})}),a.jsxs("div",{className:"max-w-md text-center space-y-4 px-6",children:[a.jsxs("div",{className:"space-y-1",children:[a.jsx("span",{className:"text-[8px] font-black text-indigo-400 tracking-[0.5em] uppercase",children:"Era Atual"}),a.jsx("h2",{className:"text-2xl font-space font-bold text-white uppercase tracking-widest leading-tight",children:Ce.storyEra})]}),a.jsx("p",{className:"text-[11px] md:text-sm text-slate-400 italic font-light leading-relaxed",children:j?"Conectando ao núcleo de dados...":k})]})]}),"LINKS"===y&&a.jsxs("div",{className:"max-w-4xl mx-auto space-y-10 animate-in slide-in-from-bottom-5 duration-700",children:[a.jsxs("header",{className:"border-b border-cyan-500/10 pb-6",children:[a.jsx("h1",{className:"text-3xl md:text-5xl font-space font-bold tracking-tighter text-transparent bg-clip-text bg-gradient-to-r from-cyan-400 to-indigo-400 uppercase leading-none mb-2",children:"Links Arquivados"}),a.jsx("p",{className:"text-xs md:text-sm text-slate-400",children:"Salve links importantes para consultar depois"})]}),a.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:[a.jsxs("div",{className:"hologram-card p-5 rounded-2xl",children:[a.jsx("div",{className:"text-[8px] font-black text-cyan-400 uppercase tracking-wider mb-2",children:"Total"}),a.jsx("div",{className:"text-3xl font-space font-bold text-white",children:Y.length})]}),a.jsxs("div",{className:"hologram-card p-5 rounded-2xl",children:[a.jsx("div",{className:"text-[8px] font-black text-emerald-400 uppercase tracking-wider mb-2",children:"Recentes"}),a.jsx("div",{className:"text-3xl font-space font-bold text-white",children:Y.filter(e=>ze(e.createdAt)<=3).length})]}),a.jsxs("div",{className:"hologram-card p-5 rounded-2xl",children:[a.jsx("div",{className:"text-[8px] font-black text-amber-400 uppercase tracking-wider mb-2",children:"Atrasados"}),a.jsx("div",{className:"text-3xl font-space font-bold text-white",children:Y.filter(e=>ze(e.createdAt)>10).length})]}),a.jsxs("div",{className:"hologram-card p-5 rounded-2xl",children:[a.jsx("div",{className:"text-[8px] font-black text-purple-400 uppercase tracking-wider mb-2",children:"Compras"}),a.jsx("div",{className:"text-3xl font-space font-bold text-white",children:Y.filter(e=>"SHOPPING"===e.category).length})]})]}),a.jsxs("form",{onSubmit:e=>{if(e.preventDefault(),!te.trim()||!se.trim())return;const t={id:crypto.randomUUID(),url:te,title:se,category:oe,createdAt:Date.now()};ee(e=>[...e,t]),re(""),ne(""),ae("OTHER")},className:"relative bg-gradient-to-br from-cyan-500/[0.08] to-indigo-500/[0.05] border border-cyan-500/20 rounded-2xl p-6 space-y-5 backdrop-blur-sm shadow-[0_0_30px_rgba(6,182,212,0.1)]",children:[a.jsx("div",{className:"absolute top-0 left-0 w-20 h-20 border-l-2 border-t-2 border-cyan-500/30 rounded-tl-2xl"}),a.jsx("div",{className:"absolute bottom-0 right-0 w-20 h-20 border-r-2 border-b-2 border-indigo-500/30 rounded-br-2xl"}),a.jsxs("div",{className:"flex items-center gap-3 pb-2 border-b border-white/5",children:[a.jsx("div",{className:"w-8 h-8 rounded-lg bg-cyan-500/10 border border-cyan-500/20 flex items-center justify-center",children:a.jsx("span",{className:"text-lg",children:"🔗"})}),a.jsx("span",{className:"text-[8px] font-black tracking-[0.3em] uppercase text-cyan-400/80",children:"Novo Arquivo"})]}),a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[a.jsxs("div",{className:"relative group",children:[a.jsx("label",{className:"absolute -top-2 left-3 px-2 bg-slate-950 text-[7px] font-bold uppercase tracking-wider text-cyan-500/60",children:"URL"}),a.jsx("input",{type:"url",placeholder:"https://...",value:te,onChange:e=>re(e.target.value),className:"w-full bg-black/30 rounded-xl px-4 py-3.5 text-xs outline-none focus:ring-2 ring-cyan-500/50 border border-white/10 text-white placeholder:text-slate-600 transition-all group-hover:border-cyan-500/20"}),a.jsx("div",{className:"absolute inset-0 rounded-xl bg-cyan-500/5 opacity-0 group-hover:opacity-100 transition-opacity pointer-events-none"})]}),a.jsxs("div",{className:"relative group",children:[a.jsx("label",{className:"absolute -top-2 left-3 px-2 bg-slate-950 text-[7px] font-bold uppercase tracking-wider text-cyan-500/60",children:"Título"}),a.jsx("input",{type:"text",placeholder:"Descrição do link...",value:se,onChange:e=>ne(e.target.value),className:"w-full bg-black/30 rounded-xl px-4 py-3.5 text-xs outline-none focus:ring-2 ring-cyan-500/50 border border-white/10 text-white placeholder:text-slate-600 transition-all group-hover:border-cyan-500/20"}),a.jsx("div",{className:"absolute inset-0 rounded-xl bg-cyan-500/5 opacity-0 group-hover:opacity-100 transition-opacity pointer-events-none"})]})]}),a.jsxs("div",{className:"space-y-4",children:[a.jsxs("div",{className:"flex items-center gap-3",children:[a.jsx("div",{className:"w-1 h-4 bg-gradient-to-b from-cyan-500 to-indigo-500 rounded-full"}),a.jsxs("span",{className:"text-[8px] font-black uppercase tracking-[0.4em] text-cyan-400/70 flex items-center gap-2",children:["Categoria",a.jsx("span",{className:"text-[6px] text-slate-600 font-normal tracking-normal",children:"Selecione o tipo"})]})]}),a.jsx("div",{className:"grid grid-cols-5 gap-3",children:["SHOPPING","NEWS","RESEARCH","VIDEO","OTHER"].map(e=>{const t=oe===e;return a.jsxs("button",{type:"button",onClick:()=>ae(e),className:"group relative py-4 rounded-2xl text-[7px] font-black uppercase border-2 transition-all duration-500 overflow-hidden "+(t?`bg-gradient-to-br ${{SHOPPING:"from-purple-500/20 to-pink-500/20 border-purple-500/40 shadow-purple-500/30",NEWS:"from-blue-500/20 to-cyan-500/20 border-blue-500/40 shadow-blue-500/30",RESEARCH:"from-emerald-500/20 to-teal-500/20 border-emerald-500/40 shadow-emerald-500/30",VIDEO:"from-red-500/20 to-orange-500/20 border-red-500/40 shadow-red-500/30",OTHER:"from-slate-500/20 to-gray-500/20 border-slate-500/40 shadow-slate-500/30"}[e]} text-white shadow-[0_0_25px_rgba(6,182,212,0.4)] scale-105`:"bg-gradient-to-br from-white/[0.02] to-white/[0.01] border-white/10 text-slate-500 hover:scale-[1.02] hover:border-cyan-500/30"),children:[t&&a.jsxs(a.Fragment,{children:[a.jsx("div",{className:"absolute inset-0 bg-gradient-to-br from-cyan-500/10 via-transparent to-indigo-500/10 animate-pulse"}),a.jsx("div",{className:"absolute top-0 left-0 right-0 h-px bg-gradient-to-r from-transparent via-white/30 to-transparent"}),a.jsx("div",{className:"absolute bottom-0 left-0 right-0 h-px bg-gradient-to-r from-transparent via-white/20 to-transparent"})]}),a.jsx("div",{className:"relative text-2xl mb-1.5 transition-all duration-300 "+(t?"scale-110 drop-shadow-[0_0_8px_rgba(255,255,255,0.5)]":"group-hover:scale-105"),children:{SHOPPING:"🛒",NEWS:"📰",RESEARCH:"🔬",VIDEO:"🎬",OTHER:"📎"}[e]}),a.jsx("div",{className:"relative tracking-[0.15em] transition-all duration-300 "+(t?"text-white font-extrabold":"group-hover:text-cyan-400"),children:{SHOPPING:"Shop",NEWS:"News",RESEARCH:"Study",VIDEO:"Video",OTHER:"Other"}[e]}),t&&a.jsx("div",{className:"absolute -bottom-0.5 left-1/2 -translate-x-1/2 w-8 h-1 bg-gradient-to-r from-cyan-400 to-indigo-400 rounded-full shadow-[0_0_8px_rgba(6,182,212,0.8)]"}),a.jsx("div",{className:"absolute inset-0 bg-gradient-to-tr from-transparent via-white/[0.02] to-transparent translate-x-[-100%] group-hover:translate-x-[100%] transition-transform duration-700 pointer-events-none"})]},e)})})]}),a.jsxs("button",{type:"submit",className:"relative w-full py-4 rounded-xl bg-gradient-to-r from-cyan-500/20 to-indigo-500/20 border border-cyan-500/30 text-cyan-300 text-[9px] font-black uppercase tracking-[0.3em] hover:from-cyan-500/30 hover:to-indigo-500/30 hover:border-cyan-400/50 transition-all duration-300 shadow-[0_0_20px_rgba(6,182,212,0.2)] hover:shadow-[0_0_30px_rgba(6,182,212,0.4)] group overflow-hidden",children:[a.jsxs("span",{className:"relative z-10 flex items-center justify-center gap-2",children:[a.jsx("span",{className:"text-lg group-hover:scale-110 transition-transform",children:"+"}),"Arquivar Link"]}),a.jsx("div",{className:"absolute inset-0 bg-gradient-to-r from-cyan-500/0 via-cyan-500/20 to-cyan-500/0 translate-x-[-100%] group-hover:translate-x-[100%] transition-transform duration-700"})]})]}),a.jsxs("div",{className:"space-y-3 pb-20",children:[a.jsxs("h3",{className:"text-[9px] tracking-[0.6em] text-cyan-500/50 font-black uppercase flex items-center gap-4",children:["Seus Links ",a.jsx("div",{className:"h-px flex-1 bg-gradient-to-r from-cyan-500/20 to-transparent"})]}),0===Y.length?a.jsxs("div",{className:"text-center py-16 space-y-4",children:[a.jsx("div",{className:"text-6xl opacity-20",children:"🔗"}),a.jsx("p",{className:"text-slate-600 text-sm",children:"Nenhum link arquivado ainda."}),a.jsx("p",{className:"text-slate-700 text-xs",children:"Adicione links importantes no formulário acima."})]}):Y.map(e=>{const t=ze(e.createdAt),r=t>10;return a.jsx("div",{className:"bg-white/[0.02] border rounded-xl p-4 transition-all hover:bg-white/[0.04] "+(r?"border-red-500/30":"border-white/5"),children:a.jsxs("div",{className:"flex items-start gap-3",children:[a.jsxs("div",{className:"flex-1 min-w-0",children:[a.jsx("a",{href:e.url,target:"_blank",rel:"noopener noreferrer",className:"text-sm font-semibold text-cyan-400 hover:text-cyan-300 transition-colors line-clamp-1",children:e.title}),a.jsx("p",{className:"text-[10px] text-slate-600 truncate mt-1",children:e.url}),a.jsxs("div",{className:"flex items-center gap-2 mt-2",children:[a.jsx("span",{className:"text-[7px] font-black uppercase tracking-wider px-2 py-0.5 rounded bg-white/5 text-slate-500",children:"SHOPPING"===e.category?"🛒 Compras":"NEWS"===e.category?"📰 Notícias":"RESEARCH"===e.category?"🔬 Pesquisa":"VIDEO"===e.category?"🎬 Vídeo":"📎 Outro"}),a.jsx("span",{className:"text-[7px] font-mono "+(r?"text-red-400 font-bold":"text-slate-600"),children:0===t?"Hoje":`${t}d atrás`})]})]}),a.jsx("button",{onClick:()=>{return t=e.id,void ee(e=>e.filter(e=>e.id!==t));var t},className:"p-2 rounded-lg bg-red-500/10 border border-red-500/20 text-red-500 hover:bg-red-500/20 transition-all",children:a.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:a.jsx("path",{strokeWidth:"2",d:"M6 18L18 6M6 6l12 12"})})})]})},e.id)})]})]}),"READER"===y&&a.jsx(sa,{books:ie,onSaveBook:e=>{console.log(`📚 ${e.completed?"Updating":"Adding"} book:`,e.title),ce(t=>t.find(t=>t.id===e.id)?t.map(t=>t.id===e.id?e:t):[...t,e])},onDeleteBook:e=>{ce(t=>t.filter(t=>t.id!==e))},onSyncBooks:()=>p(null,null,function*(){yield Ue()}),cloudStatus:Z}),"MANGA"===y&&a.jsx(la,{cloudStatus:Z}),"STORIES"===y&&a.jsx(Ai,{}),"SHOPPING"===y&&a.jsxs("div",{className:"max-w-6xl mx-auto space-y-8 animate-in slide-in-from-bottom-5 duration-700",children:[a.jsx("header",{className:"border-b border-amber-500/10 pb-6",children:a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("div",{className:"flex items-center gap-3",children:[a.jsx("div",{className:"w-12 h-12 rounded-2xl bg-gradient-to-br from-amber-500/20 to-yellow-500/20 border border-amber-500/30 flex items-center justify-center",children:a.jsx("svg",{className:"w-6 h-6 text-amber-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M3 3h2l.4 2M7 13h10l4-8H5.4M7 13L5.4 5M7 13l-2.293 2.293c-.63.63-.184 1.707.707 1.707H17m0 0a2 2 0 100 4 2 2 0 000-4zm-8 2a2 2 0 11-4 0 2 2 0 014 0z"})})}),a.jsxs("div",{children:[a.jsx("h1",{className:"font-space text-3xl font-bold text-amber-400 tracking-wide",children:"Gestão de Compras"}),a.jsx("p",{className:"text-slate-400 text-sm",children:"Controle compras, preços e lucros"})]})]}),a.jsx("button",{onClick:()=>xe(!fe),className:"px-6 py-3 rounded-xl bg-amber-500/10 border border-amber-500/30 text-amber-400 font-medium hover:bg-amber-500/20 transition-all",children:fe?"✕ Fechar":"+ Novo Produto"})]})}),a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[a.jsxs("div",{className:"hologram-card p-6 rounded-2xl",children:[a.jsxs("div",{className:"flex items-center justify-between mb-4",children:[a.jsx("h3",{className:"text-lg font-bold text-amber-400",children:"Resumo do Período"}),a.jsxs("div",{className:"flex gap-2",children:[a.jsx("button",{onClick:()=>Ie("week"),className:"px-4 py-2 rounded-lg text-sm font-bold transition-all "+("week"===Se?"bg-amber-500/20 border border-amber-500/50 text-amber-400":"bg-slate-800/50 border border-slate-700 text-slate-400 hover:text-amber-400"),children:"Semana"}),a.jsx("button",{onClick:()=>Ie("month"),className:"px-4 py-2 rounded-lg text-sm font-bold transition-all "+("month"===Se?"bg-amber-500/20 border border-amber-500/50 text-amber-400":"bg-slate-800/50 border border-slate-700 text-slate-400 hover:text-amber-400"),children:"Mês"})]})]}),a.jsxs("div",{className:"space-y-4",children:[a.jsxs("div",{className:"p-4 rounded-xl bg-orange-500/10 border border-orange-500/30",children:[a.jsx("div",{className:"text-xs font-bold text-orange-400 uppercase tracking-wider mb-1",children:"💰 Total Pago"}),a.jsxs("div",{className:"text-3xl font-space font-bold text-orange-400",children:["R$ ",Ae.totalPaid.toFixed(2)]}),a.jsxs("div",{className:"text-xs text-slate-400 mt-1",children:[Ae.count," compra",1!==Ae.count?"s":""]})]}),a.jsxs("div",{className:"p-4 rounded-xl bg-cyan-500/10 border border-cyan-500/30",children:[a.jsx("div",{className:"text-xs font-bold text-cyan-400 uppercase tracking-wider mb-1",children:"🏷️ Total Vendas"}),a.jsxs("div",{className:"text-3xl font-space font-bold text-cyan-400",children:["R$ ",Ae.totalSale.toFixed(2)]}),a.jsx("div",{className:"text-xs text-slate-400 mt-1",children:"Valor previsto de vendas"})]})]})]}),a.jsx("div",{className:"hologram-card p-6 rounded-2xl flex flex-col justify-center",children:a.jsxs("div",{className:"text-center",children:[a.jsx("div",{className:"text-xs font-bold text-slate-400 uppercase tracking-wider mb-2",children:"📈 Lucro Bruto"}),a.jsxs("div",{className:"text-5xl md:text-6xl font-space font-bold mb-4 "+(Ae.totalProfit>=0?"text-emerald-400":"text-red-400"),children:["R$ ",Ae.totalProfit.toFixed(2)]}),a.jsxs("div",{className:"text-sm text-slate-400",children:[Ae.totalProfit>=0?"✅":"⚠️"," ","Venda Total - Compra Total"]}),Ae.totalSale>0&&a.jsxs("div",{className:"mt-4 inline-flex items-center gap-2 px-4 py-2 rounded-lg bg-amber-500/10 border border-amber-500/30",children:[a.jsx("span",{className:"text-xs font-bold text-amber-400",children:"MARGEM:"}),a.jsxs("span",{className:"text-lg font-space font-bold text-amber-400",children:[(Ae.totalProfit/Ae.totalSale*100).toFixed(1),"%"]})]})]})}),Ae.totalCompanyDiscount>0&&a.jsx("div",{className:"hologram-card p-6 rounded-2xl flex flex-col justify-center",children:a.jsxs("div",{className:"text-center",children:[a.jsx("div",{className:"text-xs font-bold text-slate-400 uppercase tracking-wider mb-2",children:"🏢 Desconto Empresa (10%)"}),a.jsxs("div",{className:"text-4xl md:text-5xl font-space font-bold text-purple-400 mb-2",children:["R$ ",Ae.totalCompanyDiscount.toFixed(2)]}),a.jsx("div",{className:"text-sm text-slate-400",children:"💼 Desconto sobre o lucro bruto"})]})}),Ae.count>0&&a.jsx("div",{className:"md:col-span-2 hologram-card p-8 rounded-2xl border-2 border-amber-500/50 shadow-[0_0_30px_rgba(245,158,11,0.3)] bg-gradient-to-br from-amber-500/5 to-yellow-500/5",children:a.jsxs("div",{className:"text-center",children:[a.jsxs("div",{className:"text-sm font-bold text-amber-400 uppercase tracking-wider mb-3",children:["💰 Lucro Líquido Final ","week"===Se?"da Semana":"do Mês"]}),a.jsxs("div",{className:"text-6xl md:text-8xl font-space font-bold mb-4 "+(Ae.netProfit>=0?"text-amber-400":"text-red-400"),children:["R$ ",Ae.netProfit.toFixed(2)]}),a.jsx("div",{className:"text-base text-slate-300 mb-4",children:"🧮 Lucro após desconto de 10% da empresa"}),a.jsxs("div",{className:"flex items-center justify-center gap-4 text-sm flex-wrap",children:[a.jsxs("div",{className:"px-4 py-2 rounded-lg bg-emerald-500/10 border border-emerald-500/30 text-emerald-400 font-bold",children:["Lucro Bruto: R$ ",Ae.totalProfit.toFixed(2)]}),a.jsx("div",{className:"text-slate-500 text-xl",children:"−"}),a.jsxs("div",{className:"px-4 py-2 rounded-lg bg-purple-500/10 border border-purple-500/30 text-purple-400 font-bold",children:["Desconto 10%: R$ ",Ae.totalCompanyDiscount.toFixed(2)]}),a.jsx("div",{className:"text-amber-500 text-xl",children:"="}),a.jsxs("div",{className:"px-4 py-2 rounded-lg bg-amber-500/20 border border-amber-500/50 text-amber-400 font-bold",children:["Líquido: R$ ",Ae.netProfit.toFixed(2)]})]})]})})]}),fe&&a.jsxs("div",{className:"hologram-card p-6 rounded-2xl space-y-4",children:[a.jsx("h3",{className:"text-lg font-bold text-amber-400",children:"Cadastrar Novo Produto"}),a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[a.jsxs("div",{children:[a.jsx("label",{className:"block text-xs font-bold text-slate-400 uppercase tracking-wider mb-2",children:"Nome do Produto"}),a.jsx("input",{type:"text",value:be,onChange:e=>ve(e.target.value),placeholder:"Ex: Chocolate Nestlé",className:"w-full px-4 py-3 rounded-xl bg-slate-800/50 border border-amber-500/20 text-white placeholder-slate-500 focus:outline-none focus:border-amber-500/50"})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-xs font-bold text-slate-400 uppercase tracking-wider mb-2",children:"Valor de Venda (R$)"}),a.jsx("input",{type:"number",step:"0.01",value:ye,onChange:e=>we(e.target.value),placeholder:"Ex: 5.50",className:"w-full px-4 py-3 rounded-xl bg-slate-800/50 border border-amber-500/20 text-white placeholder-slate-500 focus:outline-none focus:border-amber-500/50"})]})]}),a.jsx("button",{onClick:()=>{if(!be.trim()||!ye.trim())return;const e={id:crypto.randomUUID(),name:be.trim(),salePrice:parseFloat(ye),createdAt:Date.now()};pe(t=>[...t,e]),ve(""),we(""),xe(!1)},disabled:!be.trim()||!ye.trim(),className:"w-full py-3 rounded-xl bg-gradient-to-r from-amber-500 to-yellow-500 text-slate-950 font-bold disabled:opacity-30 disabled:cursor-not-allowed hover:shadow-[0_0_20px_rgba(245,158,11,0.5)] transition-all",children:"Salvar Produto"})]}),he.length>0&&a.jsxs("div",{className:"hologram-card p-6 rounded-2xl",children:[a.jsxs("h3",{className:"text-lg font-bold text-amber-400 mb-4",children:["Produtos Cadastrados (",he.length,")"]}),a.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-3",children:he.map(e=>a.jsx("div",{className:"p-4 rounded-xl bg-slate-800/50 border border-amber-500/20 hover:border-amber-500/40 transition-all group",children:a.jsxs("div",{className:"flex items-start justify-between gap-2",children:[a.jsxs("div",{className:"flex-1",children:[a.jsx("div",{className:"font-bold text-white mb-1",children:e.name}),a.jsxs("div",{className:"text-sm text-emerald-400",children:["R$ ",e.salePrice.toFixed(2)]})]}),a.jsx("button",{onClick:()=>{return t=e.id,pe(e=>e.filter(e=>e.id!==t)),void ge(e=>e.filter(e=>e.productId!==t));var t},className:"opacity-0 group-hover:opacity-100 p-2 rounded-lg bg-red-500/10 border border-red-500/20 text-red-500 hover:bg-red-500/20 transition-all",children:a.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:a.jsx("path",{strokeWidth:"2",d:"M6 18L18 6M6 6l12 12"})})})]})},e.id))})]}),a.jsxs("div",{className:"hologram-card p-6 rounded-2xl space-y-4",children:[a.jsx("h3",{className:"text-lg font-bold text-amber-400",children:"Registrar Nova Compra"}),a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[a.jsxs("div",{children:[a.jsx("label",{className:"block text-xs font-bold text-slate-400 uppercase tracking-wider mb-2",children:"Produto"}),a.jsxs("select",{value:ke,onChange:e=>Ne(e.target.value),className:"w-full px-4 py-3 rounded-xl bg-slate-800/50 border border-amber-500/20 text-white focus:outline-none focus:border-amber-500/50",children:[a.jsx("option",{value:"",children:"Selecione..."}),he.map(e=>a.jsx("option",{value:e.id,children:e.name},e.id))]})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-xs font-bold text-slate-400 uppercase tracking-wider mb-2",children:"Valor Pago (R$)"}),a.jsx("input",{type:"number",step:"0.01",value:je,onChange:e=>_e(e.target.value),placeholder:"Ex: 3.50",className:"w-full px-4 py-3 rounded-xl bg-slate-800/50 border border-amber-500/20 text-white placeholder-slate-500 focus:outline-none focus:border-amber-500/50"})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-xs font-bold text-slate-400 uppercase tracking-wider mb-2",children:"Valor de Venda (R$)"}),a.jsx("input",{type:"text",value:ke?`R$ ${(null==(t=he.find(e=>e.id===ke))?void 0:t.salePrice.toFixed(2))||"0.00"}`:"Selecione o produto",disabled:!0,className:"w-full px-4 py-3 rounded-xl bg-slate-700/30 border border-amber-500/10 text-emerald-400 font-bold cursor-not-allowed"})]})]}),a.jsx("button",{onClick:()=>{if(!ke||!je.trim())return;const e=he.find(e=>e.id===ke);if(!e)return;const t=parseFloat(je),r=e.salePrice-t,s={id:crypto.randomUUID(),productId:e.id,productName:e.name,pricePaid:t,salePrice:e.salePrice,profit:r,createdAt:Date.now()};ge(e=>[...e,s]),Ne(""),_e("")},disabled:!ke||!je.trim(),className:"w-full py-3 rounded-xl bg-gradient-to-r from-amber-500 to-yellow-500 text-slate-950 font-bold disabled:opacity-30 disabled:cursor-not-allowed hover:shadow-[0_0_20px_rgba(245,158,11,0.5)] transition-all",children:"Registrar Compra"})]}),me.length>0&&a.jsxs("div",{className:"hologram-card p-6 rounded-2xl",children:[a.jsxs("div",{className:"flex items-center justify-between mb-4",children:[a.jsxs("h3",{className:"text-lg font-bold text-amber-400",children:["Histórico de Compras (",me.length,")"]}),a.jsxs("div",{className:"flex items-center gap-4 text-sm text-slate-400",children:[a.jsxs("div",{children:["Lucro Total: ",a.jsxs("span",{className:"font-bold text-emerald-400",children:["R$ ",me.reduce((e,t)=>e+t.profit,0).toFixed(2)]})]}),a.jsxs("div",{children:["Desc. 10%: ",a.jsxs("span",{className:"font-bold text-purple-400",children:["R$ ",me.reduce((e,t)=>e+.1*t.profit,0).toFixed(2)]})]})]})]}),a.jsx("div",{className:"overflow-x-auto",children:a.jsxs("table",{className:"w-full",children:[a.jsx("thead",{children:a.jsxs("tr",{className:"border-b border-amber-500/20",children:[a.jsx("th",{className:"text-left py-3 px-4 text-xs font-bold text-slate-400 uppercase tracking-wider",children:"Produto"}),a.jsx("th",{className:"text-right py-3 px-4 text-xs font-bold text-slate-400 uppercase tracking-wider",children:"Valor Pago"}),a.jsx("th",{className:"text-right py-3 px-4 text-xs font-bold text-slate-400 uppercase tracking-wider",children:"Valor Venda"}),a.jsx("th",{className:"text-right py-3 px-4 text-xs font-bold text-slate-400 uppercase tracking-wider",children:"Lucro"}),a.jsx("th",{className:"text-right py-3 px-4 text-xs font-bold text-slate-400 uppercase tracking-wider",children:"Desc. 10%"}),a.jsx("th",{className:"text-right py-3 px-4 text-xs font-bold text-slate-400 uppercase tracking-wider",children:"Ações"})]})}),a.jsx("tbody",{children:me.map(e=>a.jsxs("tr",{className:"border-b border-slate-800 hover:bg-slate-800/30 transition-all group",children:[a.jsx("td",{className:"py-3 px-4 text-white",children:e.productName}),a.jsxs("td",{className:"py-3 px-4 text-right text-orange-400",children:["R$ ",e.pricePaid.toFixed(2)]}),a.jsxs("td",{className:"py-3 px-4 text-right text-cyan-400",children:["R$ ",e.salePrice.toFixed(2)]}),a.jsxs("td",{className:"py-3 px-4 text-right font-bold "+(e.profit>=0?"text-emerald-400":"text-red-400"),children:["R$ ",e.profit.toFixed(2)]}),a.jsxs("td",{className:"py-3 px-4 text-right text-purple-400 font-bold",children:["R$ ",(.1*e.profit).toFixed(2)]}),a.jsx("td",{className:"py-3 px-4 text-right",children:a.jsx("button",{onClick:()=>{return t=e.id,void ge(e=>e.filter(e=>e.id!==t));var t},className:"opacity-0 group-hover:opacity-100 p-2 rounded-lg bg-red-500/10 border border-red-500/20 text-red-500 hover:bg-red-500/20 transition-all",children:a.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:a.jsx("path",{strokeWidth:"2",d:"M6 18L18 6M6 6l12 12"})})})})]},e.id))})]})})]}),0===he.length&&a.jsxs("div",{className:"hologram-card p-12 rounded-2xl text-center",children:[a.jsx("svg",{className:"w-20 h-20 mx-auto mb-4 text-amber-400/30",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M3 3h2l.4 2M7 13h10l4-8H5.4M7 13L5.4 5M7 13l-2.293 2.293c-.63.63-.184 1.707.707 1.707H17m0 0a2 2 0 100 4 2 2 0 000-4zm-8 2a2 2 0 11-4 0 2 2 0 014 0z"})}),a.jsx("h3",{className:"text-xl font-bold text-white mb-2",children:"Nenhum produto cadastrado"}),a.jsx("p",{className:"text-slate-400 mb-6",children:"Comece adicionando seus primeiros produtos"}),a.jsx("button",{onClick:()=>xe(!0),className:"px-6 py-3 rounded-xl bg-gradient-to-r from-amber-500 to-yellow-500 text-slate-950 font-bold hover:shadow-[0_0_20px_rgba(245,158,11,0.5)] transition-all",children:"+ Adicionar Produto"})]})]})]}),h.filter(e=>S.includes(e.id)).map((e,t)=>a.jsx(ta,{task:e,stackIndex:t,onUpdateTask:t=>Le(e.id,t),onClose:()=>I(t=>t.filter(t=>t!==e.id)),onComplete:(t,r)=>De(t,r,e),onToggleStep:t=>Me(e.id,t),onReward:t=>Pe(t,"TIME_REWARD",0,e)},e.id)),O&&a.jsx("div",{className:"fixed inset-0 bg-black/80 backdrop-blur-sm z-50 flex items-center justify-center p-4",children:a.jsxs("div",{className:"bg-slate-900 border border-slate-700 rounded-2xl max-w-md w-full max-h-[90vh] overflow-hidden flex flex-col",children:[a.jsxs("div",{className:"p-6 border-b border-slate-700 flex items-center justify-between",children:[a.jsxs("div",{children:[a.jsx("h2",{className:"text-xl font-bold text-white",children:"🔗 Google Drive"}),a.jsx("p",{className:"text-xs text-slate-400 mt-1",children:"Sincronize com a nuvem"})]}),a.jsx("button",{onClick:()=>P(!1),className:"text-slate-400 hover:text-white transition-colors text-3xl leading-none",children:"×"})]}),a.jsx("div",{className:"flex-1 overflow-y-auto p-6",children:a.jsx(Qo,{tasks:h,stats:g,books:ie,links:Y,onRestoreBackup:(e,t,r,s,n,o)=>{m(e),x(t),ce(r),ee(s),n&&pe(n),o&&ge(o),localStorage.setItem("cronos_tasks",JSON.stringify(e)),localStorage.setItem("cronos_stats",JSON.stringify(t)),localStorage.setItem("cronos_books",JSON.stringify(r)),localStorage.setItem("cronos_links",JSON.stringify(s)),n&&localStorage.setItem("cronos_products",JSON.stringify(n)),o&&localStorage.setItem("cronos_purchases",JSON.stringify(o))}})})]})})]}):a.jsxs("div",{className:"min-h-screen flex items-center justify-center bg-slate-950 text-white relative overflow-hidden font-inter selection:bg-purple-500/30",children:[a.jsxs("div",{className:"fixed inset-0 pointer-events-none overflow-hidden",children:[a.jsx("div",{className:"absolute top-0 left-1/4 w-96 h-96 bg-indigo-600/10 rounded-full blur-[120px] animate-pulse"}),a.jsx("div",{className:"absolute bottom-0 right-1/4 w-96 h-96 bg-purple-600/10 rounded-full blur-[120px] animate-pulse",style:{animationDelay:"1s"}})]}),a.jsxs("form",{onSubmit:Ee,className:"z-10 bg-slate-900/80 p-10 rounded-3xl border border-white/10 shadow-[0_0_50px_rgba(0,0,0,0.5)] w-full max-w-sm relative overflow-hidden backdrop-blur-xl",children:[a.jsx("div",{className:"absolute top-0 left-0 right-0 h-1 bg-gradient-to-r from-indigo-500 via-purple-500 to-pink-500"}),a.jsxs("div",{className:"mb-10 text-center relative group",children:[a.jsx("div",{className:"absolute inset-0 bg-indigo-500/20 blur-xl rounded-full opacity-0 group-hover:opacity-100 transition-opacity duration-700"}),a.jsx("h2",{className:"text-4xl font-bold bg-clip-text text-transparent bg-gradient-to-r from-indigo-400 via-purple-400 to-pink-400 font-space tracking-tight relative z-10",children:"CRONOS"}),a.jsx("p",{className:"text-[10px] text-slate-500 font-mono tracking-[0.3em] uppercase mt-2",children:"Sistema de Gestão Temporal"})]}),a.jsxs("div",{className:"space-y-6",children:[a.jsxs("div",{className:"space-y-2",children:[a.jsx("label",{className:"text-[10px] font-bold text-slate-400 uppercase tracking-widest pl-1",children:"Identidade"}),a.jsxs("div",{className:"relative",children:[a.jsx("input",{type:"text",value:n,onChange:e=>o(e.target.value),className:"w-full pl-4 pr-4 py-3.5 bg-slate-950/50 border border-slate-700/50 rounded-xl focus:outline-none focus:border-indigo-500/50 focus:ring-1 focus:ring-indigo-500/50 text-slate-200 transition-all placeholder-slate-600/50 text-sm font-medium",placeholder:"Nome de usuário",autoFocus:!0}),a.jsx("div",{className:"absolute inset-0 rounded-xl bg-indigo-500/5 pointer-events-none"})]})]}),a.jsxs("div",{className:"space-y-2",children:[a.jsx("label",{className:"text-[10px] font-bold text-slate-400 uppercase tracking-widest pl-1",children:"Chave de Acesso"}),a.jsxs("div",{className:"relative",children:[a.jsx("input",{type:"password",value:i,onChange:e=>l(e.target.value),className:"w-full pl-4 pr-4 py-3.5 bg-slate-950/50 border border-slate-700/50 rounded-xl focus:outline-none focus:border-purple-500/50 focus:ring-1 focus:ring-purple-500/50 text-slate-200 transition-all placeholder-slate-600/50 text-sm font-medium",placeholder:"Senha"}),a.jsx("div",{className:"absolute inset-0 rounded-xl bg-purple-500/5 pointer-events-none"})]})]})]}),a.jsxs("button",{type:"submit",className:"w-full mt-10 bg-gradient-to-r from-indigo-600 to-purple-600 hover:from-indigo-500 hover:to-purple-500 text-white font-bold py-4 px-4 rounded-xl transition-all transform hover:scale-[1.02] active:scale-[0.98] shadow-lg shadow-indigo-900/30 flex items-center justify-center gap-2 group",children:[a.jsx("span",{children:"Inicializar Sistema"}),a.jsx("svg",{className:"w-4 h-4 group-hover:translate-x-1 transition-transform",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:a.jsx("path",{strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",d:"M13 7l5 5m0 0l-5 5m5-5H6"})})]}),a.jsxs("div",{className:"mt-8 text-center flex justify-center gap-4 opacity-30 grayscale hover:grayscale-0 transition-all duration-500",children:[a.jsx("div",{className:"h-1 w-1 rounded-full bg-indigo-500"}),a.jsx("div",{className:"h-1 w-1 rounded-full bg-purple-500"}),a.jsx("div",{className:"h-1 w-1 rounded-full bg-pink-500"})]})]})]})};l.createRoot(document.getElementById("root")).render(a.jsx(Li,{}))}},function(){return ce||(0,le[s(le)[0]])((ce={exports:{}}).exports,ce),ce.exports});export default de();
